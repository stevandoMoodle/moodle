function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _get2(){return _get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get2.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e2){throw _e2},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e3){didErr=!0,err=_e3},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var global,factory;global=window,factory=function(){var requestAnimFrame="undefined"==typeof window?function(callback){return callback()}:window.requestAnimationFrame;function throttled(fn,thisArg,updateFn){var updateArgs=updateFn||function(args){return Array.prototype.slice.call(args)},ticking=!1,args=[];return function(){for(var _len=arguments.length,rest=new Array(_len),_key=0;_key<_len;_key++)rest[_key]=arguments[_key];args=updateArgs(rest),ticking||(ticking=!0,requestAnimFrame.call(window,(function(){ticking=!1,fn.apply(thisArg,args)})))}}function debounce(fn,delay){var timeout;return function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return delay?(clearTimeout(timeout),timeout=setTimeout(fn,delay,args)):fn.apply(this,args),delay}}var _toLeftRightCenter=function(align){return"start"===align?"left":"end"===align?"right":"center"},_alignStartEnd=function(align,start,end){return"start"===align?start:"end"===align?end:(start+end)/2},_textX=function(align,left,right,rtl){return align===(rtl?"left":"right")?right:"center"===align?(left+right)/2:left},Animator=function(){function Animator(){_classCallCheck(this,Animator),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return _createClass(Animator,[{key:"_notify",value:function(chart,anims,date,type){var callbacks=anims.listeners[type],numSteps=anims.duration;callbacks.forEach((function(fn){return fn({chart:chart,initial:anims.initial,numSteps:numSteps,currentStep:Math.min(date-anims.start,numSteps)})}))}},{key:"_refresh",value:function(){var _this=this;this._request||(this._running=!0,this._request=requestAnimFrame.call(window,(function(){_this._update(),_this._request=null,_this._running&&_this._refresh()})))}},{key:"_update",value:function(){var _this2=this,date=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),remaining=0;this._charts.forEach((function(anims,chart){if(anims.running&&anims.items.length){for(var item,items=anims.items,i=items.length-1,draw=!1;i>=0;--i)(item=items[i])._active?(item._total>anims.duration&&(anims.duration=item._total),item.tick(date),draw=!0):(items[i]=items[items.length-1],items.pop());draw&&(chart.draw(),_this2._notify(chart,anims,date,"progress")),items.length||(anims.running=!1,_this2._notify(chart,anims,date,"complete"),anims.initial=!1),remaining+=items.length}})),this._lastDate=date,0===remaining&&(this._running=!1)}},{key:"_getAnims",value:function(chart){var charts=this._charts,anims=charts.get(chart);return anims||(anims={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},charts.set(chart,anims)),anims}},{key:"listen",value:function(chart,event,cb){this._getAnims(chart).listeners[event].push(cb)}},{key:"add",value:function(chart,items){var _this$_getAnims$items;items&&items.length&&(_this$_getAnims$items=this._getAnims(chart).items).push.apply(_this$_getAnims$items,_toConsumableArray(items))}},{key:"has",value:function(chart){return this._getAnims(chart).items.length>0}},{key:"start",value:function(chart){var anims=this._charts.get(chart);anims&&(anims.running=!0,anims.start=Date.now(),anims.duration=anims.items.reduce((function(acc,cur){return Math.max(acc,cur._duration)}),0),this._refresh())}},{key:"running",value:function(chart){if(!this._running)return!1;var anims=this._charts.get(chart);return!!(anims&&anims.running&&anims.items.length)}},{key:"stop",value:function(chart){var anims=this._charts.get(chart);if(anims&&anims.items.length){for(var items=anims.items,i=items.length-1;i>=0;--i)items[i].cancel();anims.items=[],this._notify(chart,anims,Date.now(),"complete")}}},{key:"remove",value:function(chart){return this._charts.delete(chart)}}]),Animator}(),animator=new Animator;function round(v){return v+.5|0}var lim=function(v,l,h){return Math.max(Math.min(v,h),l)};function p2b(v){return lim(round(2.55*v),0,255)}function n2b(v){return lim(round(255*v),0,255)}function b2n(v){return lim(round(v/2.55)/100,0,1)}function n2p(v){return lim(round(100*v),0,100)}var map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=_toConsumableArray("0123456789ABCDEF"),h1=function(b){return hex[15&b]},h2=function(b){return hex[(240&b)>>4]+hex[15&b]},eq=function(b){return(240&b)>>4==(15&b)};function _hexString(v){var f=function(v){return eq(v.r)&&eq(v.g)&&eq(v.b)&&eq(v.a)}(v)?h1:h2;return v?"#"+f(v.r)+f(v.g)+f(v.b)+function(a,f){return a<255?f(a):""}(v.a,f):void 0}var HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(h,s,l){var a=s*Math.min(l,1-l),f=function(n){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+h/30)%12;return l-a*Math.max(Math.min(k-3,9-k,1),-1)};return[f(0),f(8),f(4)]}function hsv2rgbn(h,s,v){var f=function(n){var k=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+h/60)%6;return v-v*s*Math.max(Math.min(k,4-k,1),0)};return[f(5),f(3),f(1)]}function hwb2rgbn(h,w,b){var i,rgb=hsl2rgbn(h,1,.5);for(w+b>1&&(w*=i=1/(w+b),b*=i),i=0;i<3;i++)rgb[i]*=1-w-b,rgb[i]+=w;return rgb}function rgb2hsl(v){var h,s,d,r=v.r/255,g=v.g/255,b=v.b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;return max!==min&&(d=max-min,s=l>.5?d/(2-max-min):d/(max+min),h=function(r,g,b,d,max){return r===max?(g-b)/d+(g<b?6:0):g===max?(b-r)/d+2:(r-g)/d+4}(r,g,b,d,max),h=60*h+.5),[0|h,s||0,l]}function calln(f,a,b,c){return(Array.isArray(a)?f(a[0],a[1],a[2]):f(a,b,c)).map(n2b)}function hsl2rgb(h,s,l){return calln(hsl2rgbn,h,s,l)}function hue(h){return(h%360+360)%360}function hueParse(str){var v,m=HUE_RE.exec(str),a=255;if(m){m[5]!==v&&(a=m[6]?p2b(+m[5]):n2b(+m[5]));var h=hue(+m[2]),p1=+m[3]/100,p2=+m[4]/100;return{r:(v="hwb"===m[1]?function(h,w,b){return calln(hwb2rgbn,h,w,b)}(h,p1,p2):"hsv"===m[1]?function(h,s,v){return calln(hsv2rgbn,h,s,v)}(h,p1,p2):hsl2rgb(h,p1,p2))[0],g:v[1],b:v[2],a:a}}}var names,map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function nameParse(str){names||((names=function(){var i,j,k,ok,nk,unpacked={},keys=Object.keys(names$1),tkeys=Object.keys(map$2);for(i=0;i<keys.length;i++){for(ok=nk=keys[i],j=0;j<tkeys.length;j++)k=tkeys[j],nk=nk.replace(k,map$2[k]);k=parseInt(names$1[ok],16),unpacked[nk]=[k>>16&255,k>>8&255,255&k]}return unpacked}()).transparent=[0,0,0,0]);var a=names[str.toLowerCase()];return a&&{r:a[0],g:a[1],b:a[2],a:4===a.length?a[3]:255}}var RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,to=function(v){return v<=.0031308?12.92*v:1.055*Math.pow(v,1/2.4)-.055},from=function(v){return v<=.04045?v/12.92:Math.pow((v+.055)/1.055,2.4)};function modHSL(v,i,ratio){if(v){var tmp=rgb2hsl(v);tmp[i]=Math.max(0,Math.min(tmp[i]+tmp[i]*ratio,0===i?360:1)),tmp=hsl2rgb(tmp),v.r=tmp[0],v.g=tmp[1],v.b=tmp[2]}}function clone$1(v,proto){return v?Object.assign(proto||{},v):v}function fromObject(input){var v={r:0,g:0,b:0,a:255};return Array.isArray(input)?input.length>=3&&(v={r:input[0],g:input[1],b:input[2],a:255},input.length>3&&(v.a=n2b(input[3]))):(v=clone$1(input,{r:0,g:0,b:0,a:1})).a=n2b(v.a),v}function functionParse(str){return"r"===str.charAt(0)?function(str){var r,g,b,m=RGB_RE.exec(str),a=255;if(m){if(m[7]!==r){var v=+m[7];a=m[8]?p2b(v):lim(255*v,0,255)}return r=+m[1],g=+m[3],b=+m[5],{r:r=255&(m[2]?p2b(r):lim(r,0,255)),g:g=255&(m[4]?p2b(g):lim(g,0,255)),b:b=255&(m[6]?p2b(b):lim(b,0,255)),a:a}}}(str):hueParse(str)}var Color=function(){function Color(input){if(_classCallCheck(this,Color),input instanceof Color)return input;var v,str,ret,len,type=_typeof(input);"object"===type?v=fromObject(input):"string"===type&&(len=(str=input).length,"#"===str[0]&&(4===len||5===len?ret={r:255&17*map$1[str[1]],g:255&17*map$1[str[2]],b:255&17*map$1[str[3]],a:5===len?17*map$1[str[4]]:255}:7!==len&&9!==len||(ret={r:map$1[str[1]]<<4|map$1[str[2]],g:map$1[str[3]]<<4|map$1[str[4]],b:map$1[str[5]]<<4|map$1[str[6]],a:9===len?map$1[str[7]]<<4|map$1[str[8]]:255})),v=ret||nameParse(input)||functionParse(input)),this._rgb=v,this._valid=!!v}return _createClass(Color,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var v=clone$1(this._rgb);return v&&(v.a=b2n(v.a)),v},set:function(obj){this._rgb=fromObject(obj)}},{key:"rgbString",value:function(){return this._valid?(v=this._rgb)&&(v.a<255?"rgba(".concat(v.r,", ").concat(v.g,", ").concat(v.b,", ").concat(b2n(v.a),")"):"rgb(".concat(v.r,", ").concat(v.g,", ").concat(v.b,")")):void 0;var v}},{key:"hexString",value:function(){return this._valid?_hexString(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(v){if(v){var a=rgb2hsl(v),h=a[0],s=n2p(a[1]),l=n2p(a[2]);return v.a<255?"hsla(".concat(h,", ").concat(s,"%, ").concat(l,"%, ").concat(b2n(v.a),")"):"hsl(".concat(h,", ").concat(s,"%, ").concat(l,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(color,weight){if(color){var w2,c1=this.rgb,c2=color.rgb,p=weight===w2?.5:weight,w=2*p-1,a=c1.a-c2.a,w1=((w*a==-1?w:(w+a)/(1+w*a))+1)/2;w2=1-w1,c1.r=255&w1*c1.r+w2*c2.r+.5,c1.g=255&w1*c1.g+w2*c2.g+.5,c1.b=255&w1*c1.b+w2*c2.b+.5,c1.a=p*c1.a+(1-p)*c2.a,this.rgb=c1}return this}},{key:"interpolate",value:function(color,t){return color&&(this._rgb=function(rgb1,rgb2,t){var r=from(b2n(rgb1.r)),g=from(b2n(rgb1.g)),b=from(b2n(rgb1.b));return{r:n2b(to(r+t*(from(b2n(rgb2.r))-r))),g:n2b(to(g+t*(from(b2n(rgb2.g))-g))),b:n2b(to(b+t*(from(b2n(rgb2.b))-b))),a:rgb1.a+t*(rgb2.a-rgb1.a)}}(this._rgb,color._rgb,t)),this}},{key:"clone",value:function(){return new Color(this.rgb)}},{key:"alpha",value:function(a){return this._rgb.a=n2b(a),this}},{key:"clearer",value:function(ratio){return this._rgb.a*=1-ratio,this}},{key:"greyscale",value:function(){var rgb=this._rgb,val=round(.3*rgb.r+.59*rgb.g+.11*rgb.b);return rgb.r=rgb.g=rgb.b=val,this}},{key:"opaquer",value:function(ratio){return this._rgb.a*=1+ratio,this}},{key:"negate",value:function(){var v=this._rgb;return v.r=255-v.r,v.g=255-v.g,v.b=255-v.b,this}},{key:"lighten",value:function(ratio){return modHSL(this._rgb,2,ratio),this}},{key:"darken",value:function(ratio){return modHSL(this._rgb,2,-ratio),this}},{key:"saturate",value:function(ratio){return modHSL(this._rgb,1,ratio),this}},{key:"desaturate",value:function(ratio){return modHSL(this._rgb,1,-ratio),this}},{key:"rotate",value:function(deg){return function(v,deg){var h=rgb2hsl(v);h[0]=hue(h[0]+deg),h=hsl2rgb(h),v.r=h[0],v.g=h[1],v.b=h[2]}(this._rgb,deg),this}}]),Color}();function index_esm(input){return new Color(input)}function isPatternOrGradient(value){if(value&&"object"===_typeof(value)){var type=value.toString();return"[object CanvasPattern]"===type||"[object CanvasGradient]"===type}return!1}function _color(value){return isPatternOrGradient(value)?value:index_esm(value)}function getHoverColor(value){return isPatternOrGradient(value)?value:index_esm(value).saturate(.5).darken(.1).hexString()}function noop(){}var id,uid=(id=0,function(){return id++});function isNullOrUndef(value){return null==value}function isArray(value){if(Array.isArray&&Array.isArray(value))return!0;var type=Object.prototype.toString.call(value);return"[object"===type.slice(0,7)&&"Array]"===type.slice(-6)}function isObject(value){return null!==value&&"[object Object]"===Object.prototype.toString.call(value)}var isNumberFinite=function(value){return("number"==typeof value||value instanceof Number)&&isFinite(+value)};function finiteOrDefault(value,defaultValue){return isNumberFinite(value)?value:defaultValue}function valueOrDefault(value,defaultValue){return void 0===value?defaultValue:value}var toPercentage=function(value,dimension){return"string"==typeof value&&value.endsWith("%")?parseFloat(value)/100:value/dimension},toDimension=function(value,dimension){return"string"==typeof value&&value.endsWith("%")?parseFloat(value)/100*dimension:+value};function callback(fn,args,thisArg){if(fn&&"function"==typeof fn.call)return fn.apply(thisArg,args)}function each(loopable,fn,thisArg,reverse){var i,len,keys;if(isArray(loopable))if(len=loopable.length,reverse)for(i=len-1;i>=0;i--)fn.call(thisArg,loopable[i],i);else for(i=0;i<len;i++)fn.call(thisArg,loopable[i],i);else if(isObject(loopable))for(len=(keys=Object.keys(loopable)).length,i=0;i<len;i++)fn.call(thisArg,loopable[keys[i]],keys[i])}function _elementsEqual(a0,a1){var i,ilen,v0,v1;if(!a0||!a1||a0.length!==a1.length)return!1;for(i=0,ilen=a0.length;i<ilen;++i)if(v0=a0[i],v1=a1[i],v0.datasetIndex!==v1.datasetIndex||v0.index!==v1.index)return!1;return!0}function clone(source){if(isArray(source))return source.map(clone);if(isObject(source)){for(var target=Object.create(null),keys=Object.keys(source),klen=keys.length,k=0;k<klen;++k)target[keys[k]]=clone(source[keys[k]]);return target}return source}function isValidKey(key){return-1===["__proto__","prototype","constructor"].indexOf(key)}function _merger(key,target,source,options){if(isValidKey(key)){var tval=target[key],sval=source[key];isObject(tval)&&isObject(sval)?merge(tval,sval,options):target[key]=clone(sval)}}function merge(target,source,options){var sources=isArray(source)?source:[source],ilen=sources.length;if(!isObject(target))return target;for(var merger=(options=options||{}).merger||_merger,i=0;i<ilen;++i)if(isObject(source=sources[i]))for(var keys=Object.keys(source),k=0,klen=keys.length;k<klen;++k)merger(keys[k],target,source,options);return target}function mergeIf(target,source){return merge(target,source,{merger:_mergerIf})}function _mergerIf(key,target,source){if(isValidKey(key)){var tval=target[key],sval=source[key];isObject(tval)&&isObject(sval)?mergeIf(tval,sval):Object.prototype.hasOwnProperty.call(target,key)||(target[key]=clone(sval))}}function indexOfDotOrLength(key,start){var idx=key.indexOf(".",start);return-1===idx?key.length:idx}function resolveObjectKey(obj,key){if(""===key)return obj;for(var pos=0,idx=indexOfDotOrLength(key,pos);obj&&idx>pos;)obj=obj[key.slice(pos,idx)],idx=indexOfDotOrLength(key,pos=idx+1);return obj}function _capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1)}var defined=function(value){return void 0!==value},isFunction=function(value){return"function"==typeof value},setsEqual=function(a,b){if(a.size!==b.size)return!1;var _step,_iterator=_createForOfIteratorHelper(a);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(!b.has(item))return!1}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!0};function _isClickEvent(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}var overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(node,key){if(!key)return node;for(var keys=key.split("."),i=0,n=keys.length;i<n;++i){var k=keys[i];node=node[k]||(node[k]=Object.create(null))}return node}function _set(root,scope,values){return"string"==typeof scope?merge(getScope$1(root,scope),values):merge(getScope$1(root,""),scope)}var Defaults=function(){function Defaults(_descriptors){_classCallCheck(this,Defaults),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(context){return context.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(ctx,options){return getHoverColor(options.backgroundColor)},this.hoverBorderColor=function(ctx,options){return getHoverColor(options.borderColor)},this.hoverColor=function(ctx,options){return getHoverColor(options.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(_descriptors)}return _createClass(Defaults,[{key:"set",value:function(scope,values){return _set(this,scope,values)}},{key:"get",value:function(scope){return getScope$1(this,scope)}},{key:"describe",value:function(scope,values){return _set(descriptors,scope,values)}},{key:"override",value:function(scope,values){return _set(overrides,scope,values)}},{key:"route",value:function(scope,name,targetScope,targetName){var _Object$definePropert,scopeObject=getScope$1(this,scope),targetScopeObject=getScope$1(this,targetScope),privateName="_"+name;Object.defineProperties(scopeObject,(_defineProperty(_Object$definePropert={},privateName,{value:scopeObject[name],writable:!0}),_defineProperty(_Object$definePropert,name,{enumerable:!0,get:function(){var local=this[privateName],target=targetScopeObject[targetName];return isObject(local)?Object.assign({},target,local):valueOrDefault(local,target)},set:function(value){this[privateName]=value}}),_Object$definePropert))}}]),Defaults}(),defaults=new Defaults({_scriptable:function(name){return!name.startsWith("on")},_indexable:function(name){return"events"!==name},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function _lookup(table,value,cmp){cmp=cmp||function(index){return table[index]<value};for(var mid,hi=table.length-1,lo=0;hi-lo>1;)cmp(mid=lo+hi>>1)?lo=mid:hi=mid;return{lo:lo,hi:hi}}var _lookupByKey=function(table,key,value){return _lookup(table,value,(function(index){return table[index][key]<value}))},_rlookupByKey=function(table,key,value){return _lookup(table,value,(function(index){return table[index][key]>=value}))};function _filterBetween(values,min,max){for(var start=0,end=values.length;start<end&&values[start]<min;)start++;for(;end>start&&values[end-1]>max;)end--;return start>0||end<values.length?values.slice(start,end):values}var arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(array,listener){array._chartjs?array._chartjs.listeners.push(listener):(Object.defineProperty(array,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[listener]}}),arrayEvents.forEach((function(key){var method="_onData"+_capitalize(key),base=array[key];Object.defineProperty(array,key,{configurable:!0,enumerable:!1,value:function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];var res=base.apply(this,args);return array._chartjs.listeners.forEach((function(object){"function"==typeof object[method]&&object[method].apply(object,args)})),res}})})))}function unlistenArrayEvents(array,listener){var stub=array._chartjs;if(stub){var listeners=stub.listeners,index=listeners.indexOf(listener);-1!==index&&listeners.splice(index,1),listeners.length>0||(arrayEvents.forEach((function(key){delete array[key]})),delete array._chartjs)}}function _arrayUnique(items){var i,ilen,set=new Set;for(i=0,ilen=items.length;i<ilen;++i)set.add(items[i]);return set.size===ilen?items:Array.from(set)}var PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=2*PI/3,log10=Math.log10,sign=Math.sign;function niceNum(range){var roundedRange=Math.round(range);range=almostEquals(range,roundedRange,range/1e3)?roundedRange:range;var niceRange=Math.pow(10,Math.floor(log10(range))),fraction=range/niceRange;return(fraction<=1?1:fraction<=2?2:fraction<=5?5:10)*niceRange}function _factorize(value){var i,result=[],sqrt=Math.sqrt(value);for(i=1;i<sqrt;i++)value%i==0&&(result.push(i),result.push(value/i));return sqrt===(0|sqrt)&&result.push(sqrt),result.sort((function(a,b){return a-b})).pop(),result}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function almostEquals(x,y,epsilon){return Math.abs(x-y)<epsilon}function almostWhole(x,epsilon){var rounded=Math.round(x);return rounded-epsilon<=x&&rounded+epsilon>=x}function _setMinAndMaxByKey(array,target,property){var i,ilen,value;for(i=0,ilen=array.length;i<ilen;i++)value=array[i][property],isNaN(value)||(target.min=Math.min(target.min,value),target.max=Math.max(target.max,value))}function toRadians(degrees){return degrees*(PI/180)}function toDegrees(radians){return radians*(180/PI)}function _decimalPlaces(x){if(isNumberFinite(x)){for(var e=1,p=0;Math.round(x*e)/e!==x;)e*=10,p++;return p}}function getAngleFromPoint(centrePoint,anglePoint){var distanceFromXCenter=anglePoint.x-centrePoint.x,distanceFromYCenter=anglePoint.y-centrePoint.y,radialDistanceFromCenter=Math.sqrt(distanceFromXCenter*distanceFromXCenter+distanceFromYCenter*distanceFromYCenter),angle=Math.atan2(distanceFromYCenter,distanceFromXCenter);return angle<-.5*PI&&(angle+=TAU),{angle:angle,distance:radialDistanceFromCenter}}function distanceBetweenPoints(pt1,pt2){return Math.sqrt(Math.pow(pt2.x-pt1.x,2)+Math.pow(pt2.y-pt1.y,2))}function _angleDiff(a,b){return(a-b+PITAU)%TAU-PI}function _normalizeAngle(a){return(a%TAU+TAU)%TAU}function _angleBetween(angle,start,end,sameAngleIsFullCircle){var a=_normalizeAngle(angle),s=_normalizeAngle(start),e=_normalizeAngle(end),angleToStart=_normalizeAngle(s-a),angleToEnd=_normalizeAngle(e-a),startToAngle=_normalizeAngle(a-s),endToAngle=_normalizeAngle(a-e);return a===s||a===e||sameAngleIsFullCircle&&s===e||angleToStart>angleToEnd&&startToAngle<endToAngle}function _limitValue(value,min,max){return Math.max(min,Math.min(max,value))}function _int16Range(value){return _limitValue(value,-32768,32767)}function _isBetween(value,start,end){var epsilon=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return value>=Math.min(start,end)-epsilon&&value<=Math.max(start,end)+epsilon}function _isDomSupported(){return"undefined"!=typeof window&&"undefined"!=typeof document}function _getParentNode(domNode){var parent=domNode.parentNode;return parent&&"[object ShadowRoot]"===parent.toString()&&(parent=parent.host),parent}function parseMaxStyle(styleValue,node,parentProperty){var valueInPixels;return"string"==typeof styleValue?(valueInPixels=parseInt(styleValue,10),-1!==styleValue.indexOf("%")&&(valueInPixels=valueInPixels/100*node.parentNode[parentProperty])):valueInPixels=styleValue,valueInPixels}var getComputedStyle=function(element){return window.getComputedStyle(element,null)};function getStyle(el,property){return getComputedStyle(el).getPropertyValue(property)}var positions=["top","right","bottom","left"];function getPositionedStyle(styles,style,suffix){var result={};suffix=suffix?"-"+suffix:"";for(var i=0;i<4;i++){var pos=positions[i];result[pos]=parseFloat(styles[style+"-"+pos+suffix])||0}return result.width=result.left+result.right,result.height=result.top+result.bottom,result}function getRelativePosition(evt,chart){if("native"in evt)return evt;var canvas=chart.canvas,currentDevicePixelRatio=chart.currentDevicePixelRatio,style=getComputedStyle(canvas),borderBox="border-box"===style.boxSizing,paddings=getPositionedStyle(style,"padding"),borders=getPositionedStyle(style,"border","width"),_getCanvasPosition=function(e,canvas){var x,y,touches=e.touches,source=touches&&touches.length?touches[0]:e,offsetX=source.offsetX,offsetY=source.offsetY,box=!1;if(function(x,y,target){return(x>0||y>0)&&(!target||!target.shadowRoot)}(offsetX,offsetY,e.target))x=offsetX,y=offsetY;else{var rect=canvas.getBoundingClientRect();x=source.clientX-rect.left,y=source.clientY-rect.top,box=!0}return{x:x,y:y,box:box}}(evt,canvas),x=_getCanvasPosition.x,y=_getCanvasPosition.y,box=_getCanvasPosition.box,xOffset=paddings.left+(box&&borders.left),yOffset=paddings.top+(box&&borders.top),width=chart.width,height=chart.height;return borderBox&&(width-=paddings.width+borders.width,height-=paddings.height+borders.height),{x:Math.round((x-xOffset)/width*canvas.width/currentDevicePixelRatio),y:Math.round((y-yOffset)/height*canvas.height/currentDevicePixelRatio)}}var round1=function(v){return Math.round(10*v)/10};function _getMaximumSize(canvas,bbWidth,bbHeight,aspectRatio){var style=getComputedStyle(canvas),margins=getPositionedStyle(style,"margin"),maxWidth=parseMaxStyle(style.maxWidth,canvas,"clientWidth")||INFINITY,maxHeight=parseMaxStyle(style.maxHeight,canvas,"clientHeight")||INFINITY,containerSize=function(canvas,width,height){var maxWidth,maxHeight;if(void 0===width||void 0===height){var container=_getParentNode(canvas);if(container){var rect=container.getBoundingClientRect(),containerStyle=getComputedStyle(container),containerBorder=getPositionedStyle(containerStyle,"border","width"),containerPadding=getPositionedStyle(containerStyle,"padding");width=rect.width-containerPadding.width-containerBorder.width,height=rect.height-containerPadding.height-containerBorder.height,maxWidth=parseMaxStyle(containerStyle.maxWidth,container,"clientWidth"),maxHeight=parseMaxStyle(containerStyle.maxHeight,container,"clientHeight")}else width=canvas.clientWidth,height=canvas.clientHeight}return{width:width,height:height,maxWidth:maxWidth||INFINITY,maxHeight:maxHeight||INFINITY}}(canvas,bbWidth,bbHeight),width=containerSize.width,height=containerSize.height;if("content-box"===style.boxSizing){var borders=getPositionedStyle(style,"border","width"),paddings=getPositionedStyle(style,"padding");width-=paddings.width+borders.width,height-=paddings.height+borders.height}return width=Math.max(0,width-margins.width),height=Math.max(0,aspectRatio?Math.floor(width/aspectRatio):height-margins.height),width=round1(Math.min(width,maxWidth,containerSize.maxWidth)),height=round1(Math.min(height,maxHeight,containerSize.maxHeight)),width&&!height&&(height=round1(width/2)),{width:width,height:height}}function retinaScale(chart,forceRatio,forceStyle){var pixelRatio=forceRatio||1,deviceHeight=Math.floor(chart.height*pixelRatio),deviceWidth=Math.floor(chart.width*pixelRatio);chart.height=deviceHeight/pixelRatio,chart.width=deviceWidth/pixelRatio;var canvas=chart.canvas;return canvas.style&&(forceStyle||!canvas.style.height&&!canvas.style.width)&&(canvas.style.height="".concat(chart.height,"px"),canvas.style.width="".concat(chart.width,"px")),(chart.currentDevicePixelRatio!==pixelRatio||canvas.height!==deviceHeight||canvas.width!==deviceWidth)&&(chart.currentDevicePixelRatio=pixelRatio,canvas.height=deviceHeight,canvas.width=deviceWidth,chart.ctx.setTransform(pixelRatio,0,0,pixelRatio,0,0),!0)}var supportsEventListenerOptions=function(){var passiveSupported=!1;try{var options={get passive(){return passiveSupported=!0,!1}};window.addEventListener("test",null,options),window.removeEventListener("test",null,options)}catch(e){}return passiveSupported}();function readUsedSize(element,property){var value=getStyle(element,property),matches=value&&value.match(/^(\d+)(\.\d+)?px$/);return matches?+matches[1]:void 0}function toFontString(font){return!font||isNullOrUndef(font.size)||isNullOrUndef(font.family)?null:(font.style?font.style+" ":"")+(font.weight?font.weight+" ":"")+font.size+"px "+font.family}function _measureText(ctx,data,gc,longest,string){var textWidth=data[string];return textWidth||(textWidth=data[string]=ctx.measureText(string).width,gc.push(string)),textWidth>longest&&(longest=textWidth),longest}function _longestText(ctx,font,arrayOfThings,cache){var data=(cache=cache||{}).data=cache.data||{},gc=cache.garbageCollect=cache.garbageCollect||[];cache.font!==font&&(data=cache.data={},gc=cache.garbageCollect=[],cache.font=font),ctx.save(),ctx.font=font;var i,j,jlen,thing,nestedThing,longest=0,ilen=arrayOfThings.length;for(i=0;i<ilen;i++)if(null!=(thing=arrayOfThings[i])&&!0!==isArray(thing))longest=_measureText(ctx,data,gc,longest,thing);else if(isArray(thing))for(j=0,jlen=thing.length;j<jlen;j++)null==(nestedThing=thing[j])||isArray(nestedThing)||(longest=_measureText(ctx,data,gc,longest,nestedThing));ctx.restore();var gcLen=gc.length/2;if(gcLen>arrayOfThings.length){for(i=0;i<gcLen;i++)delete data[gc[i]];gc.splice(0,gcLen)}return longest}function _alignPixel(chart,pixel,width){var devicePixelRatio=chart.currentDevicePixelRatio,halfWidth=0!==width?Math.max(width/2,.5):0;return Math.round((pixel-halfWidth)*devicePixelRatio)/devicePixelRatio+halfWidth}function clearCanvas(canvas,ctx){(ctx=ctx||canvas.getContext("2d")).save(),ctx.resetTransform(),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.restore()}function drawPoint(ctx,options,x,y){var type,xOffset,yOffset,size,cornerRadius,style=options.pointStyle,rotation=options.rotation,radius=options.radius,rad=(rotation||0)*RAD_PER_DEG;if(style&&"object"===_typeof(style)&&("[object HTMLImageElement]"===(type=style.toString())||"[object HTMLCanvasElement]"===type))return ctx.save(),ctx.translate(x,y),ctx.rotate(rad),ctx.drawImage(style,-style.width/2,-style.height/2,style.width,style.height),void ctx.restore();if(!(isNaN(radius)||radius<=0)){switch(ctx.beginPath(),style){default:ctx.arc(x,y,radius,0,TAU),ctx.closePath();break;case"triangle":ctx.moveTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),rad+=TWO_THIRDS_PI,ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),rad+=TWO_THIRDS_PI,ctx.lineTo(x+Math.sin(rad)*radius,y-Math.cos(rad)*radius),ctx.closePath();break;case"rectRounded":size=radius-(cornerRadius=.516*radius),xOffset=Math.cos(rad+QUARTER_PI)*size,yOffset=Math.sin(rad+QUARTER_PI)*size,ctx.arc(x-xOffset,y-yOffset,cornerRadius,rad-PI,rad-HALF_PI),ctx.arc(x+yOffset,y-xOffset,cornerRadius,rad-HALF_PI,rad),ctx.arc(x+xOffset,y+yOffset,cornerRadius,rad,rad+HALF_PI),ctx.arc(x-yOffset,y+xOffset,cornerRadius,rad+HALF_PI,rad+PI),ctx.closePath();break;case"rect":if(!rotation){size=Math.SQRT1_2*radius,ctx.rect(x-size,y-size,2*size,2*size);break}rad+=QUARTER_PI;case"rectRot":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+yOffset,y-xOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.lineTo(x-yOffset,y+xOffset),ctx.closePath();break;case"crossRot":rad+=QUARTER_PI;case"cross":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset);break;case"star":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset),rad+=QUARTER_PI,xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset),ctx.moveTo(x+yOffset,y-xOffset),ctx.lineTo(x-yOffset,y+xOffset);break;case"line":xOffset=Math.cos(rad)*radius,yOffset=Math.sin(rad)*radius,ctx.moveTo(x-xOffset,y-yOffset),ctx.lineTo(x+xOffset,y+yOffset);break;case"dash":ctx.moveTo(x,y),ctx.lineTo(x+Math.cos(rad)*radius,y+Math.sin(rad)*radius)}ctx.fill(),options.borderWidth>0&&ctx.stroke()}}function _isPointInArea(point,area,margin){return margin=margin||.5,!area||point&&point.x>area.left-margin&&point.x<area.right+margin&&point.y>area.top-margin&&point.y<area.bottom+margin}function clipArea(ctx,area){ctx.save(),ctx.beginPath(),ctx.rect(area.left,area.top,area.right-area.left,area.bottom-area.top),ctx.clip()}function unclipArea(ctx){ctx.restore()}function _steppedLineTo(ctx,previous,target,flip,mode){if(!previous)return ctx.lineTo(target.x,target.y);if("middle"===mode){var midpoint=(previous.x+target.x)/2;ctx.lineTo(midpoint,previous.y),ctx.lineTo(midpoint,target.y)}else"after"===mode!=!!flip?ctx.lineTo(previous.x,target.y):ctx.lineTo(target.x,previous.y);ctx.lineTo(target.x,target.y)}function _bezierCurveTo(ctx,previous,target,flip){if(!previous)return ctx.lineTo(target.x,target.y);ctx.bezierCurveTo(flip?previous.cp1x:previous.cp2x,flip?previous.cp1y:previous.cp2y,flip?target.cp2x:target.cp1x,flip?target.cp2y:target.cp1y,target.x,target.y)}function renderText(ctx,text,x,y,font){var i,line,opts=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},lines=isArray(text)?text:[text],stroke=opts.strokeWidth>0&&""!==opts.strokeColor;for(ctx.save(),ctx.font=font.string,setRenderOpts(ctx,opts),i=0;i<lines.length;++i)line=lines[i],stroke&&(opts.strokeColor&&(ctx.strokeStyle=opts.strokeColor),isNullOrUndef(opts.strokeWidth)||(ctx.lineWidth=opts.strokeWidth),ctx.strokeText(line,x,y,opts.maxWidth)),ctx.fillText(line,x,y,opts.maxWidth),decorateText(ctx,x,y,line,opts),y+=font.lineHeight;ctx.restore()}function setRenderOpts(ctx,opts){opts.translation&&ctx.translate(opts.translation[0],opts.translation[1]),isNullOrUndef(opts.rotation)||ctx.rotate(opts.rotation),opts.color&&(ctx.fillStyle=opts.color),opts.textAlign&&(ctx.textAlign=opts.textAlign),opts.textBaseline&&(ctx.textBaseline=opts.textBaseline)}function decorateText(ctx,x,y,line,opts){if(opts.strikethrough||opts.underline){var metrics=ctx.measureText(line),left=x-metrics.actualBoundingBoxLeft,right=x+metrics.actualBoundingBoxRight,top=y-metrics.actualBoundingBoxAscent,bottom=y+metrics.actualBoundingBoxDescent,yDecoration=opts.strikethrough?(top+bottom)/2:bottom;ctx.strokeStyle=ctx.fillStyle,ctx.beginPath(),ctx.lineWidth=opts.decorationWidth||2,ctx.moveTo(left,yDecoration),ctx.lineTo(right,yDecoration),ctx.stroke()}}function addRoundedRectPath(ctx,rect){var x=rect.x,y=rect.y,w=rect.w,h=rect.h,radius=rect.radius;ctx.arc(x+radius.topLeft,y+radius.topLeft,radius.topLeft,-HALF_PI,PI,!0),ctx.lineTo(x,y+h-radius.bottomLeft),ctx.arc(x+radius.bottomLeft,y+h-radius.bottomLeft,radius.bottomLeft,PI,HALF_PI,!0),ctx.lineTo(x+w-radius.bottomRight,y+h),ctx.arc(x+w-radius.bottomRight,y+h-radius.bottomRight,radius.bottomRight,HALF_PI,0,!0),ctx.lineTo(x+w,y+radius.topRight),ctx.arc(x+w-radius.topRight,y+radius.topRight,radius.topRight,0,-HALF_PI,!0),ctx.lineTo(x+radius.topLeft,y)}function _createResolver(scopes){var _cache,prefixes=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],rootScopes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:scopes,fallback=arguments.length>3?arguments[3]:void 0,getTarget=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return scopes[0]};defined(fallback)||(fallback=_resolve("_fallback",scopes));var cache=(_defineProperty(_cache={},Symbol.toStringTag,"Object"),_defineProperty(_cache,"_cacheable",!0),_defineProperty(_cache,"_scopes",scopes),_defineProperty(_cache,"_rootScopes",rootScopes),_defineProperty(_cache,"_fallback",fallback),_defineProperty(_cache,"_getTarget",getTarget),_defineProperty(_cache,"override",(function(scope){return _createResolver([scope].concat(_toConsumableArray(scopes)),prefixes,rootScopes,fallback)})),_cache);return new Proxy(cache,{deleteProperty:function(target,prop){return delete target[prop],delete target._keys,delete scopes[0][prop],!0},get:function(target,prop){return _cached(target,prop,(function(){return _resolveWithPrefixes(prop,prefixes,scopes,target)}))},getOwnPropertyDescriptor:function(target,prop){return Reflect.getOwnPropertyDescriptor(target._scopes[0],prop)},getPrototypeOf:function(){return Reflect.getPrototypeOf(scopes[0])},has:function(target,prop){return getKeysFromAllScopes(target).includes(prop)},ownKeys:function(target){return getKeysFromAllScopes(target)},set:function(target,prop,value){var storage=target._storage||(target._storage=getTarget());return target[prop]=storage[prop]=value,delete target._keys,!0}})}function _attachContext(proxy,context,subProxy,descriptorDefaults){var cache={_cacheable:!1,_proxy:proxy,_context:context,_subProxy:subProxy,_stack:new Set,_descriptors:_descriptors(proxy,descriptorDefaults),setContext:function(ctx){return _attachContext(proxy,ctx,subProxy,descriptorDefaults)},override:function(scope){return _attachContext(proxy.override(scope),context,subProxy,descriptorDefaults)}};return new Proxy(cache,{deleteProperty:function(target,prop){return delete target[prop],delete proxy[prop],!0},get:function(target,prop,receiver){return _cached(target,prop,(function(){return function(target,prop,receiver){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,descriptors=target._descriptors,value=_proxy[prop];return isFunction(value)&&descriptors.isScriptable(prop)&&(value=function(prop,value,target,receiver){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,_stack=target._stack;if(_stack.has(prop))throw new Error("Recursion detected: "+Array.from(_stack).join("->")+"->"+prop);return _stack.add(prop),value=value(_context,_subProxy||receiver),_stack.delete(prop),needsSubResolver(prop,value)&&(value=createSubResolver(_proxy._scopes,_proxy,prop,value)),value}(prop,value,target,receiver)),isArray(value)&&value.length&&(value=function(prop,value,target,isIndexable){var _proxy=target._proxy,_context=target._context,_subProxy=target._subProxy,descriptors=target._descriptors;if(defined(_context.index)&&isIndexable(prop))value=value[_context.index%value.length];else if(isObject(value[0])){var arr=value,scopes=_proxy._scopes.filter((function(s){return s!==arr}));value=[];var _step2,_iterator2=_createForOfIteratorHelper(arr);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var resolver=createSubResolver(scopes,_proxy,prop,_step2.value);value.push(_attachContext(resolver,_context,_subProxy&&_subProxy[prop],descriptors))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}return value}(prop,value,target,descriptors.isIndexable)),needsSubResolver(prop,value)&&(value=_attachContext(value,_context,_subProxy&&_subProxy[prop],descriptors)),value}(target,prop,receiver)}))},getOwnPropertyDescriptor:function(target,prop){return target._descriptors.allKeys?Reflect.has(proxy,prop)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(proxy,prop)},getPrototypeOf:function(){return Reflect.getPrototypeOf(proxy)},has:function(target,prop){return Reflect.has(proxy,prop)},ownKeys:function(){return Reflect.ownKeys(proxy)},set:function(target,prop,value){return proxy[prop]=value,delete target[prop],!0}})}function _descriptors(proxy){var defaults=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},_proxy$_scriptable=proxy._scriptable,_scriptable=void 0===_proxy$_scriptable?defaults.scriptable:_proxy$_scriptable,_proxy$_indexable=proxy._indexable,_indexable=void 0===_proxy$_indexable?defaults.indexable:_proxy$_indexable,_proxy$_allKeys=proxy._allKeys,_allKeys=void 0===_proxy$_allKeys?defaults.allKeys:_proxy$_allKeys;return{allKeys:_allKeys,scriptable:_scriptable,indexable:_indexable,isScriptable:isFunction(_scriptable)?_scriptable:function(){return _scriptable},isIndexable:isFunction(_indexable)?_indexable:function(){return _indexable}}}var readKey=function(prefix,name){return prefix?prefix+_capitalize(name):name},needsSubResolver=function(prop,value){return isObject(value)&&"adapters"!==prop&&(null===Object.getPrototypeOf(value)||value.constructor===Object)};function _cached(target,prop,resolve){if(Object.prototype.hasOwnProperty.call(target,prop))return target[prop];var value=resolve();return target[prop]=value,value}function resolveFallback(fallback,prop,value){return isFunction(fallback)?fallback(prop,value):fallback}var getScope=function(key,parent){return!0===key?parent:"string"==typeof key?resolveObjectKey(parent,key):void 0};function addScopes(set,parentScopes,key,parentFallback,value){var _step3,_iterator3=_createForOfIteratorHelper(parentScopes);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var parent=_step3.value,scope=getScope(key,parent);if(scope){set.add(scope);var fallback=resolveFallback(scope._fallback,key,value);if(defined(fallback)&&fallback!==key&&fallback!==parentFallback)return fallback}else if(!1===scope&&defined(parentFallback)&&key!==parentFallback)return null}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}return!1}function createSubResolver(parentScopes,resolver,prop,value){var rootScopes=resolver._rootScopes,fallback=resolveFallback(resolver._fallback,prop,value),allScopes=[].concat(_toConsumableArray(parentScopes),_toConsumableArray(rootScopes)),set=new Set;set.add(value);var key=addScopesFromKey(set,allScopes,prop,fallback||prop,value);return null!==key&&(!defined(fallback)||fallback===prop||null!==(key=addScopesFromKey(set,allScopes,fallback,key,value)))&&_createResolver(Array.from(set),[""],rootScopes,fallback,(function(){return function(resolver,prop,value){var parent=resolver._getTarget();prop in parent||(parent[prop]={});var target=parent[prop];return isArray(target)&&isObject(value)?value:target}(resolver,prop,value)}))}function addScopesFromKey(set,allScopes,key,fallback,item){for(;key;)key=addScopes(set,allScopes,key,fallback,item);return key}function _resolveWithPrefixes(prop,prefixes,scopes,proxy){var value,_step4,_iterator4=_createForOfIteratorHelper(prefixes);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var prefix=_step4.value;if(value=_resolve(readKey(prefix,prop),scopes),defined(value))return needsSubResolver(prop,value)?createSubResolver(scopes,proxy,prop,value):value}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}function _resolve(key,scopes){var _step5,_iterator5=_createForOfIteratorHelper(scopes);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var scope=_step5.value;if(scope){var value=scope[key];if(defined(value))return value}}}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}function getKeysFromAllScopes(target){var keys=target._keys;return keys||(keys=target._keys=function(scopes){var _step6,set=new Set,_iterator6=_createForOfIteratorHelper(scopes);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){var _step7,scope=_step6.value,_iterator7=_createForOfIteratorHelper(Object.keys(scope).filter((function(k){return!k.startsWith("_")})));try{for(_iterator7.s();!(_step7=_iterator7.n()).done;){var key=_step7.value;set.add(key)}}catch(err){_iterator7.e(err)}finally{_iterator7.f()}}}catch(err){_iterator6.e(err)}finally{_iterator6.f()}return Array.from(set)}(target._scopes)),keys}function _parseObjectDataRadialScale(meta,data,start,count){var i,ilen,index,item,iScale=meta.iScale,_this$_parsing$key=this._parsing.key,key=void 0===_this$_parsing$key?"r":_this$_parsing$key,parsed=new Array(count);for(i=0,ilen=count;i<ilen;++i)item=data[index=i+start],parsed[i]={r:iScale.parse(resolveObjectKey(item,key),index)};return parsed}var EPSILON=Number.EPSILON||1e-14,getPoint=function(points,i){return i<points.length&&!points[i].skip&&points[i]},getValueAxis=function(indexAxis){return"x"===indexAxis?"y":"x"};function splineCurve(firstPoint,middlePoint,afterPoint,t){var previous=firstPoint.skip?middlePoint:firstPoint,current=middlePoint,next=afterPoint.skip?middlePoint:afterPoint,d01=distanceBetweenPoints(current,previous),d12=distanceBetweenPoints(next,current),s01=d01/(d01+d12),s12=d12/(d01+d12),fa=t*(s01=isNaN(s01)?0:s01),fb=t*(s12=isNaN(s12)?0:s12);return{previous:{x:current.x-fa*(next.x-previous.x),y:current.y-fa*(next.y-previous.y)},next:{x:current.x+fb*(next.x-previous.x),y:current.y+fb*(next.y-previous.y)}}}function monotoneAdjust(points,deltaK,mK){for(var alphaK,betaK,tauK,squaredMagnitude,pointCurrent,pointsLen=points.length,pointAfter=getPoint(points,0),i=0;i<pointsLen-1;++i)pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),pointCurrent&&pointAfter&&(almostEquals(deltaK[i],0,EPSILON)?mK[i]=mK[i+1]=0:(alphaK=mK[i]/deltaK[i],betaK=mK[i+1]/deltaK[i],(squaredMagnitude=Math.pow(alphaK,2)+Math.pow(betaK,2))<=9||(tauK=3/Math.sqrt(squaredMagnitude),mK[i]=alphaK*tauK*deltaK[i],mK[i+1]=betaK*tauK*deltaK[i])))}function monotoneCompute(points,mK){for(var delta,pointBefore,pointCurrent,indexAxis=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",valueAxis=getValueAxis(indexAxis),pointsLen=points.length,pointAfter=getPoint(points,0),i=0;i<pointsLen;++i)if(pointBefore=pointCurrent,pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),pointCurrent){var iPixel=pointCurrent[indexAxis],vPixel=pointCurrent[valueAxis];pointBefore&&(delta=(iPixel-pointBefore[indexAxis])/3,pointCurrent["cp1".concat(indexAxis)]=iPixel-delta,pointCurrent["cp1".concat(valueAxis)]=vPixel-delta*mK[i]),pointAfter&&(delta=(pointAfter[indexAxis]-iPixel)/3,pointCurrent["cp2".concat(indexAxis)]=iPixel+delta,pointCurrent["cp2".concat(valueAxis)]=vPixel+delta*mK[i])}}function splineCurveMonotone(points){var i,pointBefore,pointCurrent,indexAxis=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",valueAxis=getValueAxis(indexAxis),pointsLen=points.length,deltaK=Array(pointsLen).fill(0),mK=Array(pointsLen),pointAfter=getPoint(points,0);for(i=0;i<pointsLen;++i)if(pointBefore=pointCurrent,pointCurrent=pointAfter,pointAfter=getPoint(points,i+1),pointCurrent){if(pointAfter){var slopeDelta=pointAfter[indexAxis]-pointCurrent[indexAxis];deltaK[i]=0!==slopeDelta?(pointAfter[valueAxis]-pointCurrent[valueAxis])/slopeDelta:0}mK[i]=pointBefore?pointAfter?sign(deltaK[i-1])!==sign(deltaK[i])?0:(deltaK[i-1]+deltaK[i])/2:deltaK[i-1]:deltaK[i]}monotoneAdjust(points,deltaK,mK),monotoneCompute(points,mK,indexAxis)}function capControlPoint(pt,min,max){return Math.max(Math.min(pt,max),min)}function _updateBezierControlPoints(points,options,area,loop,indexAxis){var i,ilen,point,controlPoints;if(options.spanGaps&&(points=points.filter((function(pt){return!pt.skip}))),"monotone"===options.cubicInterpolationMode)splineCurveMonotone(points,indexAxis);else{var prev=loop?points[points.length-1]:points[0];for(i=0,ilen=points.length;i<ilen;++i)controlPoints=splineCurve(prev,point=points[i],points[Math.min(i+1,ilen-(loop?0:1))%ilen],options.tension),point.cp1x=controlPoints.previous.x,point.cp1y=controlPoints.previous.y,point.cp2x=controlPoints.next.x,point.cp2y=controlPoints.next.y,prev=point}options.capBezierPoints&&function(points,area){var i,ilen,point,inArea,inAreaPrev,inAreaNext=_isPointInArea(points[0],area);for(i=0,ilen=points.length;i<ilen;++i)inAreaPrev=inArea,inArea=inAreaNext,inAreaNext=i<ilen-1&&_isPointInArea(points[i+1],area),inArea&&(point=points[i],inAreaPrev&&(point.cp1x=capControlPoint(point.cp1x,area.left,area.right),point.cp1y=capControlPoint(point.cp1y,area.top,area.bottom)),inAreaNext&&(point.cp2x=capControlPoint(point.cp2x,area.left,area.right),point.cp2y=capControlPoint(point.cp2y,area.top,area.bottom)))}(points,area)}var atEdge=function(t){return 0===t||1===t},elasticIn=function(t,s,p){return-Math.pow(2,10*(t-=1))*Math.sin((t-s)*TAU/p)},elasticOut=function(t,s,p){return Math.pow(2,-10*t)*Math.sin((t-s)*TAU/p)+1},effects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return(t-=1)*t*t+1},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-((t-=1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return(t-=1)*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return 1-Math.cos(t*HALF_PI)},easeOutSine:function(t){return Math.sin(t*HALF_PI)},easeInOutSine:function(t){return-.5*(Math.cos(PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return atEdge(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1)))},easeInCirc:function(t){return t>=1?t:-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-(t-=1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){return atEdge(t)?t:elasticIn(t,.075,.3)},easeOutElastic:function(t){return atEdge(t)?t:elasticOut(t,.075,.3)},easeInOutElastic:function(t){var s=.1125;return atEdge(t)?t:t<.5?.5*elasticIn(2*t,s,.45):.5+.5*elasticOut(2*t-1,s,.45)},easeInBack:function(t){var s=1.70158;return t*t*((s+1)*t-s)},easeOutBack:function(t){var s=1.70158;return(t-=1)*t*((s+1)*t+s)+1},easeInOutBack:function(t){var s=1.70158;return(t/=.5)<1?t*t*((1+(s*=1.525))*t-s)*.5:.5*((t-=2)*t*((1+(s*=1.525))*t+s)+2)},easeInBounce:function(t){return 1-effects.easeOutBounce(1-t)},easeOutBounce:function(t){var m=7.5625,d=2.75;return t<1/d?m*t*t:t<2/d?m*(t-=1.5/d)*t+.75:t<2.5/d?m*(t-=2.25/d)*t+.9375:m*(t-=2.625/d)*t+.984375},easeInOutBounce:function(t){return t<.5?.5*effects.easeInBounce(2*t):.5*effects.easeOutBounce(2*t-1)+.5}};function _pointInLine(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:p1.y+t*(p2.y-p1.y)}}function _steppedInterpolation(p1,p2,t,mode){return{x:p1.x+t*(p2.x-p1.x),y:"middle"===mode?t<.5?p1.y:p2.y:"after"===mode?t<1?p1.y:p2.y:t>0?p2.y:p1.y}}function _bezierInterpolation(p1,p2,t,mode){var cp1={x:p1.cp2x,y:p1.cp2y},cp2={x:p2.cp1x,y:p2.cp1y},a=_pointInLine(p1,cp1,t),b=_pointInLine(cp1,cp2,t),c=_pointInLine(cp2,p2,t),d=_pointInLine(a,b,t),e=_pointInLine(b,c,t);return _pointInLine(d,e,t)}var intlCache=new Map;function formatNumber(num,locale,options){return function(locale,options){options=options||{};var cacheKey=locale+JSON.stringify(options),formatter=intlCache.get(cacheKey);return formatter||(formatter=new Intl.NumberFormat(locale,options),intlCache.set(cacheKey,formatter)),formatter}(locale,options).format(num)}var LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(value,size){var matches=(""+value).match(LINE_HEIGHT);if(!matches||"normal"===matches[1])return 1.2*size;switch(value=+matches[2],matches[3]){case"px":return value;case"%":value/=100}return size*value}function _readValueToProps(value,props){var _step8,ret={},objProps=isObject(props),keys=objProps?Object.keys(props):props,read=isObject(value)?objProps?function(prop){return valueOrDefault(value[prop],value[props[prop]])}:function(prop){return value[prop]}:function(){return value},_iterator8=_createForOfIteratorHelper(keys);try{for(_iterator8.s();!(_step8=_iterator8.n()).done;){var prop=_step8.value;ret[prop]=+read(prop)||0}}catch(err){_iterator8.e(err)}finally{_iterator8.f()}return ret}function toTRBL(value){return _readValueToProps(value,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(value){return _readValueToProps(value,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(value){var obj=toTRBL(value);return obj.width=obj.left+obj.right,obj.height=obj.top+obj.bottom,obj}function toFont(options,fallback){options=options||{},fallback=fallback||defaults.font;var size=valueOrDefault(options.size,fallback.size);"string"==typeof size&&(size=parseInt(size,10));var style=valueOrDefault(options.style,fallback.style);style&&!(""+style).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+style+'"'),style="");var font={family:valueOrDefault(options.family,fallback.family),lineHeight:toLineHeight(valueOrDefault(options.lineHeight,fallback.lineHeight),size),size:size,style:style,weight:valueOrDefault(options.weight,fallback.weight),string:""};return font.string=toFontString(font),font}function resolve(inputs,context,index,info){var i,ilen,value,cacheable=!0;for(i=0,ilen=inputs.length;i<ilen;++i)if(void 0!==(value=inputs[i])&&(void 0!==context&&"function"==typeof value&&(value=value(context),cacheable=!1),void 0!==index&&isArray(value)&&(value=value[index%value.length],cacheable=!1),void 0!==value))return info&&!cacheable&&(info.cacheable=!1),value}function _addGrace(minmax,grace,beginAtZero){var min=minmax.min,max=minmax.max,change=toDimension(grace,(max-min)/2),keepZero=function(value,add){return beginAtZero&&0===value?0:value+add};return{min:keepZero(min,-Math.abs(change)),max:keepZero(max,change)}}function createContext(parentContext,context){return Object.assign(Object.create(parentContext),context)}function getRtlAdapter(rtl,rectX,width){return rtl?function(rectX,width){return{x:function(_x){return rectX+rectX+width-_x},setWidth:function(w){width=w},textAlign:function(align){return"center"===align?align:"right"===align?"left":"right"},xPlus:function(x,value){return x-value},leftForLtr:function(x,itemWidth){return x-itemWidth}}}(rectX,width):{x:function(_x2){return _x2},setWidth:function(w){},textAlign:function(align){return align},xPlus:function(x,value){return x+value},leftForLtr:function(x,_itemWidth){return x}}}function overrideTextDirection(ctx,direction){var style,original;"ltr"!==direction&&"rtl"!==direction||(original=[(style=ctx.canvas.style).getPropertyValue("direction"),style.getPropertyPriority("direction")],style.setProperty("direction",direction,"important"),ctx.prevTextDirection=original)}function restoreTextDirection(ctx,original){void 0!==original&&(delete ctx.prevTextDirection,ctx.canvas.style.setProperty("direction",original[0],original[1]))}function propertyFn(property){return"angle"===property?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:function(a,b){return a-b},normalize:function(x){return x}}}function normalizeSegment(_ref){var start=_ref.start,end=_ref.end,count=_ref.count;return{start:start%count,end:end%count,loop:_ref.loop&&(end-start+1)%count==0,style:_ref.style}}function _boundSegment(segment,points,bounds){if(!bounds)return[segment];for(var value,point,prevValue,property=bounds.property,startBound=bounds.start,endBound=bounds.end,count=points.length,_propertyFn2=propertyFn(property),compare=_propertyFn2.compare,between=_propertyFn2.between,normalize=_propertyFn2.normalize,_getSegment=function(segment,points,bounds){var i,ilen,property=bounds.property,startBound=bounds.start,endBound=bounds.end,_propertyFn=propertyFn(property),between=_propertyFn.between,normalize=_propertyFn.normalize,count=points.length,start=segment.start,end=segment.end,loop=segment.loop;if(loop){for(start+=count,end+=count,i=0,ilen=count;i<ilen&&between(normalize(points[start%count][property]),startBound,endBound);++i)start--,end--;start%=count,end%=count}return end<start&&(end+=count),{start:start,end:end,loop:loop,style:segment.style}}(segment,points,bounds),start=_getSegment.start,end=_getSegment.end,loop=_getSegment.loop,style=_getSegment.style,result=[],inside=!1,subStart=null,shouldStart=function(){return inside||between(startBound,prevValue,value)&&0!==compare(startBound,prevValue)},shouldStop=function(){return!inside||0===compare(endBound,value)||between(endBound,prevValue,value)},i=start,prev=start;i<=end;++i)(point=points[i%count]).skip||(value=normalize(point[property]))!==prevValue&&(inside=between(value,startBound,endBound),null===subStart&&shouldStart()&&(subStart=0===compare(value,startBound)?i:prev),null!==subStart&&shouldStop()&&(result.push(normalizeSegment({start:subStart,end:i,loop:loop,count:count,style:style})),subStart=null),prev=i,prevValue=value);return null!==subStart&&result.push(normalizeSegment({start:subStart,end:end,loop:loop,count:count,style:style})),result}function _boundSegments(line,bounds){for(var result=[],segments=line.segments,i=0;i<segments.length;i++){var sub=_boundSegment(segments[i],line.points,bounds);sub.length&&result.push.apply(result,_toConsumableArray(sub))}return result}function _computeSegments(line,segmentOptions){var points=line.points,spanGaps=line.options.spanGaps,count=points.length;if(!count)return[];var loop=!!line._loop,_findStartAndEnd=function(points,count,loop,spanGaps){var start=0,end=count-1;if(loop&&!spanGaps)for(;start<count&&!points[start].skip;)start++;for(;start<count&&points[start].skip;)start++;for(start%=count,loop&&(end+=start);end>start&&points[end%count].skip;)end--;return{start:start,end:end%=count}}(points,count,loop,spanGaps),start=_findStartAndEnd.start,end=_findStartAndEnd.end;return splitByStyles(line,!0===spanGaps?[{start:start,end:end,loop:loop}]:function(points,start,max,loop){var end,count=points.length,result=[],last=start,prev=points[start];for(end=start+1;end<=max;++end){var cur=points[end%count];cur.skip||cur.stop?prev.skip||(loop=!1,result.push({start:start%count,end:(end-1)%count,loop:loop}),start=last=cur.stop?end:null):(last=end,prev.skip&&(start=end)),prev=cur}return null!==last&&result.push({start:start%count,end:last%count,loop:loop}),result}(points,start,end<start?end+count:end,!!line._fullLoop&&0===start&&end===count-1),points,segmentOptions)}function splitByStyles(line,segments,points,segmentOptions){return segmentOptions&&segmentOptions.setContext&&points?function(line,segments,points,segmentOptions){var chartContext=line._chart.getContext(),baseStyle=readStyle(line.options),datasetIndex=line._datasetIndex,spanGaps=line.options.spanGaps,count=points.length,result=[],prevStyle=baseStyle,start=segments[0].start,i=start;function addStyle(s,e,l,st){var dir=spanGaps?-1:1;if(s!==e){for(s+=count;points[s%count].skip;)s-=dir;for(;points[e%count].skip;)e+=dir;s%count!=e%count&&(result.push({start:s%count,end:e%count,loop:l,style:st}),prevStyle=st,start=e%count)}}var _step9,_iterator9=_createForOfIteratorHelper(segments);try{for(_iterator9.s();!(_step9=_iterator9.n()).done;){var segment=_step9.value;start=spanGaps?start:segment.start;var prev=points[start%count],style=void 0;for(i=start+1;i<=segment.end;i++){var pt=points[i%count];styleChanged(style=readStyle(segmentOptions.setContext(createContext(chartContext,{type:"segment",p0:prev,p1:pt,p0DataIndex:(i-1)%count,p1DataIndex:i%count,datasetIndex:datasetIndex}))),prevStyle)&&addStyle(start,i-1,segment.loop,prevStyle),prev=pt,prevStyle=style}start<i-1&&addStyle(start,i-1,segment.loop,prevStyle)}}catch(err){_iterator9.e(err)}finally{_iterator9.f()}return result}(line,segments,points,segmentOptions):segments}function readStyle(options){return{backgroundColor:options.backgroundColor,borderCapStyle:options.borderCapStyle,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderJoinStyle:options.borderJoinStyle,borderWidth:options.borderWidth,borderColor:options.borderColor}}function styleChanged(style,prevStyle){return prevStyle&&JSON.stringify(style)!==JSON.stringify(prevStyle)}var helpers=Object.freeze({__proto__:null,easingEffects:effects,isPatternOrGradient:isPatternOrGradient,color:_color,getHoverColor:getHoverColor,noop:noop,uid:uid,isNullOrUndef:isNullOrUndef,isArray:isArray,isObject:isObject,isFinite:isNumberFinite,finiteOrDefault:finiteOrDefault,valueOrDefault:valueOrDefault,toPercentage:toPercentage,toDimension:toDimension,callback:callback,each:each,_elementsEqual:_elementsEqual,clone:clone,_merger:_merger,merge:merge,mergeIf:mergeIf,_mergerIf:_mergerIf,_deprecated:function(scope,value,previous,current){void 0!==value&&console.warn(scope+': "'+previous+'" is deprecated. Please use "'+current+'" instead')},resolveObjectKey:resolveObjectKey,_capitalize:_capitalize,defined:defined,isFunction:isFunction,setsEqual:setsEqual,_isClickEvent:_isClickEvent,toFontString:toFontString,_measureText:_measureText,_longestText:_longestText,_alignPixel:_alignPixel,clearCanvas:clearCanvas,drawPoint:drawPoint,_isPointInArea:_isPointInArea,clipArea:clipArea,unclipArea:unclipArea,_steppedLineTo:_steppedLineTo,_bezierCurveTo:_bezierCurveTo,renderText:renderText,addRoundedRectPath:addRoundedRectPath,_lookup:_lookup,_lookupByKey:_lookupByKey,_rlookupByKey:_rlookupByKey,_filterBetween:_filterBetween,listenArrayEvents:listenArrayEvents,unlistenArrayEvents:unlistenArrayEvents,_arrayUnique:_arrayUnique,_createResolver:_createResolver,_attachContext:_attachContext,_descriptors:_descriptors,_parseObjectDataRadialScale:_parseObjectDataRadialScale,splineCurve:splineCurve,splineCurveMonotone:splineCurveMonotone,_updateBezierControlPoints:_updateBezierControlPoints,_isDomSupported:_isDomSupported,_getParentNode:_getParentNode,getStyle:getStyle,getRelativePosition:getRelativePosition,getMaximumSize:_getMaximumSize,retinaScale:retinaScale,supportsEventListenerOptions:supportsEventListenerOptions,readUsedSize:readUsedSize,fontString:function(pixelSize,fontStyle,fontFamily){return fontStyle+" "+pixelSize+"px "+fontFamily},requestAnimFrame:requestAnimFrame,throttled:throttled,debounce:debounce,_toLeftRightCenter:_toLeftRightCenter,_alignStartEnd:_alignStartEnd,_textX:_textX,_pointInLine:_pointInLine,_steppedInterpolation:_steppedInterpolation,_bezierInterpolation:_bezierInterpolation,formatNumber:formatNumber,toLineHeight:toLineHeight,_readValueToProps:_readValueToProps,toTRBL:toTRBL,toTRBLCorners:toTRBLCorners,toPadding:toPadding,toFont:toFont,resolve:resolve,_addGrace:_addGrace,createContext:createContext,PI:PI,TAU:TAU,PITAU:PITAU,INFINITY:INFINITY,RAD_PER_DEG:RAD_PER_DEG,HALF_PI:HALF_PI,QUARTER_PI:QUARTER_PI,TWO_THIRDS_PI:TWO_THIRDS_PI,log10:log10,sign:sign,niceNum:niceNum,_factorize:_factorize,isNumber:isNumber,almostEquals:almostEquals,almostWhole:almostWhole,_setMinAndMaxByKey:_setMinAndMaxByKey,toRadians:toRadians,toDegrees:toDegrees,_decimalPlaces:_decimalPlaces,getAngleFromPoint:getAngleFromPoint,distanceBetweenPoints:distanceBetweenPoints,_angleDiff:_angleDiff,_normalizeAngle:_normalizeAngle,_angleBetween:_angleBetween,_limitValue:_limitValue,_int16Range:_int16Range,_isBetween:_isBetween,getRtlAdapter:getRtlAdapter,overrideTextDirection:overrideTextDirection,restoreTextDirection:restoreTextDirection,_boundSegment:_boundSegment,_boundSegments:_boundSegments,_computeSegments:_computeSegments});function binarySearch(metaset,axis,value,intersect){var controller=metaset.controller,data=metaset.data,_sorted=metaset._sorted,iScale=controller._cachedMeta.iScale;if(iScale&&axis===iScale.axis&&"r"!==axis&&_sorted&&data.length){var lookupMethod=iScale._reversePixels?_rlookupByKey:_lookupByKey;if(!intersect)return lookupMethod(data,axis,value);if(controller._sharedOptions){var el=data[0],range="function"==typeof el.getRange&&el.getRange(axis);if(range){var start=lookupMethod(data,axis,value-range),end=lookupMethod(data,axis,value+range);return{lo:start.lo,hi:end.hi}}}}return{lo:0,hi:data.length-1}}function evaluateInteractionItems(chart,axis,position,handler,intersect){for(var metasets=chart.getSortedVisibleDatasetMetas(),value=position[axis],i=0,ilen=metasets.length;i<ilen;++i)for(var _metasets$i=metasets[i],_index=_metasets$i.index,data=_metasets$i.data,_binarySearch=binarySearch(metasets[i],axis,value,intersect),lo=_binarySearch.lo,hi=_binarySearch.hi,j=lo;j<=hi;++j){var element=data[j];element.skip||handler(element,_index,j)}}function getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible){var items=[];return includeInvisible||chart.isPointInArea(position)?(evaluateInteractionItems(chart,axis,position,(function(element,datasetIndex,index){(includeInvisible||_isPointInArea(element,chart.chartArea,0))&&element.inRange(position.x,position.y,useFinalPosition)&&items.push({element:element,datasetIndex:datasetIndex,index:index})}),!0),items):items}function getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){var items=[],distanceMetric=function(axis){var useX=-1!==axis.indexOf("x"),useY=-1!==axis.indexOf("y");return function(pt1,pt2){var deltaX=useX?Math.abs(pt1.x-pt2.x):0,deltaY=useY?Math.abs(pt1.y-pt2.y):0;return Math.sqrt(Math.pow(deltaX,2)+Math.pow(deltaY,2))}}(axis),minDistance=Number.POSITIVE_INFINITY;return evaluateInteractionItems(chart,axis,position,(function(element,datasetIndex,index){var inRange=element.inRange(position.x,position.y,useFinalPosition);if(!intersect||inRange){var center=element.getCenterPoint(useFinalPosition);if(includeInvisible||chart.isPointInArea(center)||inRange){var distance=distanceMetric(position,center);distance<minDistance?(items=[{element:element,datasetIndex:datasetIndex,index:index}],minDistance=distance):distance===minDistance&&items.push({element:element,datasetIndex:datasetIndex,index:index})}}})),items}function getNearestItems(chart,position,axis,intersect,useFinalPosition,includeInvisible){return includeInvisible||chart.isPointInArea(position)?"r"!==axis||intersect?getNearestCartesianItems(chart,position,axis,intersect,useFinalPosition,includeInvisible):function(chart,position,axis,useFinalPosition){var items=[];return evaluateInteractionItems(chart,axis,position,(function(element,datasetIndex,index){var _element$getProps=element.getProps(["startAngle","endAngle"],useFinalPosition),startAngle=_element$getProps.startAngle,endAngle=_element$getProps.endAngle;_angleBetween(getAngleFromPoint(element,{x:position.x,y:position.y}).angle,startAngle,endAngle)&&items.push({element:element,datasetIndex:datasetIndex,index:index})})),items}(chart,position,axis,useFinalPosition):[]}function getAxisItems(chart,position,axis,intersect,useFinalPosition){var items=[],rangeMethod="x"===axis?"inXRange":"inYRange",intersectsItem=!1;return evaluateInteractionItems(chart,axis,position,(function(element,datasetIndex,index){element[rangeMethod](position[axis],useFinalPosition)&&(items.push({element:element,datasetIndex:datasetIndex,index:index}),intersectsItem=intersectsItem||element.inRange(position.x,position.y,useFinalPosition))})),intersect&&!intersectsItem?[]:items}var Interaction={evaluateInteractionItems:evaluateInteractionItems,modes:{index:function(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart),axis=options.axis||"x",includeInvisible=options.includeInvisible||!1,items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,!1,useFinalPosition,includeInvisible),elements=[];return items.length?(chart.getSortedVisibleDatasetMetas().forEach((function(meta){var index=items[0].index,element=meta.data[index];element&&!element.skip&&elements.push({element:element,datasetIndex:meta.index,index:index})})),elements):[]},dataset:function(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart),axis=options.axis||"xy",includeInvisible=options.includeInvisible||!1,items=options.intersect?getIntersectItems(chart,position,axis,useFinalPosition,includeInvisible):getNearestItems(chart,position,axis,!1,useFinalPosition,includeInvisible);if(items.length>0){var datasetIndex=items[0].datasetIndex,data=chart.getDatasetMeta(datasetIndex).data;items=[];for(var i=0;i<data.length;++i)items.push({element:data[i],datasetIndex:datasetIndex,index:i})}return items},point:function(chart,e,options,useFinalPosition){return getIntersectItems(chart,getRelativePosition(e,chart),options.axis||"xy",useFinalPosition,options.includeInvisible||!1)},nearest:function(chart,e,options,useFinalPosition){var position=getRelativePosition(e,chart),axis=options.axis||"xy",includeInvisible=options.includeInvisible||!1;return getNearestItems(chart,position,axis,options.intersect,useFinalPosition,includeInvisible)},x:function(chart,e,options,useFinalPosition){return getAxisItems(chart,getRelativePosition(e,chart),"x",options.intersect,useFinalPosition)},y:function(chart,e,options,useFinalPosition){return getAxisItems(chart,getRelativePosition(e,chart),"y",options.intersect,useFinalPosition)}}},STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(array,position){return array.filter((function(v){return v.pos===position}))}function filterDynamicPositionByAxis(array,axis){return array.filter((function(v){return-1===STATIC_POSITIONS.indexOf(v.pos)&&v.box.axis===axis}))}function sortByWeight(array,reverse){return array.sort((function(a,b){var v0=reverse?b:a,v1=reverse?a:b;return v0.weight===v1.weight?v0.index-v1.index:v0.weight-v1.weight}))}function setLayoutDims(layouts,params){var i,ilen,layout,stacks=function(layouts){var _step10,stacks={},_iterator10=_createForOfIteratorHelper(layouts);try{for(_iterator10.s();!(_step10=_iterator10.n()).done;){var wrap=_step10.value,stack=wrap.stack,pos=wrap.pos,stackWeight=wrap.stackWeight;if(stack&&STATIC_POSITIONS.includes(pos)){var _stack=stacks[stack]||(stacks[stack]={count:0,placed:0,weight:0,size:0});_stack.count++,_stack.weight+=stackWeight}}}catch(err){_iterator10.e(err)}finally{_iterator10.f()}return stacks}(layouts),vBoxMaxWidth=params.vBoxMaxWidth,hBoxMaxHeight=params.hBoxMaxHeight;for(i=0,ilen=layouts.length;i<ilen;++i){var fullSize=(layout=layouts[i]).box.fullSize,stack=stacks[layout.stack],factor=stack&&layout.stackWeight/stack.weight;layout.horizontal?(layout.width=factor?factor*vBoxMaxWidth:fullSize&&params.availableWidth,layout.height=hBoxMaxHeight):(layout.width=vBoxMaxWidth,layout.height=factor?factor*hBoxMaxHeight:fullSize&&params.availableHeight)}return stacks}function getCombinedMax(maxPadding,chartArea,a,b){return Math.max(maxPadding[a],chartArea[a])+Math.max(maxPadding[b],chartArea[b])}function updateMaxPadding(maxPadding,boxPadding){maxPadding.top=Math.max(maxPadding.top,boxPadding.top),maxPadding.left=Math.max(maxPadding.left,boxPadding.left),maxPadding.bottom=Math.max(maxPadding.bottom,boxPadding.bottom),maxPadding.right=Math.max(maxPadding.right,boxPadding.right)}function updateDims(chartArea,params,layout,stacks){var pos=layout.pos,box=layout.box,maxPadding=chartArea.maxPadding;if(!isObject(pos)){layout.size&&(chartArea[pos]-=layout.size);var stack=stacks[layout.stack]||{size:0,count:1};stack.size=Math.max(stack.size,layout.horizontal?box.height:box.width),layout.size=stack.size/stack.count,chartArea[pos]+=layout.size}box.getPadding&&updateMaxPadding(maxPadding,box.getPadding());var newWidth=Math.max(0,params.outerWidth-getCombinedMax(maxPadding,chartArea,"left","right")),newHeight=Math.max(0,params.outerHeight-getCombinedMax(maxPadding,chartArea,"top","bottom")),widthChanged=newWidth!==chartArea.w,heightChanged=newHeight!==chartArea.h;return chartArea.w=newWidth,chartArea.h=newHeight,layout.horizontal?{same:widthChanged,other:heightChanged}:{same:heightChanged,other:widthChanged}}function getMargins(horizontal,chartArea){var maxPadding=chartArea.maxPadding;function marginForPositions(positions){var margin={left:0,top:0,right:0,bottom:0};return positions.forEach((function(pos){margin[pos]=Math.max(chartArea[pos],maxPadding[pos])})),margin}return marginForPositions(horizontal?["left","right"]:["top","bottom"])}function fitBoxes(boxes,chartArea,params,stacks){var i,ilen,layout,box,refit,changed,refitBoxes=[];for(i=0,ilen=boxes.length,refit=0;i<ilen;++i){(box=(layout=boxes[i]).box).update(layout.width||chartArea.w,layout.height||chartArea.h,getMargins(layout.horizontal,chartArea));var _updateDims=updateDims(chartArea,params,layout,stacks),same=_updateDims.same,other=_updateDims.other;refit|=same&&refitBoxes.length,changed=changed||other,box.fullSize||refitBoxes.push(layout)}return refit&&fitBoxes(refitBoxes,chartArea,params,stacks)||changed}function setBoxDims(box,left,top,width,height){box.top=top,box.left=left,box.right=left+width,box.bottom=top+height,box.width=width,box.height=height}function placeBoxes(boxes,chartArea,params,stacks){var _step11,userPadding=params.padding,x=chartArea.x,y=chartArea.y,_iterator11=_createForOfIteratorHelper(boxes);try{for(_iterator11.s();!(_step11=_iterator11.n()).done;){var layout=_step11.value,box=layout.box,stack=stacks[layout.stack]||{count:1,placed:0,weight:1},weight=layout.stackWeight/stack.weight||1;if(layout.horizontal){var width=chartArea.w*weight,height=stack.size||box.height;defined(stack.start)&&(y=stack.start),box.fullSize?setBoxDims(box,userPadding.left,y,params.outerWidth-userPadding.right-userPadding.left,height):setBoxDims(box,chartArea.left+stack.placed,y,width,height),stack.start=y,stack.placed+=width,y=box.bottom}else{var _height=chartArea.h*weight,_width=stack.size||box.width;defined(stack.start)&&(x=stack.start),box.fullSize?setBoxDims(box,x,userPadding.top,_width,params.outerHeight-userPadding.bottom-userPadding.top):setBoxDims(box,x,chartArea.top+stack.placed,_width,_height),stack.start=x,stack.placed+=_height,x=box.right}}}catch(err){_iterator11.e(err)}finally{_iterator11.f()}chartArea.x=x,chartArea.y=y}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox:function(chart,item){chart.boxes||(chart.boxes=[]),item.fullSize=item.fullSize||!1,item.position=item.position||"top",item.weight=item.weight||0,item._layers=item._layers||function(){return[{z:0,draw:function(chartArea){item.draw(chartArea)}}]},chart.boxes.push(item)},removeBox:function(chart,layoutItem){var index=chart.boxes?chart.boxes.indexOf(layoutItem):-1;-1!==index&&chart.boxes.splice(index,1)},configure:function(chart,item,options){item.fullSize=options.fullSize,item.position=options.position,item.weight=options.weight},update:function(chart,width,height,minPadding){if(chart){var padding=toPadding(chart.options.layout.padding),availableWidth=Math.max(width-padding.width,0),availableHeight=Math.max(height-padding.height,0),boxes=function(boxes){var layoutBoxes=function(boxes){var i,ilen,box,pos,stack,stackWeight,layoutBoxes=[];for(i=0,ilen=(boxes||[]).length;i<ilen;++i){var _box=box=boxes[i];pos=_box.position;var _box$options=_box.options;stack=_box$options.stack;var _box$options$stackWei=_box$options.stackWeight;stackWeight=void 0===_box$options$stackWei?1:_box$options$stackWei,layoutBoxes.push({index:i,box:box,pos:pos,horizontal:box.isHorizontal(),weight:box.weight,stack:stack&&pos+stack,stackWeight:stackWeight})}return layoutBoxes}(boxes),fullSize=sortByWeight(layoutBoxes.filter((function(wrap){return wrap.box.fullSize})),!0),left=sortByWeight(filterByPosition(layoutBoxes,"left"),!0),right=sortByWeight(filterByPosition(layoutBoxes,"right")),top=sortByWeight(filterByPosition(layoutBoxes,"top"),!0),bottom=sortByWeight(filterByPosition(layoutBoxes,"bottom")),centerHorizontal=filterDynamicPositionByAxis(layoutBoxes,"x"),centerVertical=filterDynamicPositionByAxis(layoutBoxes,"y");return{fullSize:fullSize,leftAndTop:left.concat(top),rightAndBottom:right.concat(centerVertical).concat(bottom).concat(centerHorizontal),chartArea:filterByPosition(layoutBoxes,"chartArea"),vertical:left.concat(right).concat(centerVertical),horizontal:top.concat(bottom).concat(centerHorizontal)}}(chart.boxes),verticalBoxes=boxes.vertical,horizontalBoxes=boxes.horizontal;each(chart.boxes,(function(box){"function"==typeof box.beforeLayout&&box.beforeLayout()}));var visibleVerticalBoxCount=verticalBoxes.reduce((function(total,wrap){return wrap.box.options&&!1===wrap.box.options.display?total:total+1}),0)||1,params=Object.freeze({outerWidth:width,outerHeight:height,padding:padding,availableWidth:availableWidth,availableHeight:availableHeight,vBoxMaxWidth:availableWidth/2/visibleVerticalBoxCount,hBoxMaxHeight:availableHeight/2}),maxPadding=Object.assign({},padding);updateMaxPadding(maxPadding,toPadding(minPadding));var chartArea=Object.assign({maxPadding:maxPadding,w:availableWidth,h:availableHeight,x:padding.left,y:padding.top},padding),stacks=setLayoutDims(verticalBoxes.concat(horizontalBoxes),params);fitBoxes(boxes.fullSize,chartArea,params,stacks),fitBoxes(verticalBoxes,chartArea,params,stacks),fitBoxes(horizontalBoxes,chartArea,params,stacks)&&fitBoxes(verticalBoxes,chartArea,params,stacks),function(chartArea){var maxPadding=chartArea.maxPadding;function updatePos(pos){var change=Math.max(maxPadding[pos]-chartArea[pos],0);return chartArea[pos]+=change,change}chartArea.y+=updatePos("top"),chartArea.x+=updatePos("left"),updatePos("right"),updatePos("bottom")}(chartArea),placeBoxes(boxes.leftAndTop,chartArea,params,stacks),chartArea.x+=chartArea.w,chartArea.y+=chartArea.h,placeBoxes(boxes.rightAndBottom,chartArea,params,stacks),chart.chartArea={left:chartArea.left,top:chartArea.top,right:chartArea.left+chartArea.w,bottom:chartArea.top+chartArea.h,height:chartArea.h,width:chartArea.w},each(boxes.chartArea,(function(layout){var box=layout.box;Object.assign(box,chart.chartArea),box.update(chartArea.w,chartArea.h,{left:0,top:0,right:0,bottom:0})}))}}},BasePlatform=function(){function BasePlatform(){_classCallCheck(this,BasePlatform)}return _createClass(BasePlatform,[{key:"acquireContext",value:function(canvas,aspectRatio){}},{key:"releaseContext",value:function(context){return!1}},{key:"addEventListener",value:function(chart,type,listener){}},{key:"removeEventListener",value:function(chart,type,listener){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(element,width,height,aspectRatio){return width=Math.max(0,width||element.width),height=height||element.height,{width:width,height:Math.max(0,aspectRatio?Math.floor(width/aspectRatio):height)}}},{key:"isAttached",value:function(canvas){return!0}},{key:"updateConfig",value:function(config){}}]),BasePlatform}(),BasicPlatform=function(_BasePlatform){_inherits(BasicPlatform,_BasePlatform);var _super=_createSuper(BasicPlatform);function BasicPlatform(){return _classCallCheck(this,BasicPlatform),_super.apply(this,arguments)}return _createClass(BasicPlatform,[{key:"acquireContext",value:function(item){return item&&item.getContext&&item.getContext("2d")||null}},{key:"updateConfig",value:function(config){config.options.animation=!1}}]),BasicPlatform}(BasePlatform),EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=function(value){return null===value||""===value},eventListenerOptions=!!supportsEventListenerOptions&&{passive:!0};function removeListener(chart,type,listener){chart.canvas.removeEventListener(type,listener,eventListenerOptions)}function nodeListContains(nodeList,canvas){var _step12,_iterator12=_createForOfIteratorHelper(nodeList);try{for(_iterator12.s();!(_step12=_iterator12.n()).done;){var node=_step12.value;if(node===canvas||node.contains(canvas))return!0}}catch(err){_iterator12.e(err)}finally{_iterator12.f()}}function createAttachObserver(chart,type,listener){var canvas=chart.canvas,observer=new MutationObserver((function(entries){var _step13,trigger=!1,_iterator13=_createForOfIteratorHelper(entries);try{for(_iterator13.s();!(_step13=_iterator13.n()).done;){var entry=_step13.value;trigger=(trigger=trigger||nodeListContains(entry.addedNodes,canvas))&&!nodeListContains(entry.removedNodes,canvas)}}catch(err){_iterator13.e(err)}finally{_iterator13.f()}trigger&&listener()}));return observer.observe(document,{childList:!0,subtree:!0}),observer}function createDetachObserver(chart,type,listener){var canvas=chart.canvas,observer=new MutationObserver((function(entries){var _step14,trigger=!1,_iterator14=_createForOfIteratorHelper(entries);try{for(_iterator14.s();!(_step14=_iterator14.n()).done;){var entry=_step14.value;trigger=(trigger=trigger||nodeListContains(entry.removedNodes,canvas))&&!nodeListContains(entry.addedNodes,canvas)}}catch(err){_iterator14.e(err)}finally{_iterator14.f()}trigger&&listener()}));return observer.observe(document,{childList:!0,subtree:!0}),observer}var drpListeningCharts=new Map,oldDevicePixelRatio=0;function onWindowResize(){var dpr=window.devicePixelRatio;dpr!==oldDevicePixelRatio&&(oldDevicePixelRatio=dpr,drpListeningCharts.forEach((function(resize,chart){chart.currentDevicePixelRatio!==dpr&&resize()})))}function createResizeObserver(chart,type,listener){var canvas=chart.canvas,container=canvas&&_getParentNode(canvas);if(container){var resize=throttled((function(width,height){var w=container.clientWidth;listener(width,height),w<container.clientWidth&&listener()}),window),observer=new ResizeObserver((function(entries){var entry=entries[0],width=entry.contentRect.width,height=entry.contentRect.height;0===width&&0===height||resize(width,height)}));return observer.observe(container),function(chart,resize){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(chart,resize)}(chart,resize),observer}}function releaseObserver(chart,type,observer){observer&&observer.disconnect(),"resize"===type&&function(chart){drpListeningCharts.delete(chart),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}(chart)}function createProxyAndListen(chart,type,listener){var canvas=chart.canvas,proxy=throttled((function(event){null!==chart.ctx&&listener(function(event,chart){var type=EVENT_TYPES[event.type]||event.type,_getRelativePosition=getRelativePosition(event,chart),x=_getRelativePosition.x,y=_getRelativePosition.y;return{type:type,chart:chart,native:event,x:void 0!==x?x:null,y:void 0!==y?y:null}}(event,chart))}),chart,(function(args){var event=args[0];return[event,event.offsetX,event.offsetY]}));return function(node,type,listener){node.addEventListener(type,listener,eventListenerOptions)}(canvas,type,proxy),proxy}var DomPlatform=function(_BasePlatform2){_inherits(DomPlatform,_BasePlatform2);var _super2=_createSuper(DomPlatform);function DomPlatform(){return _classCallCheck(this,DomPlatform),_super2.apply(this,arguments)}return _createClass(DomPlatform,[{key:"acquireContext",value:function(canvas,aspectRatio){var context=canvas&&canvas.getContext&&canvas.getContext("2d");return context&&context.canvas===canvas?(function(canvas,aspectRatio){var style=canvas.style,renderHeight=canvas.getAttribute("height"),renderWidth=canvas.getAttribute("width");if(canvas.$chartjs={initial:{height:renderHeight,width:renderWidth,style:{display:style.display,height:style.height,width:style.width}}},style.display=style.display||"block",style.boxSizing=style.boxSizing||"border-box",isNullOrEmpty(renderWidth)){var displayWidth=readUsedSize(canvas,"width");void 0!==displayWidth&&(canvas.width=displayWidth)}if(isNullOrEmpty(renderHeight))if(""===canvas.style.height)canvas.height=canvas.width/(aspectRatio||2);else{var displayHeight=readUsedSize(canvas,"height");void 0!==displayHeight&&(canvas.height=displayHeight)}}(canvas,aspectRatio),context):null}},{key:"releaseContext",value:function(context){var canvas=context.canvas;if(!canvas.$chartjs)return!1;var initial=canvas.$chartjs.initial;["height","width"].forEach((function(prop){var value=initial[prop];isNullOrUndef(value)?canvas.removeAttribute(prop):canvas.setAttribute(prop,value)}));var style=initial.style||{};return Object.keys(style).forEach((function(key){canvas.style[key]=style[key]})),canvas.width=canvas.width,delete canvas.$chartjs,!0}},{key:"addEventListener",value:function(chart,type,listener){this.removeEventListener(chart,type);var proxies=chart.$proxies||(chart.$proxies={}),handler={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[type]||createProxyAndListen;proxies[type]=handler(chart,type,listener)}},{key:"removeEventListener",value:function(chart,type){var proxies=chart.$proxies||(chart.$proxies={}),proxy=proxies[type];proxy&&(({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[type]||removeListener)(chart,type,proxy),proxies[type]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(canvas,width,height,aspectRatio){return _getMaximumSize(canvas,width,height,aspectRatio)}},{key:"isAttached",value:function(canvas){var container=_getParentNode(canvas);return!(!container||!container.isConnected)}}]),DomPlatform}(BasePlatform);function _detectPlatform(canvas){return!_isDomSupported()||"undefined"!=typeof OffscreenCanvas&&canvas instanceof OffscreenCanvas?BasicPlatform:DomPlatform}var platforms=Object.freeze({__proto__:null,_detectPlatform:_detectPlatform,BasePlatform:BasePlatform,BasicPlatform:BasicPlatform,DomPlatform:DomPlatform}),interpolators={boolean:function(from,to,factor){return factor>.5?to:from},color:function(from,to,factor){var c0=_color(from||"transparent"),c1=c0.valid&&_color(to||"transparent");return c1&&c1.valid?c1.mix(c0,factor).hexString():to},number:function(from,to,factor){return from+(to-from)*factor}},Animation=function(){function Animation(cfg,target,prop,to){_classCallCheck(this,Animation);var currentValue=target[prop];to=resolve([cfg.to,to,currentValue,cfg.from]);var from=resolve([cfg.from,currentValue,to]);this._active=!0,this._fn=cfg.fn||interpolators[cfg.type||_typeof(from)],this._easing=effects[cfg.easing]||effects.linear,this._start=Math.floor(Date.now()+(cfg.delay||0)),this._duration=this._total=Math.floor(cfg.duration),this._loop=!!cfg.loop,this._target=target,this._prop=prop,this._from=from,this._to=to,this._promises=void 0}return _createClass(Animation,[{key:"active",value:function(){return this._active}},{key:"update",value:function(cfg,to,date){if(this._active){this._notify(!1);var currentValue=this._target[this._prop],elapsed=date-this._start,remain=this._duration-elapsed;this._start=date,this._duration=Math.floor(Math.max(remain,cfg.duration)),this._total+=elapsed,this._loop=!!cfg.loop,this._to=resolve([cfg.to,to,currentValue,cfg.from]),this._from=resolve([cfg.from,currentValue,to])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(date){var factor,elapsed=date-this._start,duration=this._duration,prop=this._prop,from=this._from,loop=this._loop,to=this._to;if(this._active=from!==to&&(loop||elapsed<duration),!this._active)return this._target[prop]=to,void this._notify(!0);elapsed<0?this._target[prop]=from:(factor=elapsed/duration%2,factor=loop&&factor>1?2-factor:factor,factor=this._easing(Math.min(1,Math.max(0,factor))),this._target[prop]=this._fn(from,to,factor))}},{key:"wait",value:function(){var promises=this._promises||(this._promises=[]);return new Promise((function(res,rej){promises.push({res:res,rej:rej})}))}},{key:"_notify",value:function(resolved){for(var method=resolved?"res":"rej",promises=this._promises||[],i=0;i<promises.length;i++)promises[i][method]()}}]),Animation}();defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});var animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(name){return"onProgress"!==name&&"onComplete"!==name&&"fn"!==name}}),defaults.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),defaults.describe("animations",{_fallback:"animation"}),defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(v){return 0|v}}}}});var Animations=function(){function Animations(chart,config){_classCallCheck(this,Animations),this._chart=chart,this._properties=new Map,this.configure(config)}return _createClass(Animations,[{key:"configure",value:function(config){if(isObject(config)){var animatedProps=this._properties;Object.getOwnPropertyNames(config).forEach((function(key){var cfg=config[key];if(isObject(cfg)){var _step15,resolved={},_iterator15=_createForOfIteratorHelper(animationOptions);try{for(_iterator15.s();!(_step15=_iterator15.n()).done;){var option=_step15.value;resolved[option]=cfg[option]}}catch(err){_iterator15.e(err)}finally{_iterator15.f()}(isArray(cfg.properties)&&cfg.properties||[key]).forEach((function(prop){prop!==key&&animatedProps.has(prop)||animatedProps.set(prop,resolved)}))}}))}}},{key:"_animateOptions",value:function(target,values){var newOptions=values.options,options=function(target,newOptions){if(newOptions){var options=target.options;if(options)return options.$shared&&(target.options=options=Object.assign({},options,{$shared:!1,$animations:{}})),options;target.options=newOptions}}(target,newOptions);if(!options)return[];var animations=this._createAnimations(options,newOptions);return newOptions.$shared&&function(animations,properties){for(var running=[],keys=Object.keys(properties),i=0;i<keys.length;i++){var anim=animations[keys[i]];anim&&anim.active()&&running.push(anim.wait())}return Promise.all(running)}(target.options.$animations,newOptions).then((function(){target.options=newOptions}),(function(){})),animations}},{key:"_createAnimations",value:function(target,values){var i,animatedProps=this._properties,animations=[],running=target.$animations||(target.$animations={}),props=Object.keys(values),date=Date.now();for(i=props.length-1;i>=0;--i){var prop=props[i];if("$"!==prop.charAt(0))if("options"!==prop){var value=values[prop],animation=running[prop],cfg=animatedProps.get(prop);if(animation){if(cfg&&animation.active()){animation.update(cfg,value,date);continue}animation.cancel()}cfg&&cfg.duration?(running[prop]=animation=new Animation(cfg,target,prop,value),animations.push(animation)):target[prop]=value}else animations.push.apply(animations,_toConsumableArray(this._animateOptions(target,values)))}return animations}},{key:"update",value:function(target,values){if(0!==this._properties.size){var animations=this._createAnimations(target,values);return animations.length?(animator.add(this._chart,animations),!0):void 0}Object.assign(target,values)}}]),Animations}();function scaleClip(scale,allowedOverflow){var opts=scale&&scale.options||{},reverse=opts.reverse,min=void 0===opts.min?allowedOverflow:0,max=void 0===opts.max?allowedOverflow:0;return{start:reverse?max:min,end:reverse?min:max}}function getSortedDatasetIndices(chart,filterVisible){var i,ilen,keys=[],metasets=chart._getSortedDatasetMetas(filterVisible);for(i=0,ilen=metasets.length;i<ilen;++i)keys.push(metasets[i].index);return keys}function _applyStack(stack,value,dsIndex){var i,ilen,datasetIndex,otherValue,options=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},keys=stack.keys,singleMode="single"===options.mode;if(null!==value){for(i=0,ilen=keys.length;i<ilen;++i){if((datasetIndex=+keys[i])===dsIndex){if(options.all)continue;break}otherValue=stack.values[datasetIndex],isNumberFinite(otherValue)&&(singleMode||0===value||sign(value)===sign(otherValue))&&(value+=otherValue)}return value}}function isStacked(scale,meta){var stacked=scale&&scale.options.stacked;return stacked||void 0===stacked&&void 0!==meta.stack}function getOrCreateStack(stacks,stackKey,indexValue){var subStack=stacks[stackKey]||(stacks[stackKey]={});return subStack[indexValue]||(subStack[indexValue]={})}function getLastIndexInStack(stack,vScale,positive,type){var _step16,_iterator16=_createForOfIteratorHelper(vScale.getMatchingVisibleMetas(type).reverse());try{for(_iterator16.s();!(_step16=_iterator16.n()).done;){var meta=_step16.value,value=stack[meta.index];if(positive&&value>0||!positive&&value<0)return meta.index}}catch(err){_iterator16.e(err)}finally{_iterator16.f()}return null}function updateStacks(controller,parsed){for(var stack,chart=controller.chart,meta=controller._cachedMeta,stacks=chart._stacks||(chart._stacks={}),iScale=meta.iScale,vScale=meta.vScale,datasetIndex=meta.index,iAxis=iScale.axis,vAxis=vScale.axis,key=function(indexScale,valueScale,meta){return"".concat(indexScale.id,".").concat(valueScale.id,".").concat(meta.stack||meta.type)}(iScale,vScale,meta),ilen=parsed.length,i=0;i<ilen;++i){var item=parsed[i],_index2=item[iAxis],value=item[vAxis];(stack=(item._stacks||(item._stacks={}))[vAxis]=getOrCreateStack(stacks,key,_index2))[datasetIndex]=value,stack._top=getLastIndexInStack(stack,vScale,!0,meta.type),stack._bottom=getLastIndexInStack(stack,vScale,!1,meta.type)}}function getFirstScaleId(chart,axis){var scales=chart.scales;return Object.keys(scales).filter((function(key){return scales[key].axis===axis})).shift()}function clearStacks(meta,items){var datasetIndex=meta.controller.index,axis=meta.vScale&&meta.vScale.axis;if(axis){var _step17,_iterator17=_createForOfIteratorHelper(items=items||meta._parsed);try{for(_iterator17.s();!(_step17=_iterator17.n()).done;){var stacks=_step17.value._stacks;if(!stacks||void 0===stacks[axis]||void 0===stacks[axis][datasetIndex])return;delete stacks[axis][datasetIndex]}}catch(err){_iterator17.e(err)}finally{_iterator17.f()}}}var isDirectUpdateMode=function(mode){return"reset"===mode||"none"===mode},cloneIfNotShared=function(cached,shared){return shared?cached:Object.assign({},cached)},DatasetController=function(){function DatasetController(chart,datasetIndex){_classCallCheck(this,DatasetController),this.chart=chart,this._ctx=chart.ctx,this.index=datasetIndex,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}return _createClass(DatasetController,[{key:"initialize",value:function(){var meta=this._cachedMeta;this.configure(),this.linkScales(),meta._stacked=isStacked(meta.vScale,meta),this.addElements()}},{key:"updateIndex",value:function(datasetIndex){this.index!==datasetIndex&&clearStacks(this._cachedMeta),this.index=datasetIndex}},{key:"linkScales",value:function(){var chart=this.chart,meta=this._cachedMeta,dataset=this.getDataset(),chooseId=function(axis,x,y,r){return"x"===axis?x:"r"===axis?r:y},xid=meta.xAxisID=valueOrDefault(dataset.xAxisID,getFirstScaleId(chart,"x")),yid=meta.yAxisID=valueOrDefault(dataset.yAxisID,getFirstScaleId(chart,"y")),rid=meta.rAxisID=valueOrDefault(dataset.rAxisID,getFirstScaleId(chart,"r")),indexAxis=meta.indexAxis,iid=meta.iAxisID=chooseId(indexAxis,xid,yid,rid),vid=meta.vAxisID=chooseId(indexAxis,yid,xid,rid);meta.xScale=this.getScaleForId(xid),meta.yScale=this.getScaleForId(yid),meta.rScale=this.getScaleForId(rid),meta.iScale=this.getScaleForId(iid),meta.vScale=this.getScaleForId(vid)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(scaleID){return this.chart.scales[scaleID]}},{key:"_getOtherScale",value:function(scale){var meta=this._cachedMeta;return scale===meta.iScale?meta.vScale:meta.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var meta=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),meta._stacked&&clearStacks(meta)}},{key:"_dataCheck",value:function(){var dataset=this.getDataset(),data=dataset.data||(dataset.data=[]),_data=this._data;if(isObject(data))this._data=function(data){var i,ilen,key,keys=Object.keys(data),adata=new Array(keys.length);for(i=0,ilen=keys.length;i<ilen;++i)key=keys[i],adata[i]={x:key,y:data[key]};return adata}(data);else if(_data!==data){if(_data){unlistenArrayEvents(_data,this);var meta=this._cachedMeta;clearStacks(meta),meta._parsed=[]}data&&Object.isExtensible(data)&&listenArrayEvents(data,this),this._syncList=[],this._data=data}}},{key:"addElements",value:function(){var meta=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(meta.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(resetNewElements){var meta=this._cachedMeta,dataset=this.getDataset(),stackChanged=!1;this._dataCheck();var oldStacked=meta._stacked;meta._stacked=isStacked(meta.vScale,meta),meta.stack!==dataset.stack&&(stackChanged=!0,clearStacks(meta),meta.stack=dataset.stack),this._resyncElements(resetNewElements),(stackChanged||oldStacked!==meta._stacked)&&updateStacks(this,meta._parsed)}},{key:"configure",value:function(){var config=this.chart.config,scopeKeys=config.datasetScopeKeys(this._type),scopes=config.getOptionScopes(this.getDataset(),scopeKeys,!0);this.options=config.createResolver(scopes,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(start,count){var i,cur,parsed,meta=this._cachedMeta,data=this._data,iScale=meta.iScale,_stacked=meta._stacked,iAxis=iScale.axis,sorted=0===start&&count===data.length||meta._sorted,prev=start>0&&meta._parsed[start-1];if(!1===this._parsing)meta._parsed=data,meta._sorted=!0,parsed=data;else{for(parsed=isArray(data[start])?this.parseArrayData(meta,data,start,count):isObject(data[start])?this.parseObjectData(meta,data,start,count):this.parsePrimitiveData(meta,data,start,count),i=0;i<count;++i)meta._parsed[i+start]=cur=parsed[i],sorted&&((null===cur[iAxis]||prev&&cur[iAxis]<prev[iAxis])&&(sorted=!1),prev=cur);meta._sorted=sorted}_stacked&&updateStacks(this,parsed)}},{key:"parsePrimitiveData",value:function(meta,data,start,count){var i,ilen,index,iScale=meta.iScale,vScale=meta.vScale,iAxis=iScale.axis,vAxis=vScale.axis,labels=iScale.getLabels(),singleScale=iScale===vScale,parsed=new Array(count);for(i=0,ilen=count;i<ilen;++i){var _parsed$i;index=i+start,parsed[i]=(_defineProperty(_parsed$i={},iAxis,singleScale||iScale.parse(labels[index],index)),_defineProperty(_parsed$i,vAxis,vScale.parse(data[index],index)),_parsed$i)}return parsed}},{key:"parseArrayData",value:function(meta,data,start,count){var i,ilen,index,item,xScale=meta.xScale,yScale=meta.yScale,parsed=new Array(count);for(i=0,ilen=count;i<ilen;++i)item=data[index=i+start],parsed[i]={x:xScale.parse(item[0],index),y:yScale.parse(item[1],index)};return parsed}},{key:"parseObjectData",value:function(meta,data,start,count){var i,ilen,index,item,xScale=meta.xScale,yScale=meta.yScale,_this$_parsing=this._parsing,_this$_parsing$xAxisK=_this$_parsing.xAxisKey,xAxisKey=void 0===_this$_parsing$xAxisK?"x":_this$_parsing$xAxisK,_this$_parsing$yAxisK=_this$_parsing.yAxisKey,yAxisKey=void 0===_this$_parsing$yAxisK?"y":_this$_parsing$yAxisK,parsed=new Array(count);for(i=0,ilen=count;i<ilen;++i)item=data[index=i+start],parsed[i]={x:xScale.parse(resolveObjectKey(item,xAxisKey),index),y:yScale.parse(resolveObjectKey(item,yAxisKey),index)};return parsed}},{key:"getParsed",value:function(index){return this._cachedMeta._parsed[index]}},{key:"getDataElement",value:function(index){return this._cachedMeta.data[index]}},{key:"applyStack",value:function(scale,parsed,mode){var chart=this.chart,meta=this._cachedMeta,value=parsed[scale.axis];return _applyStack({keys:getSortedDatasetIndices(chart,!0),values:parsed._stacks[scale.axis]},value,meta.index,{mode:mode})}},{key:"updateRangeFromParsed",value:function(range,scale,parsed,stack){var parsedValue=parsed[scale.axis],value=null===parsedValue?NaN:parsedValue,values=stack&&parsed._stacks[scale.axis];stack&&values&&(stack.values=values,value=_applyStack(stack,parsedValue,this._cachedMeta.index)),range.min=Math.min(range.min,value),range.max=Math.max(range.max,value)}},{key:"getMinMax",value:function(scale,canStack){var i,parsed,meta=this._cachedMeta,_parsed=meta._parsed,sorted=meta._sorted&&scale===meta.iScale,ilen=_parsed.length,otherScale=this._getOtherScale(scale),stack=function(canStack,meta,chart){return canStack&&!meta.hidden&&meta._stacked&&{keys:getSortedDatasetIndices(chart,!0),values:null}}(canStack,meta,this.chart),range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},_getUserBounds=function(scale){var _scale$getUserBounds=scale.getUserBounds(),min=_scale$getUserBounds.min,max=_scale$getUserBounds.max,minDefined=_scale$getUserBounds.minDefined,maxDefined=_scale$getUserBounds.maxDefined;return{min:minDefined?min:Number.NEGATIVE_INFINITY,max:maxDefined?max:Number.POSITIVE_INFINITY}}(otherScale),otherMin=_getUserBounds.min,otherMax=_getUserBounds.max;function _skip(){var otherValue=(parsed=_parsed[i])[otherScale.axis];return!isNumberFinite(parsed[scale.axis])||otherMin>otherValue||otherMax<otherValue}for(i=0;i<ilen&&(_skip()||(this.updateRangeFromParsed(range,scale,parsed,stack),!sorted));++i);if(sorted)for(i=ilen-1;i>=0;--i)if(!_skip()){this.updateRangeFromParsed(range,scale,parsed,stack);break}return range}},{key:"getAllParsedValues",value:function(scale){var i,ilen,value,parsed=this._cachedMeta._parsed,values=[];for(i=0,ilen=parsed.length;i<ilen;++i)value=parsed[i][scale.axis],isNumberFinite(value)&&values.push(value);return values}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(index){var meta=this._cachedMeta,iScale=meta.iScale,vScale=meta.vScale,parsed=this.getParsed(index);return{label:iScale?""+iScale.getLabelForValue(parsed[iScale.axis]):"",value:vScale?""+vScale.getLabelForValue(parsed[vScale.axis]):""}}},{key:"_update",value:function(mode){var value,t,r,b,l,meta=this._cachedMeta;this.update(mode||"default"),meta._clip=(isObject(value=valueOrDefault(this.options.clip,function(xScale,yScale,allowedOverflow){if(!1===allowedOverflow)return!1;var x=scaleClip(xScale,allowedOverflow),y=scaleClip(yScale,allowedOverflow);return{top:y.end,right:x.end,bottom:y.start,left:x.start}}(meta.xScale,meta.yScale,this.getMaxOverflow())))?(t=value.top,r=value.right,b=value.bottom,l=value.left):t=r=b=l=value,{top:t,right:r,bottom:b,left:l,disabled:!1===value})}},{key:"update",value:function(mode){}},{key:"draw",value:function(){var i,ctx=this._ctx,chart=this.chart,meta=this._cachedMeta,elements=meta.data||[],area=chart.chartArea,active=[],start=this._drawStart||0,count=this._drawCount||elements.length-start,drawActiveElementsOnTop=this.options.drawActiveElementsOnTop;for(meta.dataset&&meta.dataset.draw(ctx,area,start,count),i=start;i<start+count;++i){var element=elements[i];element.hidden||(element.active&&drawActiveElementsOnTop?active.push(element):element.draw(ctx,area))}for(i=0;i<active.length;++i)active[i].draw(ctx,area)}},{key:"getStyle",value:function(index,active){var mode=active?"active":"default";return void 0===index&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(mode):this.resolveDataElementOptions(index||0,mode)}},{key:"getContext",value:function(index,active,mode){var context,dataset=this.getDataset();if(index>=0&&index<this._cachedMeta.data.length){var element=this._cachedMeta.data[index];context=element.$context||(element.$context=function(parent,index,element){return createContext(parent,{active:!1,dataIndex:index,parsed:void 0,raw:void 0,element:element,index:index,mode:"default",type:"data"})}(this.getContext(),index,element)),context.parsed=this.getParsed(index),context.raw=dataset.data[index],context.index=context.dataIndex=index}else context=this.$context||(this.$context=function(parent,index){return createContext(parent,{active:!1,dataset:void 0,datasetIndex:index,index:index,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),context.dataset=dataset,context.index=context.datasetIndex=this.index;return context.active=!!active,context.mode=mode,context}},{key:"resolveDatasetElementOptions",value:function(mode){return this._resolveElementOptions(this.datasetElementType.id,mode)}},{key:"resolveDataElementOptions",value:function(index,mode){return this._resolveElementOptions(this.dataElementType.id,mode,index)}},{key:"_resolveElementOptions",value:function(elementType){var _this3=this,mode=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",index=arguments.length>2?arguments[2]:void 0,active="active"===mode,cache=this._cachedDataOpts,cacheKey=elementType+"-"+mode,cached=cache[cacheKey],sharing=this.enableOptionSharing&&defined(index);if(cached)return cloneIfNotShared(cached,sharing);var config=this.chart.config,scopeKeys=config.datasetElementScopeKeys(this._type,elementType),prefixes=active?["".concat(elementType,"Hover"),"hover",elementType,""]:[elementType,""],scopes=config.getOptionScopes(this.getDataset(),scopeKeys),names=Object.keys(defaults.elements[elementType]),context=function(){return _this3.getContext(index,active)},values=config.resolveNamedOptions(scopes,names,context,prefixes);return values.$shared&&(values.$shared=sharing,cache[cacheKey]=Object.freeze(cloneIfNotShared(values,sharing))),values}},{key:"_resolveAnimations",value:function(index,transition,active){var options,chart=this.chart,cache=this._cachedDataOpts,cacheKey="animation-".concat(transition),cached=cache[cacheKey];if(cached)return cached;if(!1!==chart.options.animation){var config=this.chart.config,scopeKeys=config.datasetAnimationScopeKeys(this._type,transition),scopes=config.getOptionScopes(this.getDataset(),scopeKeys);options=config.createResolver(scopes,this.getContext(index,active,transition))}var animations=new Animations(chart,options&&options.animations);return options&&options._cacheable&&(cache[cacheKey]=Object.freeze(animations)),animations}},{key:"getSharedOptions",value:function(options){if(options.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},options))}},{key:"includeOptions",value:function(mode,sharedOptions){return!sharedOptions||isDirectUpdateMode(mode)||this.chart._animationsDisabled}},{key:"updateElement",value:function(element,index,properties,mode){isDirectUpdateMode(mode)?Object.assign(element,properties):this._resolveAnimations(index,mode).update(element,properties)}},{key:"updateSharedOptions",value:function(sharedOptions,mode,newOptions){sharedOptions&&!isDirectUpdateMode(mode)&&this._resolveAnimations(void 0,mode).update(sharedOptions,newOptions)}},{key:"_setStyle",value:function(element,index,mode,active){element.active=active;var options=this.getStyle(index,active);this._resolveAnimations(index,mode,active).update(element,{options:!active&&this.getSharedOptions(options)||options})}},{key:"removeHoverStyle",value:function(element,datasetIndex,index){this._setStyle(element,index,"active",!1)}},{key:"setHoverStyle",value:function(element,datasetIndex,index){this._setStyle(element,index,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var element=this._cachedMeta.dataset;element&&this._setStyle(element,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var element=this._cachedMeta.dataset;element&&this._setStyle(element,void 0,"active",!0)}},{key:"_resyncElements",value:function(resetNewElements){var _step18,data=this._data,elements=this._cachedMeta.data,_iterator18=_createForOfIteratorHelper(this._syncList);try{for(_iterator18.s();!(_step18=_iterator18.n()).done;){var _step18$value=_slicedToArray(_step18.value,3),method=_step18$value[0],arg1=_step18$value[1],arg2=_step18$value[2];this[method](arg1,arg2)}}catch(err){_iterator18.e(err)}finally{_iterator18.f()}this._syncList=[];var numMeta=elements.length,numData=data.length,count=Math.min(numData,numMeta);count&&this.parse(0,count),numData>numMeta?this._insertElements(numMeta,numData-numMeta,resetNewElements):numData<numMeta&&this._removeElements(numData,numMeta-numData)}},{key:"_insertElements",value:function(start,count){var i,resetNewElements=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],meta=this._cachedMeta,data=meta.data,end=start+count,move=function(arr){for(arr.length+=count,i=arr.length-1;i>=end;i--)arr[i]=arr[i-count]};for(move(data),i=start;i<end;++i)data[i]=new this.dataElementType;this._parsing&&move(meta._parsed),this.parse(start,count),resetNewElements&&this.updateElements(data,start,count,"reset")}},{key:"updateElements",value:function(element,start,count,mode){}},{key:"_removeElements",value:function(start,count){var meta=this._cachedMeta;if(this._parsing){var removed=meta._parsed.splice(start,count);meta._stacked&&clearStacks(meta,removed)}meta.data.splice(start,count)}},{key:"_sync",value:function(args){if(this._parsing)this._syncList.push(args);else{var _args2=_slicedToArray(args,3),method=_args2[0],arg1=_args2[1],arg2=_args2[2];this[method](arg1,arg2)}this.chart._dataChanges.push([this.index].concat(_toConsumableArray(args)))}},{key:"_onDataPush",value:function(){var count=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-count,count])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(start,count){count&&this._sync(["_removeElements",start,count]);var newCount=arguments.length-2;newCount&&this._sync(["_insertElements",start,newCount])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),DatasetController}();DatasetController.defaults={},DatasetController.prototype.datasetElementType=null,DatasetController.prototype.dataElementType=null;var Element=function(){function Element(){_classCallCheck(this,Element),this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}return _createClass(Element,[{key:"tooltipPosition",value:function(useFinalPosition){var _this$getProps=this.getProps(["x","y"],useFinalPosition);return{x:_this$getProps.x,y:_this$getProps.y}}},{key:"hasValue",value:function(){return isNumber(this.x)&&isNumber(this.y)}},{key:"getProps",value:function(props,final){var _this4=this,anims=this.$animations;if(!final||!anims)return this;var ret={};return props.forEach((function(prop){ret[prop]=anims[prop]&&anims[prop].active()?anims[prop]._to:_this4[prop]})),ret}}]),Element}();Element.defaults={},Element.defaultRoutes=void 0;var formatters={values:function(value){return isArray(value)?value:""+value},numeric:function(tickValue,index,ticks){if(0===tickValue)return"0";var notation,locale=this.chart.options.locale,delta=tickValue;if(ticks.length>1){var maxTick=Math.max(Math.abs(ticks[0].value),Math.abs(ticks[ticks.length-1].value));(maxTick<1e-4||maxTick>1e15)&&(notation="scientific"),delta=function(tickValue,ticks){var delta=ticks.length>3?ticks[2].value-ticks[1].value:ticks[1].value-ticks[0].value;return Math.abs(delta)>=1&&tickValue!==Math.floor(tickValue)&&(delta=tickValue-Math.floor(tickValue)),delta}(tickValue,ticks)}var logDelta=log10(Math.abs(delta)),numDecimal=Math.max(Math.min(-1*Math.floor(logDelta),20),0),options={notation:notation,minimumFractionDigits:numDecimal,maximumFractionDigits:numDecimal};return Object.assign(options,this.options.ticks.format),formatNumber(tickValue,locale,options)},logarithmic:function(tickValue,index,ticks){if(0===tickValue)return"0";var remain=tickValue/Math.pow(10,Math.floor(log10(tickValue)));return 1===remain||2===remain||5===remain?formatters.numeric.call(this,tickValue,index,ticks):""}},Ticks={formatters:formatters};function autoSkip(scale,ticks){var tickOpts=scale.options.ticks,ticksLimit=tickOpts.maxTicksLimit||function(scale){var offset=scale.options.offset,tickLength=scale._tickSize(),maxScale=scale._length/tickLength+(offset?0:1),maxChart=scale._maxLength/tickLength;return Math.floor(Math.min(maxScale,maxChart))}(scale),majorIndices=tickOpts.major.enabled?function(ticks){var i,ilen,result=[];for(i=0,ilen=ticks.length;i<ilen;i++)ticks[i].major&&result.push(i);return result}(ticks):[],numMajorIndices=majorIndices.length,first=majorIndices[0],last=majorIndices[numMajorIndices-1],newTicks=[];if(numMajorIndices>ticksLimit)return function(ticks,newTicks,majorIndices,spacing){var i,count=0,next=majorIndices[0];for(spacing=Math.ceil(spacing),i=0;i<ticks.length;i++)i===next&&(newTicks.push(ticks[i]),next=majorIndices[++count*spacing])}(ticks,newTicks,majorIndices,numMajorIndices/ticksLimit),newTicks;var spacing=function(majorIndices,ticks,ticksLimit){var evenMajorSpacing=function(arr){var i,diff,len=arr.length;if(len<2)return!1;for(diff=arr[0],i=1;i<len;++i)if(arr[i]-arr[i-1]!==diff)return!1;return diff}(majorIndices),spacing=ticks.length/ticksLimit;if(!evenMajorSpacing)return Math.max(spacing,1);for(var factors=_factorize(evenMajorSpacing),i=0,ilen=factors.length-1;i<ilen;i++){var factor=factors[i];if(factor>spacing)return factor}return Math.max(spacing,1)}(majorIndices,ticks,ticksLimit);if(numMajorIndices>0){var i,ilen,avgMajorSpacing=numMajorIndices>1?Math.round((last-first)/(numMajorIndices-1)):null;for(skip(ticks,newTicks,spacing,isNullOrUndef(avgMajorSpacing)?0:first-avgMajorSpacing,first),i=0,ilen=numMajorIndices-1;i<ilen;i++)skip(ticks,newTicks,spacing,majorIndices[i],majorIndices[i+1]);return skip(ticks,newTicks,spacing,last,isNullOrUndef(avgMajorSpacing)?ticks.length:last+avgMajorSpacing),newTicks}return skip(ticks,newTicks,spacing),newTicks}function skip(ticks,newTicks,spacing,majorStart,majorEnd){var length,i,next,start=valueOrDefault(majorStart,0),end=Math.min(valueOrDefault(majorEnd,ticks.length),ticks.length),count=0;for(spacing=Math.ceil(spacing),majorEnd&&(spacing=(length=majorEnd-majorStart)/Math.floor(length/spacing)),next=start;next<0;)count++,next=Math.round(start+count*spacing);for(i=Math.max(start,0);i<end;i++)i===next&&(newTicks.push(ticks[i]),count++,next=Math.round(start+count*spacing))}defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(_ctx,options){return options.lineWidth},tickColor:function(_ctx,options){return options.color},offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),defaults.route("scale.ticks","color","","color"),defaults.route("scale.grid","color","","borderColor"),defaults.route("scale.grid","borderColor","","borderColor"),defaults.route("scale.title","color","","color"),defaults.describe("scale",{_fallback:!1,_scriptable:function(name){return!name.startsWith("before")&&!name.startsWith("after")&&"callback"!==name&&"parser"!==name},_indexable:function(name){return"borderDash"!==name&&"tickBorderDash"!==name}}),defaults.describe("scales",{_fallback:"scale"}),defaults.describe("scale.ticks",{_scriptable:function(name){return"backdropPadding"!==name&&"callback"!==name},_indexable:function(name){return"backdropPadding"!==name}});var offsetFromEdge=function(scale,edge,offset){return"top"===edge||"left"===edge?scale[edge]+offset:scale[edge]-offset};function sample(arr,numItems){for(var result=[],increment=arr.length/numItems,len=arr.length,i=0;i<len;i+=increment)result.push(arr[Math.floor(i)]);return result}function getPixelForGridLine(scale,index,offsetGridLines){var offset,length=scale.ticks.length,validIndex=Math.min(index,length-1),start=scale._startPixel,end=scale._endPixel,lineValue=scale.getPixelForTick(validIndex);if(!(offsetGridLines&&(offset=1===length?Math.max(lineValue-start,end-lineValue):0===index?(scale.getPixelForTick(1)-lineValue)/2:(lineValue-scale.getPixelForTick(validIndex-1))/2,(lineValue+=validIndex<index?offset:-offset)<start-1e-6||lineValue>end+1e-6)))return lineValue}function getTickMarkLength(options){return options.drawTicks?options.tickLength:0}function getTitleHeight(options,fallback){if(!options.display)return 0;var font=toFont(options.font,fallback),padding=toPadding(options.padding);return(isArray(options.text)?options.text.length:1)*font.lineHeight+padding.height}function titleAlign(align,position,reverse){var ret=_toLeftRightCenter(align);return(reverse&&"right"!==position||!reverse&&"right"===position)&&(ret=function(align){return"left"===align?"right":"right"===align?"left":align}(ret)),ret}var Scale=function(_Element){_inherits(Scale,_Element);var _super3=_createSuper(Scale);function Scale(cfg){var _this5;return _classCallCheck(this,Scale),(_this5=_super3.call(this)).id=cfg.id,_this5.type=cfg.type,_this5.options=void 0,_this5.ctx=cfg.ctx,_this5.chart=cfg.chart,_this5.top=void 0,_this5.bottom=void 0,_this5.left=void 0,_this5.right=void 0,_this5.width=void 0,_this5.height=void 0,_this5._margins={left:0,right:0,top:0,bottom:0},_this5.maxWidth=void 0,_this5.maxHeight=void 0,_this5.paddingTop=void 0,_this5.paddingBottom=void 0,_this5.paddingLeft=void 0,_this5.paddingRight=void 0,_this5.axis=void 0,_this5.labelRotation=void 0,_this5.min=void 0,_this5.max=void 0,_this5._range=void 0,_this5.ticks=[],_this5._gridLineItems=null,_this5._labelItems=null,_this5._labelSizes=null,_this5._length=0,_this5._maxLength=0,_this5._longestTextCache={},_this5._startPixel=void 0,_this5._endPixel=void 0,_this5._reversePixels=!1,_this5._userMax=void 0,_this5._userMin=void 0,_this5._suggestedMax=void 0,_this5._suggestedMin=void 0,_this5._ticksLength=0,_this5._borderValue=0,_this5._cache={},_this5._dataLimitsCached=!1,_this5.$context=void 0,_this5}return _createClass(Scale,[{key:"init",value:function(options){this.options=options.setContext(this.getContext()),this.axis=options.axis,this._userMin=this.parse(options.min),this._userMax=this.parse(options.max),this._suggestedMin=this.parse(options.suggestedMin),this._suggestedMax=this.parse(options.suggestedMax)}},{key:"parse",value:function(raw,index){return raw}},{key:"getUserBounds",value:function(){var _userMin=this._userMin,_userMax=this._userMax,_suggestedMin=this._suggestedMin,_suggestedMax=this._suggestedMax;return _userMin=finiteOrDefault(_userMin,Number.POSITIVE_INFINITY),_userMax=finiteOrDefault(_userMax,Number.NEGATIVE_INFINITY),_suggestedMin=finiteOrDefault(_suggestedMin,Number.POSITIVE_INFINITY),_suggestedMax=finiteOrDefault(_suggestedMax,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(_userMin,_suggestedMin),max:finiteOrDefault(_userMax,_suggestedMax),minDefined:isNumberFinite(_userMin),maxDefined:isNumberFinite(_userMax)}}},{key:"getMinMax",value:function(canStack){var range,_this$getUserBounds=this.getUserBounds(),min=_this$getUserBounds.min,max=_this$getUserBounds.max,minDefined=_this$getUserBounds.minDefined,maxDefined=_this$getUserBounds.maxDefined;if(minDefined&&maxDefined)return{min:min,max:max};for(var metas=this.getMatchingVisibleMetas(),i=0,ilen=metas.length;i<ilen;++i)range=metas[i].controller.getMinMax(this,canStack),minDefined||(min=Math.min(min,range.min)),maxDefined||(max=Math.max(max,range.max));return{min:finiteOrDefault(min=maxDefined&&min>max?max:min,finiteOrDefault(max=minDefined&&min>max?min:max,min)),max:finiteOrDefault(max,finiteOrDefault(min,max))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var data=this.chart.data;return this.options.labels||(this.isHorizontal()?data.xLabels:data.yLabels)||data.labels||[]}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){callback(this.options.beforeUpdate,[this])}},{key:"update",value:function(maxWidth,maxHeight,margins){var _this$options=this.options,beginAtZero=_this$options.beginAtZero,grace=_this$options.grace,tickOpts=_this$options.ticks,sampleSize=tickOpts.sampleSize;this.beforeUpdate(),this.maxWidth=maxWidth,this.maxHeight=maxHeight,this._margins=margins=Object.assign({left:0,right:0,top:0,bottom:0},margins),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+margins.left+margins.right:this.height+margins.top+margins.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,grace,beginAtZero),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var samplingEnabled=sampleSize<this.ticks.length;this._convertTicksToLabels(samplingEnabled?sample(this.ticks,sampleSize):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),tickOpts.display&&(tickOpts.autoSkip||"auto"===tickOpts.source)&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),samplingEnabled&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var startPixel,endPixel,reversePixels=this.options.reverse;this.isHorizontal()?(startPixel=this.left,endPixel=this.right):(startPixel=this.top,endPixel=this.bottom,reversePixels=!reversePixels),this._startPixel=startPixel,this._endPixel=endPixel,this._reversePixels=reversePixels,this._length=endPixel-startPixel,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){callback(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){callback(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){callback(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(name){this.chart.notifyPlugins(name,this.getContext()),callback(this.options[name],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){callback(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(ticks){var i,ilen,tick,tickOpts=this.options.ticks;for(i=0,ilen=ticks.length;i<ilen;i++)(tick=ticks[i]).label=callback(tickOpts.callback,[tick.value,i,ticks],this)}},{key:"afterTickToLabelConversion",value:function(){callback(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){callback(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var tickWidth,maxHeight,maxLabelDiagonal,options=this.options,tickOpts=options.ticks,numTicks=this.ticks.length,minRotation=tickOpts.minRotation||0,maxRotation=tickOpts.maxRotation,labelRotation=minRotation;if(!this._isVisible()||!tickOpts.display||minRotation>=maxRotation||numTicks<=1||!this.isHorizontal())this.labelRotation=minRotation;else{var labelSizes=this._getLabelSizes(),maxLabelWidth=labelSizes.widest.width,maxLabelHeight=labelSizes.highest.height,maxWidth=_limitValue(this.chart.width-maxLabelWidth,0,this.maxWidth);maxLabelWidth+6>(tickWidth=options.offset?this.maxWidth/numTicks:maxWidth/(numTicks-1))&&(tickWidth=maxWidth/(numTicks-(options.offset?.5:1)),maxHeight=this.maxHeight-getTickMarkLength(options.grid)-tickOpts.padding-getTitleHeight(options.title,this.chart.options.font),maxLabelDiagonal=Math.sqrt(maxLabelWidth*maxLabelWidth+maxLabelHeight*maxLabelHeight),labelRotation=toDegrees(Math.min(Math.asin(_limitValue((labelSizes.highest.height+6)/tickWidth,-1,1)),Math.asin(_limitValue(maxHeight/maxLabelDiagonal,-1,1))-Math.asin(_limitValue(maxLabelHeight/maxLabelDiagonal,-1,1)))),labelRotation=Math.max(minRotation,Math.min(maxRotation,labelRotation))),this.labelRotation=labelRotation}}},{key:"afterCalculateLabelRotation",value:function(){callback(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){callback(this.options.beforeFit,[this])}},{key:"fit",value:function(){var minSize={width:0,height:0},chart=this.chart,_this$options2=this.options,tickOpts=_this$options2.ticks,titleOpts=_this$options2.title,gridOpts=_this$options2.grid,display=this._isVisible(),isHorizontal=this.isHorizontal();if(display){var titleHeight=getTitleHeight(titleOpts,chart.options.font);if(isHorizontal?(minSize.width=this.maxWidth,minSize.height=getTickMarkLength(gridOpts)+titleHeight):(minSize.height=this.maxHeight,minSize.width=getTickMarkLength(gridOpts)+titleHeight),tickOpts.display&&this.ticks.length){var _this$_getLabelSizes=this._getLabelSizes(),first=_this$_getLabelSizes.first,last=_this$_getLabelSizes.last,widest=_this$_getLabelSizes.widest,highest=_this$_getLabelSizes.highest,tickPadding=2*tickOpts.padding,angleRadians=toRadians(this.labelRotation),cos=Math.cos(angleRadians),sin=Math.sin(angleRadians);if(isHorizontal){var labelHeight=tickOpts.mirror?0:sin*widest.width+cos*highest.height;minSize.height=Math.min(this.maxHeight,minSize.height+labelHeight+tickPadding)}else{var labelWidth=tickOpts.mirror?0:cos*widest.width+sin*highest.height;minSize.width=Math.min(this.maxWidth,minSize.width+labelWidth+tickPadding)}this._calculatePadding(first,last,sin,cos)}}this._handleMargins(),isHorizontal?(this.width=this._length=chart.width-this._margins.left-this._margins.right,this.height=minSize.height):(this.width=minSize.width,this.height=this._length=chart.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(first,last,sin,cos){var _this$options3=this.options,_this$options3$ticks=_this$options3.ticks,align=_this$options3$ticks.align,padding=_this$options3$ticks.padding,position=_this$options3.position,isRotated=0!==this.labelRotation,labelsBelowTicks="top"!==position&&"x"===this.axis;if(this.isHorizontal()){var offsetLeft=this.getPixelForTick(0)-this.left,offsetRight=this.right-this.getPixelForTick(this.ticks.length-1),paddingLeft=0,paddingRight=0;isRotated?labelsBelowTicks?(paddingLeft=cos*first.width,paddingRight=sin*last.height):(paddingLeft=sin*first.height,paddingRight=cos*last.width):"start"===align?paddingRight=last.width:"end"===align?paddingLeft=first.width:"inner"!==align&&(paddingLeft=first.width/2,paddingRight=last.width/2),this.paddingLeft=Math.max((paddingLeft-offsetLeft+padding)*this.width/(this.width-offsetLeft),0),this.paddingRight=Math.max((paddingRight-offsetRight+padding)*this.width/(this.width-offsetRight),0)}else{var paddingTop=last.height/2,paddingBottom=first.height/2;"start"===align?(paddingTop=0,paddingBottom=first.height):"end"===align&&(paddingTop=last.height,paddingBottom=0),this.paddingTop=paddingTop+padding,this.paddingBottom=paddingBottom+padding}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){callback(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var _this$options4=this.options,axis=_this$options4.axis,position=_this$options4.position;return"top"===position||"bottom"===position||"x"===axis}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(ticks){var i,ilen;for(this.beforeTickToLabelConversion(),this.generateTickLabels(ticks),i=0,ilen=ticks.length;i<ilen;i++)isNullOrUndef(ticks[i].label)&&(ticks.splice(i,1),ilen--,i--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var labelSizes=this._labelSizes;if(!labelSizes){var sampleSize=this.options.ticks.sampleSize,ticks=this.ticks;sampleSize<ticks.length&&(ticks=sample(ticks,sampleSize)),this._labelSizes=labelSizes=this._computeLabelSizes(ticks,ticks.length)}return labelSizes}},{key:"_computeLabelSizes",value:function(ticks,length){var i,j,jlen,label,tickFont,fontString,cache,lineHeight,width,height,nestedLabel,ctx=this.ctx,caches=this._longestTextCache,widths=[],heights=[],widestLabelSize=0,highestLabelSize=0;for(i=0;i<length;++i){if(label=ticks[i].label,tickFont=this._resolveTickFontOptions(i),ctx.font=fontString=tickFont.string,cache=caches[fontString]=caches[fontString]||{data:{},gc:[]},lineHeight=tickFont.lineHeight,width=height=0,isNullOrUndef(label)||isArray(label)){if(isArray(label))for(j=0,jlen=label.length;j<jlen;++j)isNullOrUndef(nestedLabel=label[j])||isArray(nestedLabel)||(width=_measureText(ctx,cache.data,cache.gc,width,nestedLabel),height+=lineHeight)}else width=_measureText(ctx,cache.data,cache.gc,width,label),height=lineHeight;widths.push(width),heights.push(height),widestLabelSize=Math.max(width,widestLabelSize),highestLabelSize=Math.max(height,highestLabelSize)}!function(caches,length){each(caches,(function(cache){var i,gc=cache.gc,gcLen=gc.length/2;if(gcLen>length){for(i=0;i<gcLen;++i)delete cache.data[gc[i]];gc.splice(0,gcLen)}}))}(caches,length);var widest=widths.indexOf(widestLabelSize),highest=heights.indexOf(highestLabelSize),valueAt=function(idx){return{width:widths[idx]||0,height:heights[idx]||0}};return{first:valueAt(0),last:valueAt(length-1),widest:valueAt(widest),highest:valueAt(highest),widths:widths,heights:heights}}},{key:"getLabelForValue",value:function(value){return value}},{key:"getPixelForValue",value:function(value,index){return NaN}},{key:"getValueForPixel",value:function(pixel){}},{key:"getPixelForTick",value:function(index){var ticks=this.ticks;return index<0||index>ticks.length-1?null:this.getPixelForValue(ticks[index].value)}},{key:"getPixelForDecimal",value:function(decimal){this._reversePixels&&(decimal=1-decimal);var pixel=this._startPixel+decimal*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,pixel,0):pixel)}},{key:"getDecimalForPixel",value:function(pixel){var decimal=(pixel-this._startPixel)/this._length;return this._reversePixels?1-decimal:decimal}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var min=this.min,max=this.max;return min<0&&max<0?max:min>0&&max>0?min:0}},{key:"getContext",value:function(index){var ticks=this.ticks||[];if(index>=0&&index<ticks.length){var tick=ticks[index];return tick.$context||(tick.$context=function(parent,index,tick){return createContext(parent,{tick:tick,index:index,type:"tick"})}(this.getContext(),index,tick))}return this.$context||(this.$context=createContext(this.chart.getContext(),{scale:this,type:"scale"}))}},{key:"_tickSize",value:function(){var optionTicks=this.options.ticks,rot=toRadians(this.labelRotation),cos=Math.abs(Math.cos(rot)),sin=Math.abs(Math.sin(rot)),labelSizes=this._getLabelSizes(),padding=optionTicks.autoSkipPadding||0,w=labelSizes?labelSizes.widest.width+padding:0,h=labelSizes?labelSizes.highest.height+padding:0;return this.isHorizontal()?h*cos>w*sin?w/cos:h/sin:h*sin<w*cos?h/cos:w/sin}},{key:"_isVisible",value:function(){var display=this.options.display;return"auto"!==display?!!display:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(chartArea){var borderValue,i,lineValue,alignedLineValue,tx1,ty1,tx2,ty2,x1,y1,x2,y2,axis=this.axis,chart=this.chart,options=this.options,grid=options.grid,position=options.position,offset=grid.offset,isHorizontal=this.isHorizontal(),ticksLength=this.ticks.length+(offset?1:0),tl=getTickMarkLength(grid),items=[],borderOpts=grid.setContext(this.getContext()),axisWidth=borderOpts.drawBorder?borderOpts.borderWidth:0,axisHalfWidth=axisWidth/2,alignBorderValue=function(pixel){return _alignPixel(chart,pixel,axisWidth)};if("top"===position)borderValue=alignBorderValue(this.bottom),ty1=this.bottom-tl,ty2=borderValue-axisHalfWidth,y1=alignBorderValue(chartArea.top)+axisHalfWidth,y2=chartArea.bottom;else if("bottom"===position)borderValue=alignBorderValue(this.top),y1=chartArea.top,y2=alignBorderValue(chartArea.bottom)-axisHalfWidth,ty1=borderValue+axisHalfWidth,ty2=this.top+tl;else if("left"===position)borderValue=alignBorderValue(this.right),tx1=this.right-tl,tx2=borderValue-axisHalfWidth,x1=alignBorderValue(chartArea.left)+axisHalfWidth,x2=chartArea.right;else if("right"===position)borderValue=alignBorderValue(this.left),x1=chartArea.left,x2=alignBorderValue(chartArea.right)-axisHalfWidth,tx1=borderValue+axisHalfWidth,tx2=this.left+tl;else if("x"===axis){if("center"===position)borderValue=alignBorderValue((chartArea.top+chartArea.bottom)/2+.5);else if(isObject(position)){var positionAxisID=Object.keys(position)[0],value=position[positionAxisID];borderValue=alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value))}y1=chartArea.top,y2=chartArea.bottom,ty2=(ty1=borderValue+axisHalfWidth)+tl}else if("y"===axis){if("center"===position)borderValue=alignBorderValue((chartArea.left+chartArea.right)/2);else if(isObject(position)){var _positionAxisID2=Object.keys(position)[0],_value2=position[_positionAxisID2];borderValue=alignBorderValue(this.chart.scales[_positionAxisID2].getPixelForValue(_value2))}tx2=(tx1=borderValue-axisHalfWidth)-tl,x1=chartArea.left,x2=chartArea.right}var limit=valueOrDefault(options.ticks.maxTicksLimit,ticksLength),step=Math.max(1,Math.ceil(ticksLength/limit));for(i=0;i<ticksLength;i+=step){var optsAtIndex=grid.setContext(this.getContext(i)),lineWidth=optsAtIndex.lineWidth,lineColor=optsAtIndex.color,borderDash=grid.borderDash||[],borderDashOffset=optsAtIndex.borderDashOffset,tickWidth=optsAtIndex.tickWidth,tickColor=optsAtIndex.tickColor,tickBorderDash=optsAtIndex.tickBorderDash||[],tickBorderDashOffset=optsAtIndex.tickBorderDashOffset;void 0!==(lineValue=getPixelForGridLine(this,i,offset))&&(alignedLineValue=_alignPixel(chart,lineValue,lineWidth),isHorizontal?tx1=tx2=x1=x2=alignedLineValue:ty1=ty2=y1=y2=alignedLineValue,items.push({tx1:tx1,ty1:ty1,tx2:tx2,ty2:ty2,x1:x1,y1:y1,x2:x2,y2:y2,width:lineWidth,color:lineColor,borderDash:borderDash,borderDashOffset:borderDashOffset,tickWidth:tickWidth,tickColor:tickColor,tickBorderDash:tickBorderDash,tickBorderDashOffset:tickBorderDashOffset}))}return this._ticksLength=ticksLength,this._borderValue=borderValue,items}},{key:"_computeLabelItems",value:function(chartArea){var i,ilen,label,x,y,textAlign,pixel,font,lineHeight,lineCount,textOffset,axis=this.axis,options=this.options,position=options.position,optionTicks=options.ticks,isHorizontal=this.isHorizontal(),ticks=this.ticks,align=optionTicks.align,crossAlign=optionTicks.crossAlign,padding=optionTicks.padding,mirror=optionTicks.mirror,tl=getTickMarkLength(options.grid),tickAndPadding=tl+padding,hTickAndPadding=mirror?-padding:tickAndPadding,rotation=-toRadians(this.labelRotation),items=[],textBaseline="middle";if("top"===position)y=this.bottom-hTickAndPadding,textAlign=this._getXAxisLabelAlignment();else if("bottom"===position)y=this.top+hTickAndPadding,textAlign=this._getXAxisLabelAlignment();else if("left"===position){var ret=this._getYAxisLabelAlignment(tl);textAlign=ret.textAlign,x=ret.x}else if("right"===position){var _ret=this._getYAxisLabelAlignment(tl);textAlign=_ret.textAlign,x=_ret.x}else if("x"===axis){if("center"===position)y=(chartArea.top+chartArea.bottom)/2+tickAndPadding;else if(isObject(position)){var positionAxisID=Object.keys(position)[0],value=position[positionAxisID];y=this.chart.scales[positionAxisID].getPixelForValue(value)+tickAndPadding}textAlign=this._getXAxisLabelAlignment()}else if("y"===axis){if("center"===position)x=(chartArea.left+chartArea.right)/2-tickAndPadding;else if(isObject(position)){var _positionAxisID3=Object.keys(position)[0],_value3=position[_positionAxisID3];x=this.chart.scales[_positionAxisID3].getPixelForValue(_value3)}textAlign=this._getYAxisLabelAlignment(tl).textAlign}"y"===axis&&("start"===align?textBaseline="top":"end"===align&&(textBaseline="bottom"));var labelSizes=this._getLabelSizes();for(i=0,ilen=ticks.length;i<ilen;++i){label=ticks[i].label;var optsAtIndex=optionTicks.setContext(this.getContext(i));pixel=this.getPixelForTick(i)+optionTicks.labelOffset,lineHeight=(font=this._resolveTickFontOptions(i)).lineHeight;var halfCount=(lineCount=isArray(label)?label.length:1)/2,color=optsAtIndex.color,strokeColor=optsAtIndex.textStrokeColor,strokeWidth=optsAtIndex.textStrokeWidth,tickTextAlign=textAlign;isHorizontal?(x=pixel,"inner"===textAlign&&(tickTextAlign=i===ilen-1?this.options.reverse?"left":"right":0===i?this.options.reverse?"right":"left":"center"),textOffset="top"===position?"near"===crossAlign||0!==rotation?-lineCount*lineHeight+lineHeight/2:"center"===crossAlign?-labelSizes.highest.height/2-halfCount*lineHeight+lineHeight:-labelSizes.highest.height+lineHeight/2:"near"===crossAlign||0!==rotation?lineHeight/2:"center"===crossAlign?labelSizes.highest.height/2-halfCount*lineHeight:labelSizes.highest.height-lineCount*lineHeight,mirror&&(textOffset*=-1)):(y=pixel,textOffset=(1-lineCount)*lineHeight/2);var backdrop=void 0;if(optsAtIndex.showLabelBackdrop){var labelPadding=toPadding(optsAtIndex.backdropPadding),height=labelSizes.heights[i],width=labelSizes.widths[i],top=y+textOffset-labelPadding.top,left=x-labelPadding.left;switch(textBaseline){case"middle":top-=height/2;break;case"bottom":top-=height}switch(textAlign){case"center":left-=width/2;break;case"right":left-=width}backdrop={left:left,top:top,width:width+labelPadding.width,height:height+labelPadding.height,color:optsAtIndex.backdropColor}}items.push({rotation:rotation,label:label,font:font,color:color,strokeColor:strokeColor,strokeWidth:strokeWidth,textOffset:textOffset,textAlign:tickTextAlign,textBaseline:textBaseline,translation:[x,y],backdrop:backdrop})}return items}},{key:"_getXAxisLabelAlignment",value:function(){var _this$options5=this.options,position=_this$options5.position,ticks=_this$options5.ticks;if(-toRadians(this.labelRotation))return"top"===position?"left":"right";var align="center";return"start"===ticks.align?align="left":"end"===ticks.align?align="right":"inner"===ticks.align&&(align="inner"),align}},{key:"_getYAxisLabelAlignment",value:function(tl){var textAlign,x,_this$options6=this.options,position=_this$options6.position,_this$options6$ticks=_this$options6.ticks,crossAlign=_this$options6$ticks.crossAlign,mirror=_this$options6$ticks.mirror,padding=_this$options6$ticks.padding,tickAndPadding=tl+padding,widest=this._getLabelSizes().widest.width;return"left"===position?mirror?(x=this.right+padding,"near"===crossAlign?textAlign="left":"center"===crossAlign?(textAlign="center",x+=widest/2):(textAlign="right",x+=widest)):(x=this.right-tickAndPadding,"near"===crossAlign?textAlign="right":"center"===crossAlign?(textAlign="center",x-=widest/2):(textAlign="left",x=this.left)):"right"===position?mirror?(x=this.left+padding,"near"===crossAlign?textAlign="right":"center"===crossAlign?(textAlign="center",x-=widest/2):(textAlign="left",x-=widest)):(x=this.left+tickAndPadding,"near"===crossAlign?textAlign="left":"center"===crossAlign?(textAlign="center",x+=widest/2):(textAlign="right",x=this.right)):textAlign="right",{textAlign:textAlign,x:x}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var chart=this.chart,position=this.options.position;return"left"===position||"right"===position?{top:0,left:this.left,bottom:chart.height,right:this.right}:"top"===position||"bottom"===position?{top:this.top,left:0,bottom:this.bottom,right:chart.width}:void 0}}},{key:"drawBackground",value:function(){var ctx=this.ctx,backgroundColor=this.options.backgroundColor,left=this.left,top=this.top,width=this.width,height=this.height;backgroundColor&&(ctx.save(),ctx.fillStyle=backgroundColor,ctx.fillRect(left,top,width,height),ctx.restore())}},{key:"getLineWidthForValue",value:function(value){var grid=this.options.grid;if(!this._isVisible()||!grid.display)return 0;var index=this.ticks.findIndex((function(t){return t.value===value}));return index>=0?grid.setContext(this.getContext(index)).lineWidth:0}},{key:"drawGrid",value:function(chartArea){var i,ilen,grid=this.options.grid,ctx=this.ctx,items=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(chartArea)),drawLine=function(p1,p2,style){style.width&&style.color&&(ctx.save(),ctx.lineWidth=style.width,ctx.strokeStyle=style.color,ctx.setLineDash(style.borderDash||[]),ctx.lineDashOffset=style.borderDashOffset,ctx.beginPath(),ctx.moveTo(p1.x,p1.y),ctx.lineTo(p2.x,p2.y),ctx.stroke(),ctx.restore())};if(grid.display)for(i=0,ilen=items.length;i<ilen;++i){var item=items[i];grid.drawOnChartArea&&drawLine({x:item.x1,y:item.y1},{x:item.x2,y:item.y2},item),grid.drawTicks&&drawLine({x:item.tx1,y:item.ty1},{x:item.tx2,y:item.ty2},{color:item.tickColor,width:item.tickWidth,borderDash:item.tickBorderDash,borderDashOffset:item.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var chart=this.chart,ctx=this.ctx,grid=this.options.grid,borderOpts=grid.setContext(this.getContext()),axisWidth=grid.drawBorder?borderOpts.borderWidth:0;if(axisWidth){var x1,x2,y1,y2,lastLineWidth=grid.setContext(this.getContext(0)).lineWidth,borderValue=this._borderValue;this.isHorizontal()?(x1=_alignPixel(chart,this.left,axisWidth)-axisWidth/2,x2=_alignPixel(chart,this.right,lastLineWidth)+lastLineWidth/2,y1=y2=borderValue):(y1=_alignPixel(chart,this.top,axisWidth)-axisWidth/2,y2=_alignPixel(chart,this.bottom,lastLineWidth)+lastLineWidth/2,x1=x2=borderValue),ctx.save(),ctx.lineWidth=borderOpts.borderWidth,ctx.strokeStyle=borderOpts.borderColor,ctx.beginPath(),ctx.moveTo(x1,y1),ctx.lineTo(x2,y2),ctx.stroke(),ctx.restore()}}},{key:"drawLabels",value:function(chartArea){if(this.options.ticks.display){var ctx=this.ctx,area=this._computeLabelArea();area&&clipArea(ctx,area);var i,ilen,items=this._labelItems||(this._labelItems=this._computeLabelItems(chartArea));for(i=0,ilen=items.length;i<ilen;++i){var item=items[i],tickFont=item.font,label=item.label;item.backdrop&&(ctx.fillStyle=item.backdrop.color,ctx.fillRect(item.backdrop.left,item.backdrop.top,item.backdrop.width,item.backdrop.height)),renderText(ctx,label,0,item.textOffset,tickFont,item)}area&&unclipArea(ctx)}}},{key:"drawTitle",value:function(){var ctx=this.ctx,_this$options7=this.options,position=_this$options7.position,title=_this$options7.title,reverse=_this$options7.reverse;if(title.display){var font=toFont(title.font),padding=toPadding(title.padding),align=title.align,offset=font.lineHeight/2;"bottom"===position||"center"===position||isObject(position)?(offset+=padding.bottom,isArray(title.text)&&(offset+=font.lineHeight*(title.text.length-1))):offset+=padding.top;var _titleArgs=function(scale,offset,position,align){var maxWidth,titleX,titleY,top=scale.top,left=scale.left,bottom=scale.bottom,right=scale.right,chart=scale.chart,chartArea=chart.chartArea,scales=chart.scales,rotation=0,height=bottom-top,width=right-left;if(scale.isHorizontal()){if(titleX=_alignStartEnd(align,left,right),isObject(position)){var positionAxisID=Object.keys(position)[0],value=position[positionAxisID];titleY=scales[positionAxisID].getPixelForValue(value)+height-offset}else titleY="center"===position?(chartArea.bottom+chartArea.top)/2+height-offset:offsetFromEdge(scale,position,offset);maxWidth=right-left}else{if(isObject(position)){var _positionAxisID=Object.keys(position)[0],_value=position[_positionAxisID];titleX=scales[_positionAxisID].getPixelForValue(_value)-width+offset}else titleX="center"===position?(chartArea.left+chartArea.right)/2-width+offset:offsetFromEdge(scale,position,offset);titleY=_alignStartEnd(align,bottom,top),rotation="left"===position?-HALF_PI:HALF_PI}return{titleX:titleX,titleY:titleY,maxWidth:maxWidth,rotation:rotation}}(this,offset,position,align),titleX=_titleArgs.titleX,titleY=_titleArgs.titleY,maxWidth=_titleArgs.maxWidth,rotation=_titleArgs.rotation;renderText(ctx,title.text,0,0,font,{color:title.color,maxWidth:maxWidth,rotation:rotation,textAlign:titleAlign(align,position,reverse),textBaseline:"middle",translation:[titleX,titleY]})}}},{key:"draw",value:function(chartArea){this._isVisible()&&(this.drawBackground(),this.drawGrid(chartArea),this.drawBorder(),this.drawTitle(),this.drawLabels(chartArea))}},{key:"_layers",value:function(){var _this6=this,opts=this.options,tz=opts.ticks&&opts.ticks.z||0,gz=valueOrDefault(opts.grid&&opts.grid.z,-1);return this._isVisible()&&this.draw===Scale.prototype.draw?[{z:gz,draw:function(chartArea){_this6.drawBackground(),_this6.drawGrid(chartArea),_this6.drawTitle()}},{z:gz+1,draw:function(){_this6.drawBorder()}},{z:tz,draw:function(chartArea){_this6.drawLabels(chartArea)}}]:[{z:tz,draw:function(chartArea){_this6.draw(chartArea)}}]}},{key:"getMatchingVisibleMetas",value:function(type){var i,ilen,metas=this.chart.getSortedVisibleDatasetMetas(),axisID=this.axis+"AxisID",result=[];for(i=0,ilen=metas.length;i<ilen;++i){var meta=metas[i];meta[axisID]!==this.id||type&&meta.type!==type||result.push(meta)}return result}},{key:"_resolveTickFontOptions",value:function(index){return toFont(this.options.ticks.setContext(this.getContext(index)).font)}},{key:"_maxDigits",value:function(){var fontSize=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/fontSize}}]),Scale}(Element),TypedRegistry=function(){function TypedRegistry(type,scope,override){_classCallCheck(this,TypedRegistry),this.type=type,this.scope=scope,this.override=override,this.items=Object.create(null)}return _createClass(TypedRegistry,[{key:"isForType",value:function(type){return Object.prototype.isPrototypeOf.call(this.type.prototype,type.prototype)}},{key:"register",value:function(item){var parentScope,proto=Object.getPrototypeOf(item);(function(proto){return"id"in proto&&"defaults"in proto})(proto)&&(parentScope=this.register(proto));var items=this.items,id=item.id,scope=this.scope+"."+id;if(!id)throw new Error("class does not have id: "+item);return id in items||(items[id]=item,function(item,scope,parentScope){var itemDefaults=merge(Object.create(null),[parentScope?defaults.get(parentScope):{},defaults.get(scope),item.defaults]);defaults.set(scope,itemDefaults),item.defaultRoutes&&function(scope,routes){Object.keys(routes).forEach((function(property){var propertyParts=property.split("."),sourceName=propertyParts.pop(),sourceScope=[scope].concat(propertyParts).join("."),parts=routes[property].split("."),targetName=parts.pop(),targetScope=parts.join(".");defaults.route(sourceScope,sourceName,targetScope,targetName)}))}(scope,item.defaultRoutes),item.descriptors&&defaults.describe(scope,item.descriptors)}(item,scope,parentScope),this.override&&defaults.override(item.id,item.overrides)),scope}},{key:"get",value:function(id){return this.items[id]}},{key:"unregister",value:function(item){var items=this.items,id=item.id,scope=this.scope;id in items&&delete items[id],scope&&id in defaults[scope]&&(delete defaults[scope][id],this.override&&delete overrides[id])}}]),TypedRegistry}(),Registry=function(){function Registry(){_classCallCheck(this,Registry),this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return _createClass(Registry,[{key:"add",value:function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];this._each("register",args)}},{key:"remove",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];this._each("unregister",args)}},{key:"addControllers",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];this._each("register",args,this.controllers)}},{key:"addElements",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];this._each("register",args,this.elements)}},{key:"addPlugins",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];this._each("register",args,this.plugins)}},{key:"addScales",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];this._each("register",args,this.scales)}},{key:"getController",value:function(id){return this._get(id,this.controllers,"controller")}},{key:"getElement",value:function(id){return this._get(id,this.elements,"element")}},{key:"getPlugin",value:function(id){return this._get(id,this.plugins,"plugin")}},{key:"getScale",value:function(id){return this._get(id,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];this._each("unregister",args,this.controllers)}},{key:"removeElements",value:function(){for(var _len11=arguments.length,args=new Array(_len11),_key11=0;_key11<_len11;_key11++)args[_key11]=arguments[_key11];this._each("unregister",args,this.elements)}},{key:"removePlugins",value:function(){for(var _len12=arguments.length,args=new Array(_len12),_key12=0;_key12<_len12;_key12++)args[_key12]=arguments[_key12];this._each("unregister",args,this.plugins)}},{key:"removeScales",value:function(){for(var _len13=arguments.length,args=new Array(_len13),_key13=0;_key13<_len13;_key13++)args[_key13]=arguments[_key13];this._each("unregister",args,this.scales)}},{key:"_each",value:function(method,args,typedRegistry){var _this7=this;_toConsumableArray(args).forEach((function(arg){var reg=typedRegistry||_this7._getRegistryForType(arg);typedRegistry||reg.isForType(arg)||reg===_this7.plugins&&arg.id?_this7._exec(method,reg,arg):each(arg,(function(item){var itemReg=typedRegistry||_this7._getRegistryForType(item);_this7._exec(method,itemReg,item)}))}))}},{key:"_exec",value:function(method,registry,component){var camelMethod=_capitalize(method);callback(component["before"+camelMethod],[],component),registry[method](component),callback(component["after"+camelMethod],[],component)}},{key:"_getRegistryForType",value:function(type){for(var i=0;i<this._typedRegistries.length;i++){var reg=this._typedRegistries[i];if(reg.isForType(type))return reg}return this.plugins}},{key:"_get",value:function(id,typedRegistry,type){var item=typedRegistry.get(id);if(void 0===item)throw new Error('"'+id+'" is not a registered '+type+".");return item}}]),Registry}(),registry=new Registry,PluginService=function(){function PluginService(){_classCallCheck(this,PluginService),this._init=[]}return _createClass(PluginService,[{key:"notify",value:function(chart,hook,args,filter){"beforeInit"===hook&&(this._init=this._createDescriptors(chart,!0),this._notify(this._init,chart,"install"));var descriptors=filter?this._descriptors(chart).filter(filter):this._descriptors(chart),result=this._notify(descriptors,chart,hook,args);return"afterDestroy"===hook&&(this._notify(descriptors,chart,"stop"),this._notify(this._init,chart,"uninstall")),result}},{key:"_notify",value:function(descriptors,chart,hook,args){args=args||{};var _step19,_iterator19=_createForOfIteratorHelper(descriptors);try{for(_iterator19.s();!(_step19=_iterator19.n()).done;){var descriptor=_step19.value,plugin=descriptor.plugin;if(!1===callback(plugin[hook],[chart,args,descriptor.options],plugin)&&args.cancelable)return!1}}catch(err){_iterator19.e(err)}finally{_iterator19.f()}return!0}},{key:"invalidate",value:function(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(chart){if(this._cache)return this._cache;var descriptors=this._cache=this._createDescriptors(chart);return this._notifyStateChanges(chart),descriptors}},{key:"_createDescriptors",value:function(chart,all){var config=chart&&chart.config,options=valueOrDefault(config.options&&config.options.plugins,{}),plugins=function(config){for(var plugins=[],keys=Object.keys(registry.plugins.items),i=0;i<keys.length;i++)plugins.push(registry.getPlugin(keys[i]));for(var local=config.plugins||[],_i2=0;_i2<local.length;_i2++){var plugin=local[_i2];-1===plugins.indexOf(plugin)&&plugins.push(plugin)}return plugins}(config);return!1!==options||all?function(chart,plugins,options,all){for(var result=[],context=chart.getContext(),i=0;i<plugins.length;i++){var plugin=plugins[i],opts=getOpts(options[plugin.id],all);null!==opts&&result.push({plugin:plugin,options:pluginOpts(chart.config,plugin,opts,context)})}return result}(chart,plugins,options,all):[]}},{key:"_notifyStateChanges",value:function(chart){var previousDescriptors=this._oldCache||[],descriptors=this._cache,diff=function(a,b){return a.filter((function(x){return!b.some((function(y){return x.plugin.id===y.plugin.id}))}))};this._notify(diff(previousDescriptors,descriptors),chart,"stop"),this._notify(diff(descriptors,previousDescriptors),chart,"start")}}]),PluginService}();function getOpts(options,all){return all||!1!==options?!0===options?{}:options:null}function pluginOpts(config,plugin,opts,context){var keys=config.pluginScopeKeys(plugin),scopes=config.getOptionScopes(opts,keys);return config.createResolver(scopes,context,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(type,options){var datasetDefaults=defaults.datasets[type]||{};return((options.datasets||{})[type]||{}).indexAxis||options.indexAxis||datasetDefaults.indexAxis||"x"}function determineAxis(id,scaleOptions){return"x"===id||"y"===id?id:scaleOptions.axis||("top"===(position=scaleOptions.position)||"bottom"===position?"x":"left"===position||"right"===position?"y":void 0)||id.charAt(0).toLowerCase();var position}function initOptions(config){var options=config.options||(config.options={});options.plugins=valueOrDefault(options.plugins,{}),options.scales=function(config,options){var chartDefaults=overrides[config.type]||{scales:{}},configScales=options.scales||{},chartIndexAxis=getIndexAxis(config.type,options),firstIDs=Object.create(null),scales=Object.create(null);return Object.keys(configScales).forEach((function(id){var scaleConf=configScales[id];if(!isObject(scaleConf))return console.error("Invalid scale configuration for scale: ".concat(id));if(scaleConf._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(id));var axis=determineAxis(id,scaleConf),defaultId=function(axis,indexAxis){return axis===indexAxis?"_index_":"_value_"}(axis,chartIndexAxis),defaultScaleOptions=chartDefaults.scales||{};firstIDs[axis]=firstIDs[axis]||id,scales[id]=mergeIf(Object.create(null),[{axis:axis},scaleConf,defaultScaleOptions[axis],defaultScaleOptions[defaultId]])})),config.data.datasets.forEach((function(dataset){var type=dataset.type||config.type,indexAxis=dataset.indexAxis||getIndexAxis(type,options),defaultScaleOptions=(overrides[type]||{}).scales||{};Object.keys(defaultScaleOptions).forEach((function(defaultID){var axis=function(id,indexAxis){var axis=id;return"_index_"===id?axis=indexAxis:"_value_"===id&&(axis="x"===indexAxis?"y":"x"),axis}(defaultID,indexAxis),id=dataset[axis+"AxisID"]||firstIDs[axis]||axis;scales[id]=scales[id]||Object.create(null),mergeIf(scales[id],[{axis:axis},configScales[id],defaultScaleOptions[defaultID]])}))})),Object.keys(scales).forEach((function(key){var scale=scales[key];mergeIf(scale,[defaults.scales[scale.type],defaults.scale])})),scales}(config,options)}function initData(data){return(data=data||{}).datasets=data.datasets||[],data.labels=data.labels||[],data}var keyCache=new Map,keysCached=new Set;function cachedKeys(cacheKey,generate){var keys=keyCache.get(cacheKey);return keys||(keys=generate(),keyCache.set(cacheKey,keys),keysCached.add(keys)),keys}var addIfFound=function(set,obj,key){var opts=resolveObjectKey(obj,key);void 0!==opts&&set.add(opts)},Config=function(){function Config(config){_classCallCheck(this,Config),this._config=function(config){return(config=config||{}).data=initData(config.data),initOptions(config),config}(config),this._scopeCache=new Map,this._resolverCache=new Map}return _createClass(Config,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(type){this._config.type=type}},{key:"data",get:function(){return this._config.data},set:function(data){this._config.data=initData(data)}},{key:"options",get:function(){return this._config.options},set:function(options){this._config.options=options}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var config=this._config;this.clearCache(),initOptions(config)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(datasetType){return cachedKeys(datasetType,(function(){return[["datasets.".concat(datasetType),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(datasetType,transition){return cachedKeys("".concat(datasetType,".transition.").concat(transition),(function(){return[["datasets.".concat(datasetType,".transitions.").concat(transition),"transitions.".concat(transition)],["datasets.".concat(datasetType),""]]}))}},{key:"datasetElementScopeKeys",value:function(datasetType,elementType){return cachedKeys("".concat(datasetType,"-").concat(elementType),(function(){return[["datasets.".concat(datasetType,".elements.").concat(elementType),"datasets.".concat(datasetType),"elements.".concat(elementType),""]]}))}},{key:"pluginScopeKeys",value:function(plugin){var id=plugin.id,type=this.type;return cachedKeys("".concat(type,"-plugin-").concat(id),(function(){return[["plugins.".concat(id)].concat(_toConsumableArray(plugin.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(mainScope,resetCache){var _scopeCache=this._scopeCache,cache=_scopeCache.get(mainScope);return cache&&!resetCache||(cache=new Map,_scopeCache.set(mainScope,cache)),cache}},{key:"getOptionScopes",value:function(mainScope,keyLists,resetCache){var options=this.options,type=this.type,cache=this._cachedScopes(mainScope,resetCache),cached=cache.get(keyLists);if(cached)return cached;var scopes=new Set;keyLists.forEach((function(keys){mainScope&&(scopes.add(mainScope),keys.forEach((function(key){return addIfFound(scopes,mainScope,key)}))),keys.forEach((function(key){return addIfFound(scopes,options,key)})),keys.forEach((function(key){return addIfFound(scopes,overrides[type]||{},key)})),keys.forEach((function(key){return addIfFound(scopes,defaults,key)})),keys.forEach((function(key){return addIfFound(scopes,descriptors,key)}))}));var array=Array.from(scopes);return 0===array.length&&array.push(Object.create(null)),keysCached.has(keyLists)&&cache.set(keyLists,array),array}},{key:"chartOptionScopes",value:function(){var options=this.options,type=this.type;return[options,overrides[type]||{},defaults.datasets[type]||{},{type:type},defaults,descriptors]}},{key:"resolveNamedOptions",value:function(scopes,names,context){var prefixes=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],result={$shared:!0},_getResolver=getResolver(this._resolverCache,scopes,prefixes),resolver=_getResolver.resolver,subPrefixes=_getResolver.subPrefixes,options=resolver;if(needContext(resolver,names)){result.$shared=!1,context=isFunction(context)?context():context;var subResolver=this.createResolver(scopes,context,subPrefixes);options=_attachContext(resolver,context,subResolver)}var _step20,_iterator20=_createForOfIteratorHelper(names);try{for(_iterator20.s();!(_step20=_iterator20.n()).done;){var prop=_step20.value;result[prop]=options[prop]}}catch(err){_iterator20.e(err)}finally{_iterator20.f()}return result}},{key:"createResolver",value:function(scopes,context){var prefixes=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],descriptorDefaults=arguments.length>3?arguments[3]:void 0,_getResolver2=getResolver(this._resolverCache,scopes,prefixes),resolver=_getResolver2.resolver;return isObject(context)?_attachContext(resolver,context,void 0,descriptorDefaults):resolver}}]),Config}();function getResolver(resolverCache,scopes,prefixes){var cache=resolverCache.get(scopes);cache||(cache=new Map,resolverCache.set(scopes,cache));var cacheKey=prefixes.join(),cached=cache.get(cacheKey);return cached||(cached={resolver:_createResolver(scopes,prefixes),subPrefixes:prefixes.filter((function(p){return!p.toLowerCase().includes("hover")}))},cache.set(cacheKey,cached)),cached}var hasFunction=function(value){return isObject(value)&&Object.getOwnPropertyNames(value).reduce((function(acc,key){return acc||isFunction(value[key])}),!1)};function needContext(proxy,names){var _step21,_descriptors2=_descriptors(proxy),isScriptable=_descriptors2.isScriptable,isIndexable=_descriptors2.isIndexable,_iterator21=_createForOfIteratorHelper(names);try{for(_iterator21.s();!(_step21=_iterator21.n()).done;){var prop=_step21.value,scriptable=isScriptable(prop),indexable=isIndexable(prop),value=(indexable||scriptable)&&proxy[prop];if(scriptable&&(isFunction(value)||hasFunction(value))||indexable&&isArray(value))return!0}}catch(err){_iterator21.e(err)}finally{_iterator21.f()}return!1}var KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(position,axis){return"top"===position||"bottom"===position||-1===KNOWN_POSITIONS.indexOf(position)&&"x"===axis}function compare2Level(l1,l2){return function(a,b){return a[l1]===b[l1]?a[l2]-b[l2]:a[l1]-b[l1]}}function onAnimationsComplete(context){var chart=context.chart,animationOptions=chart.options.animation;chart.notifyPlugins("afterRender"),callback(animationOptions&&animationOptions.onComplete,[context],chart)}function onAnimationProgress(context){var chart=context.chart,animationOptions=chart.options.animation;callback(animationOptions&&animationOptions.onProgress,[context],chart)}function getCanvas(item){return _isDomSupported()&&"string"==typeof item?item=document.getElementById(item):item&&item.length&&(item=item[0]),item&&item.canvas&&(item=item.canvas),item}var instances={},getChart=function(key){var canvas=getCanvas(key);return Object.values(instances).filter((function(c){return c.canvas===canvas})).pop()};function moveNumericKeys(obj,start,move){for(var _i3=0,_keys=Object.keys(obj);_i3<_keys.length;_i3++){var key=_keys[_i3],intKey=+key;if(intKey>=start){var value=obj[key];delete obj[key],(move>0||intKey>start)&&(obj[intKey+move]=value)}}}var Chart=function(){function Chart(item,userConfig){var _this8=this;_classCallCheck(this,Chart);var config=this.config=new Config(userConfig),initialCanvas=getCanvas(item),existingChart=getChart(initialCanvas);if(existingChart)throw new Error("Canvas is already in use. Chart with ID '"+existingChart.id+"' must be destroyed before the canvas can be reused.");var options=config.createResolver(config.chartOptionScopes(),this.getContext());this.platform=new(config.platform||_detectPlatform(initialCanvas)),this.platform.updateConfig(config);var context=this.platform.acquireContext(initialCanvas,options.aspectRatio),canvas=context&&context.canvas,height=canvas&&canvas.height,width=canvas&&canvas.width;this.id=uid(),this.ctx=context,this.canvas=canvas,this.width=width,this.height=height,this._options=options,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce((function(mode){return _this8.update(mode)}),options.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,context&&canvas?(animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return _createClass(Chart,[{key:"aspectRatio",get:function(){var _this$options8=this.options,aspectRatio=_this$options8.aspectRatio,maintainAspectRatio=_this$options8.maintainAspectRatio,width=this.width,height=this.height,_aspectRatio=this._aspectRatio;return isNullOrUndef(aspectRatio)?maintainAspectRatio&&_aspectRatio?_aspectRatio:height?width/height:null:aspectRatio}},{key:"data",get:function(){return this.config.data},set:function(data){this.config.data=data}},{key:"options",get:function(){return this._options},set:function(options){this.config.options=options}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return clearCanvas(this.canvas,this.ctx),this}},{key:"stop",value:function(){return animator.stop(this),this}},{key:"resize",value:function(width,height){animator.running(this)?this._resizeBeforeDraw={width:width,height:height}:this._resize(width,height)}},{key:"_resize",value:function(width,height){var options=this.options,canvas=this.canvas,aspectRatio=options.maintainAspectRatio&&this.aspectRatio,newSize=this.platform.getMaximumSize(canvas,width,height,aspectRatio),newRatio=options.devicePixelRatio||this.platform.getDevicePixelRatio(),mode=this.width?"resize":"attach";this.width=newSize.width,this.height=newSize.height,this._aspectRatio=this.aspectRatio,retinaScale(this,newRatio,!0)&&(this.notifyPlugins("resize",{size:newSize}),callback(options.onResize,[this,newSize],this),this.attached&&this._doResize(mode)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){each(this.options.scales||{},(function(axisOptions,axisID){axisOptions.id=axisID}))}},{key:"buildOrUpdateScales",value:function(){var _this9=this,options=this.options,scaleOpts=options.scales,scales=this.scales,updated=Object.keys(scales).reduce((function(obj,id){return obj[id]=!1,obj}),{}),items=[];scaleOpts&&(items=items.concat(Object.keys(scaleOpts).map((function(id){var scaleOptions=scaleOpts[id],axis=determineAxis(id,scaleOptions),isRadial="r"===axis,isHorizontal="x"===axis;return{options:scaleOptions,dposition:isRadial?"chartArea":isHorizontal?"bottom":"left",dtype:isRadial?"radialLinear":isHorizontal?"category":"linear"}})))),each(items,(function(item){var scaleOptions=item.options,id=scaleOptions.id,axis=determineAxis(id,scaleOptions),scaleType=valueOrDefault(scaleOptions.type,item.dtype);void 0!==scaleOptions.position&&positionIsHorizontal(scaleOptions.position,axis)===positionIsHorizontal(item.dposition)||(scaleOptions.position=item.dposition),updated[id]=!0;var scale=null;id in scales&&scales[id].type===scaleType?scale=scales[id]:(scale=new(registry.getScale(scaleType))({id:id,type:scaleType,ctx:_this9.ctx,chart:_this9}),scales[scale.id]=scale),scale.init(scaleOptions,options)})),each(updated,(function(hasUpdated,id){hasUpdated||delete scales[id]})),each(scales,(function(scale){layouts.configure(_this9,scale,scale.options),layouts.addBox(_this9,scale)}))}},{key:"_updateMetasets",value:function(){var metasets=this._metasets,numData=this.data.datasets.length,numMeta=metasets.length;if(metasets.sort((function(a,b){return a.index-b.index})),numMeta>numData){for(var i=numData;i<numMeta;++i)this._destroyDatasetMeta(i);metasets.splice(numData,numMeta-numData)}this._sortedMetasets=metasets.slice(0).sort(compare2Level("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var _this10=this,metasets=this._metasets,datasets=this.data.datasets;metasets.length>datasets.length&&delete this._stacks,metasets.forEach((function(meta,index){0===datasets.filter((function(x){return x===meta._dataset})).length&&_this10._destroyDatasetMeta(index)}))}},{key:"buildOrUpdateControllers",value:function(){var i,ilen,newControllers=[],datasets=this.data.datasets;for(this._removeUnreferencedMetasets(),i=0,ilen=datasets.length;i<ilen;i++){var dataset=datasets[i],meta=this.getDatasetMeta(i),type=dataset.type||this.config.type;if(meta.type&&meta.type!==type&&(this._destroyDatasetMeta(i),meta=this.getDatasetMeta(i)),meta.type=type,meta.indexAxis=dataset.indexAxis||getIndexAxis(type,this.options),meta.order=dataset.order||0,meta.index=i,meta.label=""+dataset.label,meta.visible=this.isDatasetVisible(i),meta.controller)meta.controller.updateIndex(i),meta.controller.linkScales();else{var ControllerClass=registry.getController(type),_defaults$datasets$ty=defaults.datasets[type],datasetElementType=_defaults$datasets$ty.datasetElementType,dataElementType=_defaults$datasets$ty.dataElementType;Object.assign(ControllerClass.prototype,{dataElementType:registry.getElement(dataElementType),datasetElementType:datasetElementType&&registry.getElement(datasetElementType)}),meta.controller=new ControllerClass(this,i),newControllers.push(meta.controller)}}return this._updateMetasets(),newControllers}},{key:"_resetElements",value:function(){var _this11=this;each(this.data.datasets,(function(dataset,datasetIndex){_this11.getDatasetMeta(datasetIndex).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(mode){var config=this.config;config.update();var options=this._options=config.createResolver(config.chartOptionScopes(),this.getContext()),animsDisabled=this._animationsDisabled=!options.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:mode,cancelable:!0})){var newControllers=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var minPadding=0,i=0,ilen=this.data.datasets.length;i<ilen;i++){var controller=this.getDatasetMeta(i).controller,reset=!animsDisabled&&-1===newControllers.indexOf(controller);controller.buildOrUpdateElements(reset),minPadding=Math.max(+controller.getMaxOverflow(),minPadding)}minPadding=this._minPadding=options.layout.autoPadding?minPadding:0,this._updateLayout(minPadding),animsDisabled||each(newControllers,(function(controller){controller.reset()})),this._updateDatasets(mode),this.notifyPlugins("afterUpdate",{mode:mode}),this._layers.sort(compare2Level("z","_idx"));var _active=this._active,_lastEvent=this._lastEvent;_lastEvent?this._eventHandler(_lastEvent,!0):_active.length&&this._updateHoverStyles(_active,_active,!0),this.render()}}},{key:"_updateScales",value:function(){var _this12=this;each(this.scales,(function(scale){layouts.removeBox(_this12,scale)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var options=this.options,existingEvents=new Set(Object.keys(this._listeners)),newEvents=new Set(options.events);setsEqual(existingEvents,newEvents)&&!!this._responsiveListeners===options.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var _step22,_hiddenIndices=this._hiddenIndices,_iterator22=_createForOfIteratorHelper(this._getUniformDataChanges()||[]);try{for(_iterator22.s();!(_step22=_iterator22.n()).done;){var _step22$value=_step22.value,method=_step22$value.method,start=_step22$value.start,count=_step22$value.count;moveNumericKeys(_hiddenIndices,start,"_removeElements"===method?-count:count)}}catch(err){_iterator22.e(err)}finally{_iterator22.f()}}},{key:"_getUniformDataChanges",value:function(){var _dataChanges=this._dataChanges;if(_dataChanges&&_dataChanges.length){this._dataChanges=[];for(var datasetCount=this.data.datasets.length,makeSet=function(idx){return new Set(_dataChanges.filter((function(c){return c[0]===idx})).map((function(c,i){return i+","+c.splice(1).join(",")})))},changeSet=makeSet(0),i=1;i<datasetCount;i++)if(!setsEqual(changeSet,makeSet(i)))return;return Array.from(changeSet).map((function(c){return c.split(",")})).map((function(a){return{method:a[1],start:+a[2],count:+a[3]}}))}}},{key:"_updateLayout",value:function(minPadding){var _this13=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){layouts.update(this,this.width,this.height,minPadding);var area=this.chartArea,noArea=area.width<=0||area.height<=0;this._layers=[],each(this.boxes,(function(box){var _this13$_layers;noArea&&"chartArea"===box.position||(box.configure&&box.configure(),(_this13$_layers=_this13._layers).push.apply(_this13$_layers,_toConsumableArray(box._layers())))}),this),this._layers.forEach((function(item,index){item._idx=index})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(mode){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:mode,cancelable:!0})){for(var i=0,ilen=this.data.datasets.length;i<ilen;++i)this.getDatasetMeta(i).controller.configure();for(var _i4=0,_ilen=this.data.datasets.length;_i4<_ilen;++_i4)this._updateDataset(_i4,isFunction(mode)?mode({datasetIndex:_i4}):mode);this.notifyPlugins("afterDatasetsUpdate",{mode:mode})}}},{key:"_updateDataset",value:function(index,mode){var meta=this.getDatasetMeta(index),args={meta:meta,index:index,mode:mode,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",args)&&(meta.controller._update(mode),args.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",args))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}},{key:"draw",value:function(){var i;if(this._resizeBeforeDraw){var _this$_resizeBeforeDr=this._resizeBeforeDraw,width=_this$_resizeBeforeDr.width,height=_this$_resizeBeforeDr.height;this._resize(width,height),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var layers=this._layers;for(i=0;i<layers.length&&layers[i].z<=0;++i)layers[i].draw(this.chartArea);for(this._drawDatasets();i<layers.length;++i)layers[i].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(filterVisible){var i,ilen,metasets=this._sortedMetasets,result=[];for(i=0,ilen=metasets.length;i<ilen;++i){var meta=metasets[i];filterVisible&&!meta.visible||result.push(meta)}return result}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var metasets=this.getSortedVisibleDatasetMetas(),i=metasets.length-1;i>=0;--i)this._drawDataset(metasets[i]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(meta){var ctx=this.ctx,clip=meta._clip,useClip=!clip.disabled,area=this.chartArea,args={meta:meta,index:meta.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",args)&&(useClip&&clipArea(ctx,{left:!1===clip.left?0:area.left-clip.left,right:!1===clip.right?this.width:area.right+clip.right,top:!1===clip.top?0:area.top-clip.top,bottom:!1===clip.bottom?this.height:area.bottom+clip.bottom}),meta.controller.draw(),useClip&&unclipArea(ctx),args.cancelable=!1,this.notifyPlugins("afterDatasetDraw",args))}},{key:"isPointInArea",value:function(point){return _isPointInArea(point,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,mode,options,useFinalPosition){var method=Interaction.modes[mode];return"function"==typeof method?method(this,e,options,useFinalPosition):[]}},{key:"getDatasetMeta",value:function(datasetIndex){var dataset=this.data.datasets[datasetIndex],metasets=this._metasets,meta=metasets.filter((function(x){return x&&x._dataset===dataset})).pop();return meta||(meta={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:dataset&&dataset.order||0,index:datasetIndex,_dataset:dataset,_parsed:[],_sorted:!1},metasets.push(meta)),meta}},{key:"getContext",value:function(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(datasetIndex){var dataset=this.data.datasets[datasetIndex];if(!dataset)return!1;var meta=this.getDatasetMeta(datasetIndex);return"boolean"==typeof meta.hidden?!meta.hidden:!dataset.hidden}},{key:"setDatasetVisibility",value:function(datasetIndex,visible){this.getDatasetMeta(datasetIndex).hidden=!visible}},{key:"toggleDataVisibility",value:function(index){this._hiddenIndices[index]=!this._hiddenIndices[index]}},{key:"getDataVisibility",value:function(index){return!this._hiddenIndices[index]}},{key:"_updateVisibility",value:function(datasetIndex,dataIndex,visible){var mode=visible?"show":"hide",meta=this.getDatasetMeta(datasetIndex),anims=meta.controller._resolveAnimations(void 0,mode);defined(dataIndex)?(meta.data[dataIndex].hidden=!visible,this.update()):(this.setDatasetVisibility(datasetIndex,visible),anims.update(meta,{visible:visible}),this.update((function(ctx){return ctx.datasetIndex===datasetIndex?mode:void 0})))}},{key:"hide",value:function(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,!1)}},{key:"show",value:function(datasetIndex,dataIndex){this._updateVisibility(datasetIndex,dataIndex,!0)}},{key:"_destroyDatasetMeta",value:function(datasetIndex){var meta=this._metasets[datasetIndex];meta&&meta.controller&&meta.controller._destroy(),delete this._metasets[datasetIndex]}},{key:"_stop",value:function(){var i,ilen;for(this.stop(),animator.remove(this),i=0,ilen=this.data.datasets.length;i<ilen;++i)this._destroyDatasetMeta(i)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var canvas=this.canvas,ctx=this.ctx;this._stop(),this.config.clearCache(),canvas&&(this.unbindEvents(),clearCanvas(canvas,ctx),this.platform.releaseContext(ctx),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var _this$canvas;return(_this$canvas=this.canvas).toDataURL.apply(_this$canvas,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var _this14=this,listeners=this._listeners,platform=this.platform,listener=function(e,x,y){e.offsetX=x,e.offsetY=y,_this14._eventHandler(e)};each(this.options.events,(function(type){return function(type,listener){platform.addEventListener(_this14,type,listener),listeners[type]=listener}(type,listener)}))}},{key:"bindResponsiveEvents",value:function(){var _this15=this;this._responsiveListeners||(this._responsiveListeners={});var detached,listeners=this._responsiveListeners,platform=this.platform,_add=function(type,listener){platform.addEventListener(_this15,type,listener),listeners[type]=listener},_remove=function(type,listener){listeners[type]&&(platform.removeEventListener(_this15,type,listener),delete listeners[type])},listener=function(width,height){_this15.canvas&&_this15.resize(width,height)},attached=function attached(){_remove("attach",attached),_this15.attached=!0,_this15.resize(),_add("resize",listener),_add("detach",detached)};detached=function(){_this15.attached=!1,_remove("resize",listener),_this15._stop(),_this15._resize(0,0),_add("attach",attached)},platform.isAttached(this.canvas)?attached():detached()}},{key:"unbindEvents",value:function(){var _this16=this;each(this._listeners,(function(listener,type){_this16.platform.removeEventListener(_this16,type,listener)})),this._listeners={},each(this._responsiveListeners,(function(listener,type){_this16.platform.removeEventListener(_this16,type,listener)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(items,mode,enabled){var item,i,ilen,prefix=enabled?"set":"remove";for("dataset"===mode&&this.getDatasetMeta(items[0].datasetIndex).controller["_"+prefix+"DatasetHoverStyle"](),i=0,ilen=items.length;i<ilen;++i){var controller=(item=items[i])&&this.getDatasetMeta(item.datasetIndex).controller;controller&&controller[prefix+"HoverStyle"](item.element,item.datasetIndex,item.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(activeElements){var _this17=this,lastActive=this._active||[],active=activeElements.map((function(_ref2){var datasetIndex=_ref2.datasetIndex,index=_ref2.index,meta=_this17.getDatasetMeta(datasetIndex);if(!meta)throw new Error("No dataset found at index "+datasetIndex);return{datasetIndex:datasetIndex,element:meta.data[index],index:index}}));!_elementsEqual(active,lastActive)&&(this._active=active,this._lastEvent=null,this._updateHoverStyles(active,lastActive))}},{key:"notifyPlugins",value:function(hook,args,filter){return this._plugins.notify(this,hook,args,filter)}},{key:"_updateHoverStyles",value:function(active,lastActive,replay){var hoverOptions=this.options.hover,diff=function(a,b){return a.filter((function(x){return!b.some((function(y){return x.datasetIndex===y.datasetIndex&&x.index===y.index}))}))},deactivated=diff(lastActive,active),activated=replay?active:diff(active,lastActive);deactivated.length&&this.updateHoverStyle(deactivated,hoverOptions.mode,!1),activated.length&&hoverOptions.mode&&this.updateHoverStyle(activated,hoverOptions.mode,!0)}},{key:"_eventHandler",value:function(e,replay){var _this18=this,args={event:e,replay:replay,cancelable:!0,inChartArea:this.isPointInArea(e)},eventFilter=function(plugin){return(plugin.options.events||_this18.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",args,eventFilter)){var changed=this._handleEvent(e,replay,args.inChartArea);return args.cancelable=!1,this.notifyPlugins("afterEvent",args,eventFilter),(changed||args.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,replay,inChartArea){var _this$_active=this._active,lastActive=void 0===_this$_active?[]:_this$_active,options=this.options,useFinalPosition=replay,active=this._getActiveElements(e,lastActive,inChartArea,useFinalPosition),isClick=_isClickEvent(e),lastEvent=function(e,lastEvent,inChartArea,isClick){return inChartArea&&"mouseout"!==e.type?isClick?lastEvent:e:null}(e,this._lastEvent,inChartArea,isClick);inChartArea&&(this._lastEvent=null,callback(options.onHover,[e,active,this],this),isClick&&callback(options.onClick,[e,active,this],this));var changed=!_elementsEqual(active,lastActive);return(changed||replay)&&(this._active=active,this._updateHoverStyles(active,lastActive,replay)),this._lastEvent=lastEvent,changed}},{key:"_getActiveElements",value:function(e,lastActive,inChartArea,useFinalPosition){if("mouseout"===e.type)return[];if(!inChartArea)return lastActive;var hoverOptions=this.options.hover;return this.getElementsAtEventForMode(e,hoverOptions.mode,hoverOptions,useFinalPosition)}}]),Chart}(),invalidatePlugins=function(){return each(Chart.instances,(function(chart){return chart._plugins.invalidate()}))};function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(Chart,{defaults:{enumerable:!0,value:defaults},instances:{enumerable:!0,value:instances},overrides:{enumerable:!0,value:overrides},registry:{enumerable:!0,value:registry},version:{enumerable:!0,value:"3.8.0"},getChart:{enumerable:!0,value:getChart},register:{enumerable:!0,value:function(){registry.add.apply(registry,arguments),invalidatePlugins()}},unregister:{enumerable:!0,value:function(){registry.remove.apply(registry,arguments),invalidatePlugins()}}});var DateAdapter=function(){function DateAdapter(options){_classCallCheck(this,DateAdapter),this.options=options||{}}return _createClass(DateAdapter,[{key:"formats",value:function(){return abstract()}},{key:"parse",value:function(value,format){return abstract()}},{key:"format",value:function(timestamp,_format){return abstract()}},{key:"add",value:function(timestamp,amount,unit){return abstract()}},{key:"diff",value:function(a,b,unit){return abstract()}},{key:"startOf",value:function(timestamp,unit,weekday){return abstract()}},{key:"endOf",value:function(timestamp,unit){return abstract()}}]),DateAdapter}();DateAdapter.override=function(members){Object.assign(DateAdapter.prototype,members)};var _adapters={_date:DateAdapter};function computeMinSampleSize(meta){var i,ilen,curr,prev,scale=meta.iScale,values=function(scale,type){if(!scale._cache.$bar){for(var visibleMetas=scale.getMatchingVisibleMetas(type),values=[],i=0,ilen=visibleMetas.length;i<ilen;i++)values=values.concat(visibleMetas[i].controller.getAllParsedValues(scale));scale._cache.$bar=_arrayUnique(values.sort((function(a,b){return a-b})))}return scale._cache.$bar}(scale,meta.type),min=scale._length,updateMinAndPrev=function(){32767!==curr&&-32768!==curr&&(defined(prev)&&(min=Math.min(min,Math.abs(curr-prev)||min)),prev=curr)};for(i=0,ilen=values.length;i<ilen;++i)curr=scale.getPixelForValue(values[i]),updateMinAndPrev();for(prev=void 0,i=0,ilen=scale.ticks.length;i<ilen;++i)curr=scale.getPixelForTick(i),updateMinAndPrev();return min}function parseValue(entry,item,vScale,i){return isArray(entry)?function(entry,item,vScale,i){var startValue=vScale.parse(entry[0],i),endValue=vScale.parse(entry[1],i),min=Math.min(startValue,endValue),max=Math.max(startValue,endValue),barStart=min,barEnd=max;Math.abs(min)>Math.abs(max)&&(barStart=max,barEnd=min),item[vScale.axis]=barEnd,item._custom={barStart:barStart,barEnd:barEnd,start:startValue,end:endValue,min:min,max:max}}(entry,item,vScale,i):item[vScale.axis]=vScale.parse(entry,i),item}function parseArrayOrPrimitive(meta,data,start,count){var i,ilen,item,entry,iScale=meta.iScale,vScale=meta.vScale,labels=iScale.getLabels(),singleScale=iScale===vScale,parsed=[];for(i=start,ilen=start+count;i<ilen;++i)entry=data[i],(item={})[iScale.axis]=singleScale||iScale.parse(labels[i],i),parsed.push(parseValue(entry,item,vScale,i));return parsed}function isFloatBar(custom){return custom&&void 0!==custom.barStart&&void 0!==custom.barEnd}function setBorderSkipped(properties,options,stack,index){var edge=options.borderSkipped,res={};if(edge){var _borderProps=function(properties){var reverse,start,end,top,bottom;return properties.horizontal?(reverse=properties.base>properties.x,start="left",end="right"):(reverse=properties.base<properties.y,start="bottom",end="top"),reverse?(top="end",bottom="start"):(top="start",bottom="end"),{start:start,end:end,reverse:reverse,top:top,bottom:bottom}}(properties),start=_borderProps.start,end=_borderProps.end,reverse=_borderProps.reverse,top=_borderProps.top,bottom=_borderProps.bottom;"middle"===edge&&stack&&(properties.enableBorderRadius=!0,(stack._top||0)===index?edge=top:(stack._bottom||0)===index?edge=bottom:(res[parseEdge(bottom,start,end,reverse)]=!0,edge=top)),res[parseEdge(edge,start,end,reverse)]=!0,properties.borderSkipped=res}else properties.borderSkipped=res}function parseEdge(edge,a,b,reverse){var orig,v1,v2;return reverse?(v2=b,edge=startEnd(edge=(orig=edge)===(v1=a)?v2:orig===v2?v1:orig,b,a)):edge=startEnd(edge,a,b),edge}function startEnd(v,start,end){return"start"===v?start:"end"===v?end:v}function setInflateAmount(properties,_ref3,ratio){var inflateAmount=_ref3.inflateAmount;properties.inflateAmount="auto"===inflateAmount?1===ratio?.33:0:inflateAmount}var BarController=function(_DatasetController){_inherits(BarController,_DatasetController);var _super4=_createSuper(BarController);function BarController(){return _classCallCheck(this,BarController),_super4.apply(this,arguments)}return _createClass(BarController,[{key:"parsePrimitiveData",value:function(meta,data,start,count){return parseArrayOrPrimitive(meta,data,start,count)}},{key:"parseArrayData",value:function(meta,data,start,count){return parseArrayOrPrimitive(meta,data,start,count)}},{key:"parseObjectData",value:function(meta,data,start,count){var i,ilen,item,obj,iScale=meta.iScale,vScale=meta.vScale,_this$_parsing2=this._parsing,_this$_parsing2$xAxis=_this$_parsing2.xAxisKey,xAxisKey=void 0===_this$_parsing2$xAxis?"x":_this$_parsing2$xAxis,_this$_parsing2$yAxis=_this$_parsing2.yAxisKey,yAxisKey=void 0===_this$_parsing2$yAxis?"y":_this$_parsing2$yAxis,iAxisKey="x"===iScale.axis?xAxisKey:yAxisKey,vAxisKey="x"===vScale.axis?xAxisKey:yAxisKey,parsed=[];for(i=start,ilen=start+count;i<ilen;++i)obj=data[i],(item={})[iScale.axis]=iScale.parse(resolveObjectKey(obj,iAxisKey),i),parsed.push(parseValue(resolveObjectKey(obj,vAxisKey),item,vScale,i));return parsed}},{key:"updateRangeFromParsed",value:function(range,scale,parsed,stack){_get2(_getPrototypeOf(BarController.prototype),"updateRangeFromParsed",this).call(this,range,scale,parsed,stack);var custom=parsed._custom;custom&&scale===this._cachedMeta.vScale&&(range.min=Math.min(range.min,custom.min),range.max=Math.max(range.max,custom.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(index){var meta=this._cachedMeta,iScale=meta.iScale,vScale=meta.vScale,parsed=this.getParsed(index),custom=parsed._custom,value=isFloatBar(custom)?"["+custom.start+", "+custom.end+"]":""+vScale.getLabelForValue(parsed[vScale.axis]);return{label:""+iScale.getLabelForValue(parsed[iScale.axis]),value:value}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,_get2(_getPrototypeOf(BarController.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(mode){var meta=this._cachedMeta;this.updateElements(meta.data,0,meta.data.length,mode)}},{key:"updateElements",value:function(bars,start,count,mode){var reset="reset"===mode,index=this.index,vScale=this._cachedMeta.vScale,base=vScale.getBasePixel(),horizontal=vScale.isHorizontal(),ruler=this._getRuler(),firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions);this.updateSharedOptions(sharedOptions,mode,firstOpts);for(var i=start;i<start+count;i++){var parsed=this.getParsed(i),vpixels=reset||isNullOrUndef(parsed[vScale.axis])?{base:base,head:base}:this._calculateBarValuePixels(i),ipixels=this._calculateBarIndexPixels(i,ruler),stack=(parsed._stacks||{})[vScale.axis],properties={horizontal:horizontal,base:vpixels.base,enableBorderRadius:!stack||isFloatBar(parsed._custom)||index===stack._top||index===stack._bottom,x:horizontal?vpixels.head:ipixels.center,y:horizontal?ipixels.center:vpixels.head,height:horizontal?ipixels.size:Math.abs(vpixels.size),width:horizontal?Math.abs(vpixels.size):ipixels.size};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,bars[i].active?"active":mode));var options=properties.options||bars[i].options;setBorderSkipped(properties,options,stack,index),setInflateAmount(properties,options,ruler.ratio),this.updateElement(bars[i],i,properties,mode)}}},{key:"_getStacks",value:function(last,dataIndex){var i,item,iScale=this._cachedMeta.iScale,metasets=iScale.getMatchingVisibleMetas(this._type),stacked=iScale.options.stacked,ilen=metasets.length,stacks=[];for(i=0;i<ilen;++i)if((item=metasets[i]).controller.options.grouped){if(void 0!==dataIndex){var val=item.controller.getParsed(dataIndex)[item.controller._cachedMeta.vScale.axis];if(isNullOrUndef(val)||isNaN(val))continue}if((!1===stacked||-1===stacks.indexOf(item.stack)||void 0===stacked&&void 0===item.stack)&&stacks.push(item.stack),item.index===last)break}return stacks.length||stacks.push(void 0),stacks}},{key:"_getStackCount",value:function(index){return this._getStacks(void 0,index).length}},{key:"_getStackIndex",value:function(datasetIndex,name,dataIndex){var stacks=this._getStacks(datasetIndex,dataIndex),index=void 0!==name?stacks.indexOf(name):-1;return-1===index?stacks.length-1:index}},{key:"_getRuler",value:function(){var i,ilen,opts=this.options,meta=this._cachedMeta,iScale=meta.iScale,pixels=[];for(i=0,ilen=meta.data.length;i<ilen;++i)pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis],i));var barThickness=opts.barThickness;return{min:barThickness||computeMinSampleSize(meta),pixels:pixels,start:iScale._startPixel,end:iScale._endPixel,stackCount:this._getStackCount(),scale:iScale,grouped:opts.grouped,ratio:barThickness?1:opts.categoryPercentage*opts.barPercentage}}},{key:"_calculateBarValuePixels",value:function(index){var head,size,_this$_cachedMeta=this._cachedMeta,vScale=_this$_cachedMeta.vScale,_stacked=_this$_cachedMeta._stacked,_this$options9=this.options,baseValue=_this$options9.base,minBarLength=_this$options9.minBarLength,actualBase=baseValue||0,parsed=this.getParsed(index),custom=parsed._custom,floating=isFloatBar(custom),value=parsed[vScale.axis],start=0,length=_stacked?this.applyStack(vScale,parsed,_stacked):value;length!==value&&(start=length-value,length=value),floating&&(value=custom.barStart,length=custom.barEnd-custom.barStart,0!==value&&sign(value)!==sign(custom.barEnd)&&(start=0),start+=value);var startValue=isNullOrUndef(baseValue)||floating?start:baseValue,base=vScale.getPixelForValue(startValue);if(size=(head=this.chart.getDataVisibility(index)?vScale.getPixelForValue(start+length):base)-base,Math.abs(size)<minBarLength){size=function(size,vScale,actualBase){return 0!==size?sign(size):(vScale.isHorizontal()?1:-1)*(vScale.min>=actualBase?1:-1)}(size,vScale,actualBase)*minBarLength,value===actualBase&&(base-=size/2);var startPixel=vScale.getPixelForDecimal(0),endPixel=vScale.getPixelForDecimal(1),min=Math.min(startPixel,endPixel),max=Math.max(startPixel,endPixel);head=(base=Math.max(Math.min(base,max),min))+size}if(base===vScale.getPixelForValue(actualBase)){var halfGrid=sign(size)*vScale.getLineWidthForValue(actualBase)/2;base+=halfGrid,size-=halfGrid}return{size:size,base:base,head:head,center:head+size/2}}},{key:"_calculateBarIndexPixels",value:function(index,ruler){var center,size,scale=ruler.scale,options=this.options,skipNull=options.skipNull,maxBarThickness=valueOrDefault(options.maxBarThickness,1/0);if(ruler.grouped){var stackCount=skipNull?this._getStackCount(index):ruler.stackCount,range="flex"===options.barThickness?function(index,ruler,options,stackCount){var pixels=ruler.pixels,curr=pixels[index],prev=index>0?pixels[index-1]:null,next=index<pixels.length-1?pixels[index+1]:null,percent=options.categoryPercentage;null===prev&&(prev=curr-(null===next?ruler.end-ruler.start:next-curr)),null===next&&(next=curr+curr-prev);var start=curr-(curr-Math.min(prev,next))/2*percent;return{chunk:Math.abs(next-prev)/2*percent/stackCount,ratio:options.barPercentage,start:start}}(index,ruler,options,stackCount):function(index,ruler,options,stackCount){var size,ratio,thickness=options.barThickness;return isNullOrUndef(thickness)?(size=ruler.min*options.categoryPercentage,ratio=options.barPercentage):(size=thickness*stackCount,ratio=1),{chunk:size/stackCount,ratio:ratio,start:ruler.pixels[index]-size/2}}(index,ruler,options,stackCount),stackIndex=this._getStackIndex(this.index,this._cachedMeta.stack,skipNull?index:void 0);center=range.start+range.chunk*stackIndex+range.chunk/2,size=Math.min(maxBarThickness,range.chunk*range.ratio)}else center=scale.getPixelForValue(this.getParsed(index)[scale.axis],index),size=Math.min(maxBarThickness,ruler.min*ruler.ratio);return{base:center-size/2,head:center+size/2,center:center,size:size}}},{key:"draw",value:function(){for(var meta=this._cachedMeta,vScale=meta.vScale,rects=meta.data,ilen=rects.length,i=0;i<ilen;++i)null!==this.getParsed(i)[vScale.axis]&&rects[i].draw(this._ctx)}}]),BarController}(DatasetController);BarController.id="bar",BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};var BubbleController=function(_DatasetController2){_inherits(BubbleController,_DatasetController2);var _super5=_createSuper(BubbleController);function BubbleController(){return _classCallCheck(this,BubbleController),_super5.apply(this,arguments)}return _createClass(BubbleController,[{key:"initialize",value:function(){this.enableOptionSharing=!0,_get2(_getPrototypeOf(BubbleController.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(meta,data,start,count){for(var parsed=_get2(_getPrototypeOf(BubbleController.prototype),"parsePrimitiveData",this).call(this,meta,data,start,count),i=0;i<parsed.length;i++)parsed[i]._custom=this.resolveDataElementOptions(i+start).radius;return parsed}},{key:"parseArrayData",value:function(meta,data,start,count){for(var parsed=_get2(_getPrototypeOf(BubbleController.prototype),"parseArrayData",this).call(this,meta,data,start,count),i=0;i<parsed.length;i++){var item=data[start+i];parsed[i]._custom=valueOrDefault(item[2],this.resolveDataElementOptions(i+start).radius)}return parsed}},{key:"parseObjectData",value:function(meta,data,start,count){for(var parsed=_get2(_getPrototypeOf(BubbleController.prototype),"parseObjectData",this).call(this,meta,data,start,count),i=0;i<parsed.length;i++){var item=data[start+i];parsed[i]._custom=valueOrDefault(item&&item.r&&+item.r,this.resolveDataElementOptions(i+start).radius)}return parsed}},{key:"getMaxOverflow",value:function(){for(var data=this._cachedMeta.data,max=0,i=data.length-1;i>=0;--i)max=Math.max(max,data[i].size(this.resolveDataElementOptions(i))/2);return max>0&&max}},{key:"getLabelAndValue",value:function(index){var meta=this._cachedMeta,xScale=meta.xScale,yScale=meta.yScale,parsed=this.getParsed(index),x=xScale.getLabelForValue(parsed.x),y=yScale.getLabelForValue(parsed.y),r=parsed._custom;return{label:meta.label,value:"("+x+", "+y+(r?", "+r:"")+")"}}},{key:"update",value:function(mode){var points=this._cachedMeta.data;this.updateElements(points,0,points.length,mode)}},{key:"updateElements",value:function(points,start,count,mode){for(var reset="reset"===mode,_this$_cachedMeta2=this._cachedMeta,iScale=_this$_cachedMeta2.iScale,vScale=_this$_cachedMeta2.vScale,firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),iAxis=iScale.axis,vAxis=vScale.axis,i=start;i<start+count;i++){var point=points[i],parsed=!reset&&this.getParsed(i),properties={},iPixel=properties[iAxis]=reset?iScale.getPixelForDecimal(.5):iScale.getPixelForValue(parsed[iAxis]),vPixel=properties[vAxis]=reset?vScale.getBasePixel():vScale.getPixelForValue(parsed[vAxis]);properties.skip=isNaN(iPixel)||isNaN(vPixel),includeOptions&&(properties.options=this.resolveDataElementOptions(i,point.active?"active":mode),reset&&(properties.options.radius=0)),this.updateElement(point,i,properties,mode)}this.updateSharedOptions(sharedOptions,mode,firstOpts)}},{key:"resolveDataElementOptions",value:function(index,mode){var parsed=this.getParsed(index),values=_get2(_getPrototypeOf(BubbleController.prototype),"resolveDataElementOptions",this).call(this,index,mode);values.$shared&&(values=Object.assign({},values,{$shared:!1}));var radius=values.radius;return"active"!==mode&&(values.radius=0),values.radius+=valueOrDefault(parsed&&parsed._custom,radius),values}}]),BubbleController}(DatasetController);BubbleController.id="bubble",BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:function(){return""}}}}};var DoughnutController=function(_DatasetController3){_inherits(DoughnutController,_DatasetController3);var _super6=_createSuper(DoughnutController);function DoughnutController(chart,datasetIndex){var _this19;return _classCallCheck(this,DoughnutController),(_this19=_super6.call(this,chart,datasetIndex)).enableOptionSharing=!0,_this19.innerRadius=void 0,_this19.outerRadius=void 0,_this19.offsetX=void 0,_this19.offsetY=void 0,_this19}return _createClass(DoughnutController,[{key:"linkScales",value:function(){}},{key:"parse",value:function(start,count){var data=this.getDataset().data,meta=this._cachedMeta;if(!1===this._parsing)meta._parsed=data;else{var i,ilen,getter=function(i){return+data[i]};if(isObject(data[start])){var _this$_parsing$key2=this._parsing.key,key=void 0===_this$_parsing$key2?"value":_this$_parsing$key2;getter=function(i){return+resolveObjectKey(data[i],key)}}for(i=start,ilen=start+count;i<ilen;++i)meta._parsed[i]=getter(i)}}},{key:"_getRotation",value:function(){return toRadians(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return toRadians(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var min=TAU,max=-TAU,i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)){var controller=this.chart.getDatasetMeta(i).controller,rotation=controller._getRotation(),circumference=controller._getCircumference();min=Math.min(min,rotation),max=Math.max(max,rotation+circumference)}return{rotation:min,circumference:max-min}}},{key:"update",value:function(mode){var chartArea=this.chart.chartArea,meta=this._cachedMeta,arcs=meta.data,spacing=this.getMaxBorderWidth()+this.getMaxOffset(arcs)+this.options.spacing,maxSize=Math.max((Math.min(chartArea.width,chartArea.height)-spacing)/2,0),cutout=Math.min(toPercentage(this.options.cutout,maxSize),1),chartWeight=this._getRingWeight(this.index),_this$_getRotationExt=this._getRotationExtents(),circumference=_this$_getRotationExt.circumference,_getRatioAndOffset=function(rotation,circumference,cutout){var ratioX=1,ratioY=1,offsetX=0,offsetY=0;if(circumference<TAU){var startAngle=rotation,endAngle=startAngle+circumference,startX=Math.cos(startAngle),startY=Math.sin(startAngle),endX=Math.cos(endAngle),endY=Math.sin(endAngle),calcMax=function(angle,a,b){return _angleBetween(angle,startAngle,endAngle,!0)?1:Math.max(a,a*cutout,b,b*cutout)},calcMin=function(angle,a,b){return _angleBetween(angle,startAngle,endAngle,!0)?-1:Math.min(a,a*cutout,b,b*cutout)},maxX=calcMax(0,startX,endX),maxY=calcMax(HALF_PI,startY,endY),minX=calcMin(PI,startX,endX),minY=calcMin(PI+HALF_PI,startY,endY);ratioX=(maxX-minX)/2,ratioY=(maxY-minY)/2,offsetX=-(maxX+minX)/2,offsetY=-(maxY+minY)/2}return{ratioX:ratioX,ratioY:ratioY,offsetX:offsetX,offsetY:offsetY}}(_this$_getRotationExt.rotation,circumference,cutout),ratioX=_getRatioAndOffset.ratioX,ratioY=_getRatioAndOffset.ratioY,offsetX=_getRatioAndOffset.offsetX,offsetY=_getRatioAndOffset.offsetY,maxWidth=(chartArea.width-spacing)/ratioX,maxHeight=(chartArea.height-spacing)/ratioY,maxRadius=Math.max(Math.min(maxWidth,maxHeight)/2,0),outerRadius=toDimension(this.options.radius,maxRadius),radiusLength=(outerRadius-Math.max(outerRadius*cutout,0))/this._getVisibleDatasetWeightTotal();this.offsetX=offsetX*outerRadius,this.offsetY=offsetY*outerRadius,meta.total=this.calculateTotal(),this.outerRadius=outerRadius-radiusLength*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-radiusLength*chartWeight,0),this.updateElements(arcs,0,arcs.length,mode)}},{key:"_circumference",value:function(i,reset){var opts=this.options,meta=this._cachedMeta,circumference=this._getCircumference();return reset&&opts.animation.animateRotate||!this.chart.getDataVisibility(i)||null===meta._parsed[i]||meta.data[i].hidden?0:this.calculateCircumference(meta._parsed[i]*circumference/TAU)}},{key:"updateElements",value:function(arcs,start,count,mode){var i,reset="reset"===mode,chart=this.chart,chartArea=chart.chartArea,animationOpts=chart.options.animation,centerX=(chartArea.left+chartArea.right)/2,centerY=(chartArea.top+chartArea.bottom)/2,animateScale=reset&&animationOpts.animateScale,innerRadius=animateScale?0:this.innerRadius,outerRadius=animateScale?0:this.outerRadius,firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),startAngle=this._getRotation();for(i=0;i<start;++i)startAngle+=this._circumference(i,reset);for(i=start;i<start+count;++i){var circumference=this._circumference(i,reset),arc=arcs[i],properties={x:centerX+this.offsetX,y:centerY+this.offsetY,startAngle:startAngle,endAngle:startAngle+circumference,circumference:circumference,outerRadius:outerRadius,innerRadius:innerRadius};includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,arc.active?"active":mode)),startAngle+=circumference,this.updateElement(arc,i,properties,mode)}this.updateSharedOptions(sharedOptions,mode,firstOpts)}},{key:"calculateTotal",value:function(){var i,meta=this._cachedMeta,metaData=meta.data,total=0;for(i=0;i<metaData.length;i++){var value=meta._parsed[i];null===value||isNaN(value)||!this.chart.getDataVisibility(i)||metaData[i].hidden||(total+=Math.abs(value))}return total}},{key:"calculateCircumference",value:function(value){var total=this._cachedMeta.total;return total>0&&!isNaN(value)?TAU*(Math.abs(value)/total):0}},{key:"getLabelAndValue",value:function(index){var meta=this._cachedMeta,chart=this.chart,labels=chart.data.labels||[],value=formatNumber(meta._parsed[index],chart.options.locale);return{label:labels[index]||"",value:value}}},{key:"getMaxBorderWidth",value:function(arcs){var i,ilen,meta,controller,options,max=0,chart=this.chart;if(!arcs)for(i=0,ilen=chart.data.datasets.length;i<ilen;++i)if(chart.isDatasetVisible(i)){arcs=(meta=chart.getDatasetMeta(i)).data,controller=meta.controller;break}if(!arcs)return 0;for(i=0,ilen=arcs.length;i<ilen;++i)"inner"!==(options=controller.resolveDataElementOptions(i)).borderAlign&&(max=Math.max(max,options.borderWidth||0,options.hoverBorderWidth||0));return max}},{key:"getMaxOffset",value:function(arcs){for(var max=0,i=0,ilen=arcs.length;i<ilen;++i){var options=this.resolveDataElementOptions(i);max=Math.max(max,options.offset||0,options.hoverOffset||0)}return max}},{key:"_getRingWeightOffset",value:function(datasetIndex){for(var ringWeightOffset=0,i=0;i<datasetIndex;++i)this.chart.isDatasetVisible(i)&&(ringWeightOffset+=this._getRingWeight(i));return ringWeightOffset}},{key:"_getRingWeight",value:function(datasetIndex){return Math.max(valueOrDefault(this.chart.data.datasets[datasetIndex].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),DoughnutController}(DatasetController);DoughnutController.id="doughnut",DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},DoughnutController.descriptors={_scriptable:function(name){return"spacing"!==name},_indexable:function(name){return"spacing"!==name}},DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){var pointStyle=chart.legend.options.labels.pointStyle;return data.labels.map((function(label,i){var style=chart.getDatasetMeta(0).controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,lineWidth:style.borderWidth,pointStyle:pointStyle,hidden:!chart.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,legendItem,legend){legend.chart.toggleDataVisibility(legendItem.index),legend.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(tooltipItem){var dataLabel=tooltipItem.label,value=": "+tooltipItem.formattedValue;return isArray(dataLabel)?(dataLabel=dataLabel.slice())[0]+=value:dataLabel+=value,dataLabel}}}}};var LineController=function(_DatasetController4){_inherits(LineController,_DatasetController4);var _super7=_createSuper(LineController);function LineController(){return _classCallCheck(this,LineController),_super7.apply(this,arguments)}return _createClass(LineController,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,_get2(_getPrototypeOf(LineController.prototype),"initialize",this).call(this)}},{key:"update",value:function(mode){var meta=this._cachedMeta,line=meta.dataset,_meta$data=meta.data,points=void 0===_meta$data?[]:_meta$data,_dataset=meta._dataset,animationsDisabled=this.chart._animationsDisabled,_getStartAndCountOfVi=function(meta,points,animationsDisabled){var pointCount=points.length,start=0,count=pointCount;if(meta._sorted){var iScale=meta.iScale,_parsed=meta._parsed,axis=iScale.axis,_iScale$getUserBounds=iScale.getUserBounds(),min=_iScale$getUserBounds.min,max=_iScale$getUserBounds.max,minDefined=_iScale$getUserBounds.minDefined,maxDefined=_iScale$getUserBounds.maxDefined;minDefined&&(start=_limitValue(Math.min(_lookupByKey(_parsed,iScale.axis,min).lo,animationsDisabled?pointCount:_lookupByKey(points,axis,iScale.getPixelForValue(min)).lo),0,pointCount-1)),count=maxDefined?_limitValue(Math.max(_lookupByKey(_parsed,iScale.axis,max).hi+1,animationsDisabled?0:_lookupByKey(points,axis,iScale.getPixelForValue(max)).hi+1),start,pointCount)-start:pointCount-start}return{start:start,count:count}}(meta,points,animationsDisabled),start=_getStartAndCountOfVi.start,count=_getStartAndCountOfVi.count;this._drawStart=start,this._drawCount=count,function(meta){var xScale=meta.xScale,yScale=meta.yScale,_scaleRanges=meta._scaleRanges,newRanges={xmin:xScale.min,xmax:xScale.max,ymin:yScale.min,ymax:yScale.max};if(!_scaleRanges)return meta._scaleRanges=newRanges,!0;var changed=_scaleRanges.xmin!==xScale.min||_scaleRanges.xmax!==xScale.max||_scaleRanges.ymin!==yScale.min||_scaleRanges.ymax!==yScale.max;return Object.assign(_scaleRanges,newRanges),changed}(meta)&&(start=0,count=points.length),line._chart=this.chart,line._datasetIndex=this.index,line._decimated=!!_dataset._decimated,line.points=points;var options=this.resolveDatasetElementOptions(mode);this.options.showLine||(options.borderWidth=0),options.segment=this.options.segment,this.updateElement(line,void 0,{animated:!animationsDisabled,options:options},mode),this.updateElements(points,start,count,mode)}},{key:"updateElements",value:function(points,start,count,mode){for(var reset="reset"===mode,_this$_cachedMeta3=this._cachedMeta,iScale=_this$_cachedMeta3.iScale,vScale=_this$_cachedMeta3.vScale,_stacked=_this$_cachedMeta3._stacked,_dataset=_this$_cachedMeta3._dataset,firstOpts=this.resolveDataElementOptions(start,mode),sharedOptions=this.getSharedOptions(firstOpts),includeOptions=this.includeOptions(mode,sharedOptions),iAxis=iScale.axis,vAxis=vScale.axis,_this$options10=this.options,spanGaps=_this$options10.spanGaps,segment=_this$options10.segment,maxGapLength=isNumber(spanGaps)?spanGaps:Number.POSITIVE_INFINITY,directUpdate=this.chart._animationsDisabled||reset||"none"===mode,prevParsed=start>0&&this.getParsed(start-1),i=start;i<start+count;++i){var point=points[i],parsed=this.getParsed(i),properties=directUpdate?point:{},nullData=isNullOrUndef(parsed[vAxis]),iPixel=properties[iAxis]=iScale.getPixelForValue(parsed[iAxis],i),vPixel=properties[vAxis]=reset||nullData?vScale.getBasePixel():vScale.getPixelForValue(_stacked?this.applyStack(vScale,parsed,_stacked):parsed[vAxis],i);properties.skip=isNaN(iPixel)||isNaN(vPixel)||nullData,properties.stop=i>0&&Math.abs(parsed[iAxis]-prevParsed[iAxis])>maxGapLength,segment&&(properties.parsed=parsed,properties.raw=_dataset.data[i]),includeOptions&&(properties.options=sharedOptions||this.resolveDataElementOptions(i,point.active?"active":mode)),directUpdate||this.updateElement(point,i,properties,mode),prevParsed=parsed}this.updateSharedOptions(sharedOptions,mode,firstOpts)}},{key:"getMaxOverflow",value:function(){var meta=this._cachedMeta,dataset=meta.dataset,border=dataset.options&&dataset.options.borderWidth||0,data=meta.data||[];if(!data.length)return border;var firstPoint=data[0].size(this.resolveDataElementOptions(0)),lastPoint=data[data.length-1].size(this.resolveDataElementOptions(data.length-1));return Math.max(border,firstPoint,lastPoint)/2}},{key:"draw",value:function(){var meta=this._cachedMeta;meta.dataset.updateControlPoints(this.chart.chartArea,meta.iScale.axis),_get2(_getPrototypeOf(LineController.prototype),"draw",this).call(this)}}]),LineController}(DatasetController);LineController.id="line",LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};var PolarAreaController=function(_DatasetController5){_inherits(PolarAreaController,_DatasetController5);var _super8=_createSuper(PolarAreaController);function PolarAreaController(chart,datasetIndex){var _this20;return _classCallCheck(this,PolarAreaController),(_this20=_super8.call(this,chart,datasetIndex)).innerRadius=void 0,_this20.outerRadius=void 0,_this20}return _createClass(PolarAreaController,[{key:"getLabelAndValue",value:function(index){var meta=this._cachedMeta,chart=this.chart,labels=chart.data.labels||[],value=formatNumber(meta._parsed[index].r,chart.options.locale);return{label:labels[index]||"",value:value}}},{key:"parseObjectData",value:function(meta,data,start,count){return _parseObjectDataRadialScale.bind(this)(meta,data,start,count)}},{key:"update",value:function(mode){var arcs=this._cachedMeta.data;this._updateRadius(),this.updateElements(arcs,0,arcs.length,mode)}},{key:"getMinMax",value:function(){var _this21=this,meta=this._cachedMeta,range={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return meta.data.forEach((function(element,index){var parsed=_this21.getParsed(index).r;!isNaN(parsed)&&_this21.chart.getDataVisibility(index)&&(parsed<range.min&&(range.min=parsed),parsed>range.max&&(range.max=parsed))})),range}},{key:"_updateRadius",value:function(){var chart=this.chart,chartArea=chart.chartArea,opts=chart.options,minSize=Math.min(chartArea.right-chartArea.left,chartArea.bottom-chartArea.top),outerRadius=Math.max(minSize/2,0),radiusLength=(outerRadius-Math.max(opts.cutoutPercentage?outerRadius/100*opts.cutoutPercentage:1,0))/chart.getVisibleDatasetCount();this.outerRadius=outerRadius-radiusLength*this.index,this.innerRadius=this.outerRadius-radiusLength}},{key:"updateElements",value:function(arcs,start,count,mode){var i,reset="reset"===mode,chart=this.chart,animationOpts=chart.options.animation,scale=this._cachedMeta.rScale,centerX=scale.xCenter,centerY=scale.yCenter,datasetStartAngle=scale.getIndexAngle(0)-.5*PI,angle=datasetStartAngle,defaultAngle=360/this.countVisibleElements();for(i=0;i<start;++i)angle+=this._computeAngle(i,mode,defaultAngle);for(i=start;i<start+count;i++){var arc=arcs[i],startAngle=angle,endAngle=angle+this._computeAngle(i,mode,defaultAngle),outerRadius=chart.getDataVisibility(i)?scale.getDistanceFromCenterForValue(this.getParsed(i).r):0;angle=endAngle,reset&&(animationOpts.animateScale&&(outerRadius=0),animationOpts.animateRotate&&(startAngle=endAngle=datasetStartAngle));var properties={x:centerX,y:centerY,innerRadius:0,outerRadius:outerRadius,startAngle:startAngle,endAngle:endAngle,options:this.resolveDataElementOptions(i,arc.active?"active":mode)};this.updateElement(arc,i,properties,mode)}}},{key:"countVisibleElements",value:function(){var _this22=this,meta=this._cachedMeta,count=0;return meta.data.forEach((function(element,index){!isNaN(_this22.getParsed(index).r)&&_this22.chart.getDataVisibility(index)&&count++})),count}},{key:"_computeAngle",value:function(index,mode,defaultAngle){return this.chart.getDataVisibility(index)?toRadians(this.resolveDataElementOptions(index,mode).angle||defaultAngle):0}}]),PolarAreaController}(DatasetController);PolarAreaController.id="polarArea",PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(chart){var data=chart.data;if(data.labels.length&&data.datasets.length){var pointStyle=chart.legend.options.labels.pointStyle;return data.labels.map((function(label,i){var style=chart.getDatasetMeta(0).controller.getStyle(i);return{text:label,fillStyle:style.backgroundColor,strokeStyle:style.borderColor,lineWidth:style.borderWidth,pointStyle:pointStyle,hidden:!chart.getDataVisibility(i),index:i}}))}return[]}},onClick:function(e,legendItem,legend){legend.chart.toggleDataVisibility(legendItem.index),legend.chart.update()}},tooltip:{callbacks:{title:function(){return""},label:function(context){return context.chart.data.labels[context.dataIndex]+": "+context.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};var PieController=function(_DoughnutController){_inherits(PieController,_DoughnutController);var _super9=_createSuper(PieController);function PieController(){return _classCallCheck(this,PieController),_super9.apply(this,arguments)}return _createClass(PieController)}(DoughnutController);PieController.id="pie",PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};var RadarController=function(_DatasetController6){_inherits(RadarController,_DatasetController6);var _super10=_createSuper(RadarController);function RadarController(){return _classCallCheck(this,RadarController),_super10.apply(this,arguments)}return _createClass(RadarController,[{key:"getLabelAndValue",value:function(index){var vScale=this._cachedMeta.vScale,parsed=this.getParsed(index);return{label:vScale.getLabels()[index],value:""+vScale.getLabelForValue(parsed[vScale.axis])}}},{key:"parseObjectData",value:function(meta,data,start,count){return _parseObjectDataRadialScale.bind(this)(meta,data,start,count)}},{key:"update",value:function(mode){var meta=this._cachedMeta,line=meta.dataset,points=meta.data||[],labels=meta.iScale.getLabels();if(line.points=points,"resize"!==mode){var options=this.resolveDatasetElementOptions(mode);this.options.showLine||(options.borderWidth=0);var properties={_loop:!0,_fullLoop:labels.length===points.length,options:options};this.updateElement(line,void 0,properties,mode)}this.updateElements(points,0,points.length,mode)}},{key:"updateElements",value:function(points,start,count,mode){for(var scale=this._cachedMeta.rScale,reset="reset"===mode,i=start;i<start+count;i++){var point=points[i],options=this.resolveDataElementOptions(i,point.active?"active":mode),pointPosition=scale.getPointPositionForValue(i,this.getParsed(i).r),x=reset?scale.xCenter:pointPosition.x,y=reset?scale.yCenter:pointPosition.y,properties={x:x,y:y,angle:pointPosition.angle,skip:isNaN(x)||isNaN(y),options:options};this.updateElement(point,i,properties,mode)}}}]),RadarController}(DatasetController);RadarController.id="radar",RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};var ScatterController=function(_LineController){_inherits(ScatterController,_LineController);var _super11=_createSuper(ScatterController);function ScatterController(){return _classCallCheck(this,ScatterController),_super11.apply(this,arguments)}return _createClass(ScatterController)}(LineController);ScatterController.id="scatter",ScatterController.defaults={showLine:!1,fill:!1},ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:function(){return""},label:function(item){return"("+item.label+", "+item.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=Object.freeze({__proto__:null,BarController:BarController,BubbleController:BubbleController,DoughnutController:DoughnutController,LineController:LineController,PolarAreaController:PolarAreaController,PieController:PieController,RadarController:RadarController,ScatterController:ScatterController});function clipArc(ctx,element,endAngle){var startAngle=element.startAngle,pixelMargin=element.pixelMargin,x=element.x,y=element.y,outerRadius=element.outerRadius,innerRadius=element.innerRadius,angleMargin=pixelMargin/outerRadius;ctx.beginPath(),ctx.arc(x,y,outerRadius,startAngle-angleMargin,endAngle+angleMargin),innerRadius>pixelMargin?(angleMargin=pixelMargin/innerRadius,ctx.arc(x,y,innerRadius,endAngle+angleMargin,startAngle-angleMargin,!0)):ctx.arc(x,y,pixelMargin,endAngle+HALF_PI,startAngle-HALF_PI),ctx.closePath(),ctx.clip()}function parseBorderRadius$1(arc,innerRadius,outerRadius,angleDelta){var o=_readValueToProps(arc.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),halfThickness=(outerRadius-innerRadius)/2,innerLimit=Math.min(halfThickness,angleDelta*innerRadius/2),computeOuterLimit=function(val){var outerArcLimit=(outerRadius-Math.min(halfThickness,val))*angleDelta/2;return _limitValue(val,0,Math.min(halfThickness,outerArcLimit))};return{outerStart:computeOuterLimit(o.outerStart),outerEnd:computeOuterLimit(o.outerEnd),innerStart:_limitValue(o.innerStart,0,innerLimit),innerEnd:_limitValue(o.innerEnd,0,innerLimit)}}function rThetaToXY(r,theta,x,y){return{x:x+r*Math.cos(theta),y:y+r*Math.sin(theta)}}function pathArc(ctx,element,offset,spacing,end){var x=element.x,y=element.y,start=element.startAngle,pixelMargin=element.pixelMargin,innerR=element.innerRadius,outerRadius=Math.max(element.outerRadius+spacing+offset-pixelMargin,0),innerRadius=innerR>0?innerR+spacing+offset+pixelMargin:0,spacingOffset=0,alpha=end-start;if(spacing){var avNogSpacingRadius=((innerR>0?innerR-spacing:0)+(outerRadius>0?outerRadius-spacing:0))/2;spacingOffset=(alpha-(0!==avNogSpacingRadius?alpha*avNogSpacingRadius/(avNogSpacingRadius+spacing):alpha))/2}var angleOffset=(alpha-Math.max(.001,alpha*outerRadius-offset/PI)/outerRadius)/2,startAngle=start+angleOffset+spacingOffset,endAngle=end-angleOffset-spacingOffset,_parseBorderRadius$=parseBorderRadius$1(element,innerRadius,outerRadius,endAngle-startAngle),outerStart=_parseBorderRadius$.outerStart,outerEnd=_parseBorderRadius$.outerEnd,innerStart=_parseBorderRadius$.innerStart,innerEnd=_parseBorderRadius$.innerEnd,outerStartAdjustedRadius=outerRadius-outerStart,outerEndAdjustedRadius=outerRadius-outerEnd,outerStartAdjustedAngle=startAngle+outerStart/outerStartAdjustedRadius,outerEndAdjustedAngle=endAngle-outerEnd/outerEndAdjustedRadius,innerStartAdjustedRadius=innerRadius+innerStart,innerEndAdjustedRadius=innerRadius+innerEnd,innerStartAdjustedAngle=startAngle+innerStart/innerStartAdjustedRadius,innerEndAdjustedAngle=endAngle-innerEnd/innerEndAdjustedRadius;if(ctx.beginPath(),ctx.arc(x,y,outerRadius,outerStartAdjustedAngle,outerEndAdjustedAngle),outerEnd>0){var pCenter=rThetaToXY(outerEndAdjustedRadius,outerEndAdjustedAngle,x,y);ctx.arc(pCenter.x,pCenter.y,outerEnd,outerEndAdjustedAngle,endAngle+HALF_PI)}var p4=rThetaToXY(innerEndAdjustedRadius,endAngle,x,y);if(ctx.lineTo(p4.x,p4.y),innerEnd>0){var _pCenter=rThetaToXY(innerEndAdjustedRadius,innerEndAdjustedAngle,x,y);ctx.arc(_pCenter.x,_pCenter.y,innerEnd,endAngle+HALF_PI,innerEndAdjustedAngle+Math.PI)}if(ctx.arc(x,y,innerRadius,endAngle-innerEnd/innerRadius,startAngle+innerStart/innerRadius,!0),innerStart>0){var _pCenter2=rThetaToXY(innerStartAdjustedRadius,innerStartAdjustedAngle,x,y);ctx.arc(_pCenter2.x,_pCenter2.y,innerStart,innerStartAdjustedAngle+Math.PI,startAngle-HALF_PI)}var p8=rThetaToXY(outerStartAdjustedRadius,startAngle,x,y);if(ctx.lineTo(p8.x,p8.y),outerStart>0){var _pCenter3=rThetaToXY(outerStartAdjustedRadius,outerStartAdjustedAngle,x,y);ctx.arc(_pCenter3.x,_pCenter3.y,outerStart,startAngle-HALF_PI,outerStartAdjustedAngle)}ctx.closePath()}function drawBorder(ctx,element,offset,spacing,endAngle){var options=element.options,borderWidth=options.borderWidth,borderJoinStyle=options.borderJoinStyle,inner="inner"===options.borderAlign;borderWidth&&(inner?(ctx.lineWidth=2*borderWidth,ctx.lineJoin=borderJoinStyle||"round"):(ctx.lineWidth=borderWidth,ctx.lineJoin=borderJoinStyle||"bevel"),element.fullCircles&&function(ctx,element,inner){var i,x=element.x,y=element.y,startAngle=element.startAngle,pixelMargin=element.pixelMargin,fullCircles=element.fullCircles,outerRadius=Math.max(element.outerRadius-pixelMargin,0),innerRadius=element.innerRadius+pixelMargin;for(inner&&clipArc(ctx,element,startAngle+TAU),ctx.beginPath(),ctx.arc(x,y,innerRadius,startAngle+TAU,startAngle,!0),i=0;i<fullCircles;++i)ctx.stroke();for(ctx.beginPath(),ctx.arc(x,y,outerRadius,startAngle,startAngle+TAU),i=0;i<fullCircles;++i)ctx.stroke()}(ctx,element,inner),inner&&clipArc(ctx,element,endAngle),pathArc(ctx,element,offset,spacing,endAngle),ctx.stroke())}var ArcElement=function(_Element2){_inherits(ArcElement,_Element2);var _super12=_createSuper(ArcElement);function ArcElement(cfg){var _this23;return _classCallCheck(this,ArcElement),(_this23=_super12.call(this)).options=void 0,_this23.circumference=void 0,_this23.startAngle=void 0,_this23.endAngle=void 0,_this23.innerRadius=void 0,_this23.outerRadius=void 0,_this23.pixelMargin=0,_this23.fullCircles=0,cfg&&Object.assign(_assertThisInitialized(_this23),cfg),_this23}return _createClass(ArcElement,[{key:"inRange",value:function(chartX,chartY,useFinalPosition){var _getAngleFromPoint2=getAngleFromPoint(this.getProps(["x","y"],useFinalPosition),{x:chartX,y:chartY}),angle=_getAngleFromPoint2.angle,distance=_getAngleFromPoint2.distance,_this$getProps2=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],useFinalPosition),startAngle=_this$getProps2.startAngle,endAngle=_this$getProps2.endAngle,innerRadius=_this$getProps2.innerRadius,outerRadius=_this$getProps2.outerRadius,circumference=_this$getProps2.circumference,rAdjust=this.options.spacing/2,betweenAngles=valueOrDefault(circumference,endAngle-startAngle)>=TAU||_angleBetween(angle,startAngle,endAngle),withinRadius=_isBetween(distance,innerRadius+rAdjust,outerRadius+rAdjust);return betweenAngles&&withinRadius}},{key:"getCenterPoint",value:function(useFinalPosition){var _this$getProps3=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],useFinalPosition),x=_this$getProps3.x,y=_this$getProps3.y,startAngle=_this$getProps3.startAngle,endAngle=_this$getProps3.endAngle,innerRadius=_this$getProps3.innerRadius,outerRadius=_this$getProps3.outerRadius,_this$options11=this.options,offset=_this$options11.offset,halfAngle=(startAngle+endAngle)/2,halfRadius=(innerRadius+outerRadius+_this$options11.spacing+offset)/2;return{x:x+Math.cos(halfAngle)*halfRadius,y:y+Math.sin(halfAngle)*halfRadius}}},{key:"tooltipPosition",value:function(useFinalPosition){return this.getCenterPoint(useFinalPosition)}},{key:"draw",value:function(ctx){var options=this.options,circumference=this.circumference,offset=(options.offset||0)/2,spacing=(options.spacing||0)/2;if(this.pixelMargin="inner"===options.borderAlign?.33:0,this.fullCircles=circumference>TAU?Math.floor(circumference/TAU):0,!(0===circumference||this.innerRadius<0||this.outerRadius<0)){ctx.save();var radiusOffset=0;if(offset){radiusOffset=offset/2;var halfAngle=(this.startAngle+this.endAngle)/2;ctx.translate(Math.cos(halfAngle)*radiusOffset,Math.sin(halfAngle)*radiusOffset),this.circumference>=PI&&(radiusOffset=offset)}ctx.fillStyle=options.backgroundColor,ctx.strokeStyle=options.borderColor;var endAngle=function(ctx,element,offset,spacing){var fullCircles=element.fullCircles,startAngle=element.startAngle,circumference=element.circumference,endAngle=element.endAngle;if(fullCircles){pathArc(ctx,element,offset,spacing,startAngle+TAU);for(var i=0;i<fullCircles;++i)ctx.fill();isNaN(circumference)||(endAngle=startAngle+circumference%TAU,circumference%TAU==0&&(endAngle+=TAU))}return pathArc(ctx,element,offset,spacing,endAngle),ctx.fill(),endAngle}(ctx,this,radiusOffset,spacing);drawBorder(ctx,this,radiusOffset,spacing,endAngle),ctx.restore()}}}]),ArcElement}(Element);function setStyle(ctx,options){var style=arguments.length>2&&void 0!==arguments[2]?arguments[2]:options;ctx.lineCap=valueOrDefault(style.borderCapStyle,options.borderCapStyle),ctx.setLineDash(valueOrDefault(style.borderDash,options.borderDash)),ctx.lineDashOffset=valueOrDefault(style.borderDashOffset,options.borderDashOffset),ctx.lineJoin=valueOrDefault(style.borderJoinStyle,options.borderJoinStyle),ctx.lineWidth=valueOrDefault(style.borderWidth,options.borderWidth),ctx.strokeStyle=valueOrDefault(style.borderColor,options.borderColor)}function lineTo(ctx,previous,target){ctx.lineTo(target.x,target.y)}function pathVars(points,segment){var params=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},count=points.length,_params$start=params.start,paramsStart=void 0===_params$start?0:_params$start,_params$end=params.end,paramsEnd=void 0===_params$end?count-1:_params$end,segmentStart=segment.start,segmentEnd=segment.end,start=Math.max(paramsStart,segmentStart),end=Math.min(paramsEnd,segmentEnd),outside=paramsStart<segmentStart&&paramsEnd<segmentStart||paramsStart>segmentEnd&&paramsEnd>segmentEnd;return{count:count,start:start,loop:segment.loop,ilen:end<start&&!outside?count+end-start:end-start}}function pathSegment(ctx,line,segment,params){var i,point,prev,points=line.points,options=line.options,_pathVars=pathVars(points,segment,params),count=_pathVars.count,start=_pathVars.start,loop=_pathVars.loop,ilen=_pathVars.ilen,lineMethod=function(options){return options.stepped?_steppedLineTo:options.tension||"monotone"===options.cubicInterpolationMode?_bezierCurveTo:lineTo}(options),_ref4=params||{},_ref4$move=_ref4.move,move=void 0===_ref4$move||_ref4$move,reverse=_ref4.reverse;for(i=0;i<=ilen;++i)(point=points[(start+(reverse?ilen-i:i))%count]).skip||(move?(ctx.moveTo(point.x,point.y),move=!1):lineMethod(ctx,prev,point,reverse,options.stepped),prev=point);return loop&&lineMethod(ctx,prev,point=points[(start+(reverse?ilen:0))%count],reverse,options.stepped),!!loop}function fastPathSegment(ctx,line,segment,params){var i,point,prevX,minY,maxY,lastY,points=line.points,_pathVars2=pathVars(points,segment,params),count=_pathVars2.count,start=_pathVars2.start,ilen=_pathVars2.ilen,_ref5=params||{},_ref5$move=_ref5.move,move=void 0===_ref5$move||_ref5$move,reverse=_ref5.reverse,avgX=0,countX=0,pointIndex=function(index){return(start+(reverse?ilen-index:index))%count},drawX=function(){minY!==maxY&&(ctx.lineTo(avgX,maxY),ctx.lineTo(avgX,minY),ctx.lineTo(avgX,lastY))};for(move&&(point=points[pointIndex(0)],ctx.moveTo(point.x,point.y)),i=0;i<=ilen;++i)if(!(point=points[pointIndex(i)]).skip){var x=point.x,y=point.y,truncX=0|x;truncX===prevX?(y<minY?minY=y:y>maxY&&(maxY=y),avgX=(countX*avgX+x)/++countX):(drawX(),ctx.lineTo(x,y),prevX=truncX,countX=0,minY=maxY=y),lastY=y}drawX()}function _getSegmentMethod(line){var opts=line.options,borderDash=opts.borderDash&&opts.borderDash.length;return line._decimated||line._loop||opts.tension||"monotone"===opts.cubicInterpolationMode||opts.stepped||borderDash?pathSegment:fastPathSegment}ArcElement.id="arc",ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};var usePath2D="function"==typeof Path2D;function _draw(ctx,line,start,count){usePath2D&&!line.options.segment?function(ctx,line,start,count){var path=line._path;path||(path=line._path=new Path2D,line.path(path,start,count)&&path.closePath()),setStyle(ctx,line.options),ctx.stroke(path)}(ctx,line,start,count):function(ctx,line,start,count){var _step23,segments=line.segments,options=line.options,segmentMethod=_getSegmentMethod(line),_iterator23=_createForOfIteratorHelper(segments);try{for(_iterator23.s();!(_step23=_iterator23.n()).done;){var segment=_step23.value;setStyle(ctx,options,segment.style),ctx.beginPath(),segmentMethod(ctx,line,segment,{start:start,end:start+count-1})&&ctx.closePath(),ctx.stroke()}}catch(err){_iterator23.e(err)}finally{_iterator23.f()}}(ctx,line,start,count)}var LineElement=function(_Element3){_inherits(LineElement,_Element3);var _super13=_createSuper(LineElement);function LineElement(cfg){var _this24;return _classCallCheck(this,LineElement),(_this24=_super13.call(this)).animated=!0,_this24.options=void 0,_this24._chart=void 0,_this24._loop=void 0,_this24._fullLoop=void 0,_this24._path=void 0,_this24._points=void 0,_this24._segments=void 0,_this24._decimated=!1,_this24._pointsUpdated=!1,_this24._datasetIndex=void 0,cfg&&Object.assign(_assertThisInitialized(_this24),cfg),_this24}return _createClass(LineElement,[{key:"updateControlPoints",value:function(chartArea,indexAxis){var options=this.options;if((options.tension||"monotone"===options.cubicInterpolationMode)&&!options.stepped&&!this._pointsUpdated){var loop=options.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,options,chartArea,loop,indexAxis),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(points){this._points=points,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}},{key:"first",value:function(){var segments=this.segments,points=this.points;return segments.length&&points[segments[0].start]}},{key:"last",value:function(){var segments=this.segments,points=this.points,count=segments.length;return count&&points[segments[count-1].end]}},{key:"interpolate",value:function(point,property){var options=this.options,value=point[property],points=this.points,segments=_boundSegments(this,{property:property,start:value,end:value});if(segments.length){var i,ilen,result=[],_interpolate=function(options){return options.stepped?_steppedInterpolation:options.tension||"monotone"===options.cubicInterpolationMode?_bezierInterpolation:_pointInLine}(options);for(i=0,ilen=segments.length;i<ilen;++i){var _segments$i=segments[i],start=_segments$i.start,end=_segments$i.end,p1=points[start],p2=points[end];if(p1!==p2){var interpolated=_interpolate(p1,p2,Math.abs((value-p1[property])/(p2[property]-p1[property])),options.stepped);interpolated[property]=point[property],result.push(interpolated)}else result.push(p1)}return 1===result.length?result[0]:result}}},{key:"pathSegment",value:function(ctx,segment,params){return _getSegmentMethod(this)(ctx,this,segment,params)}},{key:"path",value:function(ctx,start,count){var segments=this.segments,segmentMethod=_getSegmentMethod(this),loop=this._loop;start=start||0,count=count||this.points.length-start;var _step24,_iterator24=_createForOfIteratorHelper(segments);try{for(_iterator24.s();!(_step24=_iterator24.n()).done;)loop&=segmentMethod(ctx,this,_step24.value,{start:start,end:start+count-1})}catch(err){_iterator24.e(err)}finally{_iterator24.f()}return!!loop}},{key:"draw",value:function(ctx,chartArea,start,count){var options=this.options||{};(this.points||[]).length&&options.borderWidth&&(ctx.save(),_draw(ctx,this,start,count),ctx.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),LineElement}(Element);function inRange$1(el,pos,axis,useFinalPosition){var options=el.options,value=el.getProps([axis],useFinalPosition)[axis];return Math.abs(pos-value)<options.radius+options.hitRadius}LineElement.id="line",LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},LineElement.descriptors={_scriptable:!0,_indexable:function(name){return"borderDash"!==name&&"fill"!==name}};var PointElement=function(_Element4){_inherits(PointElement,_Element4);var _super14=_createSuper(PointElement);function PointElement(cfg){var _this25;return _classCallCheck(this,PointElement),(_this25=_super14.call(this)).options=void 0,_this25.parsed=void 0,_this25.skip=void 0,_this25.stop=void 0,cfg&&Object.assign(_assertThisInitialized(_this25),cfg),_this25}return _createClass(PointElement,[{key:"inRange",value:function(mouseX,mouseY,useFinalPosition){var options=this.options,_this$getProps4=this.getProps(["x","y"],useFinalPosition),x=_this$getProps4.x,y=_this$getProps4.y;return Math.pow(mouseX-x,2)+Math.pow(mouseY-y,2)<Math.pow(options.hitRadius+options.radius,2)}},{key:"inXRange",value:function(mouseX,useFinalPosition){return inRange$1(this,mouseX,"x",useFinalPosition)}},{key:"inYRange",value:function(mouseY,useFinalPosition){return inRange$1(this,mouseY,"y",useFinalPosition)}},{key:"getCenterPoint",value:function(useFinalPosition){var _this$getProps5=this.getProps(["x","y"],useFinalPosition);return{x:_this$getProps5.x,y:_this$getProps5.y}}},{key:"size",value:function(options){var radius=(options=options||this.options||{}).radius||0;return 2*((radius=Math.max(radius,radius&&options.hoverRadius||0))+(radius&&options.borderWidth||0))}},{key:"draw",value:function(ctx,area){var options=this.options;this.skip||options.radius<.1||!_isPointInArea(this,area,this.size(options)/2)||(ctx.strokeStyle=options.borderColor,ctx.lineWidth=options.borderWidth,ctx.fillStyle=options.backgroundColor,drawPoint(ctx,options,this.x,this.y))}},{key:"getRange",value:function(){var options=this.options||{};return options.radius+options.hitRadius}}]),PointElement}(Element);function getBarBounds(bar,useFinalPosition){var left,right,top,bottom,half,_bar$getProps=bar.getProps(["x","y","base","width","height"],useFinalPosition),x=_bar$getProps.x,y=_bar$getProps.y,base=_bar$getProps.base,width=_bar$getProps.width,height=_bar$getProps.height;return bar.horizontal?(half=height/2,left=Math.min(x,base),right=Math.max(x,base),top=y-half,bottom=y+half):(left=x-(half=width/2),right=x+half,top=Math.min(y,base),bottom=Math.max(y,base)),{left:left,top:top,right:right,bottom:bottom}}function skipOrLimit(skip,value,min,max){return skip?0:_limitValue(value,min,max)}function boundingRects(bar){var bounds=getBarBounds(bar),width=bounds.right-bounds.left,height=bounds.bottom-bounds.top,border=function(bar,maxW,maxH){var value=bar.options.borderWidth,skip=bar.borderSkipped,o=toTRBL(value);return{t:skipOrLimit(skip.top,o.top,0,maxH),r:skipOrLimit(skip.right,o.right,0,maxW),b:skipOrLimit(skip.bottom,o.bottom,0,maxH),l:skipOrLimit(skip.left,o.left,0,maxW)}}(bar,width/2,height/2),radius=function(bar,maxW,maxH){var enableBorderRadius=bar.getProps(["enableBorderRadius"]).enableBorderRadius,value=bar.options.borderRadius,o=toTRBLCorners(value),maxR=Math.min(maxW,maxH),skip=bar.borderSkipped,enableBorder=enableBorderRadius||isObject(value);return{topLeft:skipOrLimit(!enableBorder||skip.top||skip.left,o.topLeft,0,maxR),topRight:skipOrLimit(!enableBorder||skip.top||skip.right,o.topRight,0,maxR),bottomLeft:skipOrLimit(!enableBorder||skip.bottom||skip.left,o.bottomLeft,0,maxR),bottomRight:skipOrLimit(!enableBorder||skip.bottom||skip.right,o.bottomRight,0,maxR)}}(bar,width/2,height/2);return{outer:{x:bounds.left,y:bounds.top,w:width,h:height,radius:radius},inner:{x:bounds.left+border.l,y:bounds.top+border.t,w:width-border.l-border.r,h:height-border.t-border.b,radius:{topLeft:Math.max(0,radius.topLeft-Math.max(border.t,border.l)),topRight:Math.max(0,radius.topRight-Math.max(border.t,border.r)),bottomLeft:Math.max(0,radius.bottomLeft-Math.max(border.b,border.l)),bottomRight:Math.max(0,radius.bottomRight-Math.max(border.b,border.r))}}}}function _inRange(bar,x,y,useFinalPosition){var skipX=null===x,skipY=null===y,bounds=bar&&!(skipX&&skipY)&&getBarBounds(bar,useFinalPosition);return bounds&&(skipX||_isBetween(x,bounds.left,bounds.right))&&(skipY||_isBetween(y,bounds.top,bounds.bottom))}function addNormalRectPath(ctx,rect){ctx.rect(rect.x,rect.y,rect.w,rect.h)}function inflateRect(rect,amount){var refRect=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},x=rect.x!==refRect.x?-amount:0,y=rect.y!==refRect.y?-amount:0,w=(rect.x+rect.w!==refRect.x+refRect.w?amount:0)-x,h=(rect.y+rect.h!==refRect.y+refRect.h?amount:0)-y;return{x:rect.x+x,y:rect.y+y,w:rect.w+w,h:rect.h+h,radius:rect.radius}}PointElement.id="point",PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var BarElement=function(_Element5){_inherits(BarElement,_Element5);var _super15=_createSuper(BarElement);function BarElement(cfg){var _this26;return _classCallCheck(this,BarElement),(_this26=_super15.call(this)).options=void 0,_this26.horizontal=void 0,_this26.base=void 0,_this26.width=void 0,_this26.height=void 0,_this26.inflateAmount=void 0,cfg&&Object.assign(_assertThisInitialized(_this26),cfg),_this26}return _createClass(BarElement,[{key:"draw",value:function(ctx){var radius,inflateAmount=this.inflateAmount,_this$options12=this.options,borderColor=_this$options12.borderColor,backgroundColor=_this$options12.backgroundColor,_boundingRects=boundingRects(this),inner=_boundingRects.inner,outer=_boundingRects.outer,addRectPath=(radius=outer.radius).topLeft||radius.topRight||radius.bottomLeft||radius.bottomRight?addRoundedRectPath:addNormalRectPath;ctx.save(),outer.w===inner.w&&outer.h===inner.h||(ctx.beginPath(),addRectPath(ctx,inflateRect(outer,inflateAmount,inner)),ctx.clip(),addRectPath(ctx,inflateRect(inner,-inflateAmount,outer)),ctx.fillStyle=borderColor,ctx.fill("evenodd")),ctx.beginPath(),addRectPath(ctx,inflateRect(inner,inflateAmount)),ctx.fillStyle=backgroundColor,ctx.fill(),ctx.restore()}},{key:"inRange",value:function(mouseX,mouseY,useFinalPosition){return _inRange(this,mouseX,mouseY,useFinalPosition)}},{key:"inXRange",value:function(mouseX,useFinalPosition){return _inRange(this,mouseX,null,useFinalPosition)}},{key:"inYRange",value:function(mouseY,useFinalPosition){return _inRange(this,null,mouseY,useFinalPosition)}},{key:"getCenterPoint",value:function(useFinalPosition){var _this$getProps6=this.getProps(["x","y","base","horizontal"],useFinalPosition),x=_this$getProps6.x,y=_this$getProps6.y,base=_this$getProps6.base,horizontal=_this$getProps6.horizontal;return{x:horizontal?(x+base)/2:x,y:horizontal?y:(y+base)/2}}},{key:"getRange",value:function(axis){return"x"===axis?this.width/2:this.height/2}}]),BarElement}(Element);BarElement.id="bar",BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=Object.freeze({__proto__:null,ArcElement:ArcElement,LineElement:LineElement,PointElement:PointElement,BarElement:BarElement});function cleanDecimatedDataset(dataset){if(dataset._decimated){var data=dataset._data;delete dataset._decimated,delete dataset._data,Object.defineProperty(dataset,"data",{value:data})}}function cleanDecimatedData(chart){chart.data.datasets.forEach((function(dataset){cleanDecimatedDataset(dataset)}))}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:function(chart,args,options){if(options.enabled){var availableWidth=chart.width;chart.data.datasets.forEach((function(dataset,datasetIndex){var _data=dataset._data,indexAxis=dataset.indexAxis,meta=chart.getDatasetMeta(datasetIndex),data=_data||dataset.data;if("y"!==resolve([indexAxis,chart.options.indexAxis])&&meta.controller.supportsDecimation){var xAxis=chart.scales[meta.xAxisID];if(("linear"===xAxis.type||"time"===xAxis.type)&&!chart.options.parsing){var _getStartAndCountOfVi2=function(meta,points){var pointCount=points.length,start=0,iScale=meta.iScale,_iScale$getUserBounds2=iScale.getUserBounds(),min=_iScale$getUserBounds2.min,max=_iScale$getUserBounds2.max,minDefined=_iScale$getUserBounds2.minDefined,maxDefined=_iScale$getUserBounds2.maxDefined;return minDefined&&(start=_limitValue(_lookupByKey(points,iScale.axis,min).lo,0,pointCount-1)),{start:start,count:maxDefined?_limitValue(_lookupByKey(points,iScale.axis,max).hi+1,start,pointCount)-start:pointCount-start}}(meta,data),start=_getStartAndCountOfVi2.start,count=_getStartAndCountOfVi2.count;if(count<=(options.threshold||4*availableWidth))cleanDecimatedDataset(dataset);else{var decimated;switch(isNullOrUndef(_data)&&(dataset._data=data,delete dataset.data,Object.defineProperty(dataset,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(d){this._data=d}})),options.algorithm){case"lttb":decimated=function(data,start,count,availableWidth,options){var samples=options.samples||availableWidth;if(samples>=count)return data.slice(start,start+count);var i,maxAreaPoint,maxArea,area,nextA,decimated=[],bucketWidth=(count-2)/(samples-2),sampledIndex=0,endIndex=start+count-1,a=start;for(decimated[sampledIndex++]=data[a],i=0;i<samples-2;i++){var avgX=0,avgY=0,j=void 0,avgRangeStart=Math.floor((i+1)*bucketWidth)+1+start,avgRangeEnd=Math.min(Math.floor((i+2)*bucketWidth)+1,count)+start,avgRangeLength=avgRangeEnd-avgRangeStart;for(j=avgRangeStart;j<avgRangeEnd;j++)avgX+=data[j].x,avgY+=data[j].y;avgX/=avgRangeLength,avgY/=avgRangeLength;var rangeOffs=Math.floor(i*bucketWidth)+1+start,rangeTo=Math.min(Math.floor((i+1)*bucketWidth)+1,count)+start,_data$a=data[a],pointAx=_data$a.x,pointAy=_data$a.y;for(maxArea=area=-1,j=rangeOffs;j<rangeTo;j++)(area=.5*Math.abs((pointAx-avgX)*(data[j].y-pointAy)-(pointAx-data[j].x)*(avgY-pointAy)))>maxArea&&(maxArea=area,maxAreaPoint=data[j],nextA=j);decimated[sampledIndex++]=maxAreaPoint,a=nextA}return decimated[sampledIndex++]=data[endIndex],decimated}(data,start,count,availableWidth,options);break;case"min-max":decimated=function(data,start,count,availableWidth){var i,point,x,y,prevX,minIndex,maxIndex,startIndex,minY,maxY,avgX=0,countX=0,decimated=[],endIndex=start+count-1,xMin=data[start].x,dx=data[endIndex].x-xMin;for(i=start;i<start+count;++i){x=((point=data[i]).x-xMin)/dx*availableWidth,y=point.y;var truncX=0|x;if(truncX===prevX)y<minY?(minY=y,minIndex=i):y>maxY&&(maxY=y,maxIndex=i),avgX=(countX*avgX+point.x)/++countX;else{var lastIndex=i-1;if(!isNullOrUndef(minIndex)&&!isNullOrUndef(maxIndex)){var intermediateIndex1=Math.min(minIndex,maxIndex),intermediateIndex2=Math.max(minIndex,maxIndex);intermediateIndex1!==startIndex&&intermediateIndex1!==lastIndex&&decimated.push(_objectSpread(_objectSpread({},data[intermediateIndex1]),{},{x:avgX})),intermediateIndex2!==startIndex&&intermediateIndex2!==lastIndex&&decimated.push(_objectSpread(_objectSpread({},data[intermediateIndex2]),{},{x:avgX}))}i>0&&lastIndex!==startIndex&&decimated.push(data[lastIndex]),decimated.push(point),prevX=truncX,countX=0,minY=maxY=y,minIndex=maxIndex=startIndex=i}}return decimated}(data,start,count,availableWidth);break;default:throw new Error("Unsupported decimation algorithm '".concat(options.algorithm,"'"))}dataset._decimated=decimated}}}}))}else cleanDecimatedData(chart)},destroy:function(chart){cleanDecimatedData(chart)}};function _getBounds(property,first,last,loop){if(!loop){var start=first[property],end=last[property];return"angle"===property&&(start=_normalizeAngle(start),end=_normalizeAngle(end)),{property:property,start:start,end:end}}}function _findSegmentEnd(start,end,points){for(;end>start;end--){var point=points[end];if(!isNaN(point.x)&&!isNaN(point.y))break}return end}function _getEdge(a,b,prop,fn){return a&&b?fn(a[prop],b[prop]):a?a[prop]:b?b[prop]:0}function _createBoundaryLine(boundary,line){var points=[],_loop=!1;return isArray(boundary)?(_loop=!0,points=boundary):points=function(boundary,line){var _ref6=boundary||{},_ref6$x=_ref6.x,x=void 0===_ref6$x?null:_ref6$x,_ref6$y=_ref6.y,y=void 0===_ref6$y?null:_ref6$y,linePoints=line.points,points=[];return line.segments.forEach((function(_ref7){var start=_ref7.start,end=_ref7.end;end=_findSegmentEnd(start,end,linePoints);var first=linePoints[start],last=linePoints[end];null!==y?(points.push({x:first.x,y:y}),points.push({x:last.x,y:y})):null!==x&&(points.push({x:x,y:first.y}),points.push({x:x,y:last.y}))})),points}(boundary,line),points.length?new LineElement({points:points,options:{tension:0},_loop:_loop,_fullLoop:_loop}):null}function _resolveTarget(sources,index,propagate){var target,fill=sources[index].fill,visited=[index];if(!propagate)return fill;for(;!1!==fill&&-1===visited.indexOf(fill);){if(!isNumberFinite(fill))return fill;if(!(target=sources[fill]))return!1;if(target.visible)return fill;visited.push(fill),fill=target.fill}return!1}function _decodeFill(line,index,count){var fill=function(line){var options=line.options,fillOption=options.fill,fill=valueOrDefault(fillOption&&fillOption.target,fillOption);return void 0===fill&&(fill=!!options.backgroundColor),!1!==fill&&null!==fill&&(!0===fill?"origin":fill)}(line);if(isObject(fill))return!isNaN(fill.value)&&fill;var target=parseFloat(fill);return isNumberFinite(target)&&Math.floor(target)===target?function(firstCh,index,target,count){return"-"!==firstCh&&"+"!==firstCh||(target=index+target),!(target===index||target<0||target>=count)&&target}(fill[0],index,target,count):["origin","start","end","stack","shape"].indexOf(fill)>=0&&fill}function addPointsBelow(points,sourcePoint,linesBelow){for(var postponed=[],j=0;j<linesBelow.length;j++){var _findPoint=findPoint(linesBelow[j],sourcePoint,"x"),first=_findPoint.first,last=_findPoint.last,point=_findPoint.point;if(!(!point||first&&last))if(first)postponed.unshift(point);else if(points.push(point),!last)break}points.push.apply(points,postponed)}function findPoint(line,sourcePoint,property){var point=line.interpolate(sourcePoint,property);if(!point)return{};for(var pointValue=point[property],segments=line.segments,linePoints=line.points,first=!1,last=!1,i=0;i<segments.length;i++){var segment=segments[i],firstValue=linePoints[segment.start][property],lastValue=linePoints[segment.end][property];if(_isBetween(pointValue,firstValue,lastValue)){first=pointValue===firstValue,last=pointValue===lastValue;break}}return{first:first,last:last,point:point}}var simpleArc=function(){function simpleArc(opts){_classCallCheck(this,simpleArc),this.x=opts.x,this.y=opts.y,this.radius=opts.radius}return _createClass(simpleArc,[{key:"pathSegment",value:function(ctx,bounds,opts){var x=this.x,y=this.y,radius=this.radius;return bounds=bounds||{start:0,end:TAU},ctx.arc(x,y,radius,bounds.end,bounds.start,!0),!opts.bounds}},{key:"interpolate",value:function(point){var x=this.x,y=this.y,radius=this.radius,angle=point.angle;return{x:x+Math.cos(angle)*radius,y:y+Math.sin(angle)*radius,angle:angle}}}]),simpleArc}();function _getTarget(source){var chart=source.chart,fill=source.fill,line=source.line;if(isNumberFinite(fill))return function(chart,index){var meta=chart.getDatasetMeta(index);return meta&&chart.isDatasetVisible(index)?meta.dataset:null}(chart,fill);if("stack"===fill)return function(source){var scale=source.scale,index=source.index,line=source.line,points=[],segments=line.segments,sourcePoints=line.points,linesBelow=function(scale,index){for(var below=[],metas=scale.getMatchingVisibleMetas("line"),i=0;i<metas.length;i++){var meta=metas[i];if(meta.index===index)break;meta.hidden||below.unshift(meta.dataset)}return below}(scale,index);linesBelow.push(_createBoundaryLine({x:null,y:scale.bottom},line));for(var i=0;i<segments.length;i++)for(var segment=segments[i],j=segment.start;j<=segment.end;j++)addPointsBelow(points,sourcePoints[j],linesBelow);return new LineElement({points:points,options:{}})}(source);if("shape"===fill)return!0;var boundary=function(source){return(source.scale||{}).getPointPositionForValue?function(source){var scale=source.scale,fill=source.fill,options=scale.options,length=scale.getLabels().length,start=options.reverse?scale.max:scale.min,value=function(fill,scale,startValue){return"start"===fill?startValue:"end"===fill?scale.options.reverse?scale.min:scale.max:isObject(fill)?fill.value:scale.getBaseValue()}(fill,scale,start),target=[];if(options.grid.circular){var center=scale.getPointPositionForValue(0,start);return new simpleArc({x:center.x,y:center.y,radius:scale.getDistanceFromCenterForValue(value)})}for(var i=0;i<length;++i)target.push(scale.getPointPositionForValue(i,value));return target}(source):function(source){var _source$scale=source.scale,scale=void 0===_source$scale?{}:_source$scale,pixel=function(fill,scale){var pixel=null;return"start"===fill?pixel=scale.bottom:"end"===fill?pixel=scale.top:isObject(fill)?pixel=scale.getPixelForValue(fill.value):scale.getBasePixel&&(pixel=scale.getBasePixel()),pixel}(source.fill,scale);if(isNumberFinite(pixel)){var horizontal=scale.isHorizontal();return{x:horizontal?pixel:null,y:horizontal?null:pixel}}return null}(source)}(source);return boundary instanceof simpleArc?boundary:_createBoundaryLine(boundary,line)}function _drawfill(ctx,source,area){var target=_getTarget(source),line=source.line,scale=source.scale,axis=source.axis,lineOpts=line.options,fillOption=lineOpts.fill,color=lineOpts.backgroundColor,_ref8=fillOption||{},_ref8$above=_ref8.above,above=void 0===_ref8$above?color:_ref8$above,_ref8$below=_ref8.below,below=void 0===_ref8$below?color:_ref8$below;target&&line.points.length&&(clipArea(ctx,area),function(ctx,cfg){var line=cfg.line,target=cfg.target,above=cfg.above,below=cfg.below,area=cfg.area,scale=cfg.scale,property=line._loop?"angle":cfg.axis;ctx.save(),"x"===property&&below!==above&&(clipVertical(ctx,target,area.top),fill(ctx,{line:line,target:target,color:above,scale:scale,property:property}),ctx.restore(),ctx.save(),clipVertical(ctx,target,area.bottom)),fill(ctx,{line:line,target:target,color:below,scale:scale,property:property}),ctx.restore()}(ctx,{line:line,target:target,above:above,below:below,area:area,scale:scale,axis:axis}),unclipArea(ctx))}function clipVertical(ctx,target,clipY){var segments=target.segments,points=target.points,first=!0,lineLoop=!1;ctx.beginPath();var _step28,_iterator28=_createForOfIteratorHelper(segments);try{for(_iterator28.s();!(_step28=_iterator28.n()).done;){var segment=_step28.value,start=segment.start,end=segment.end,firstPoint=points[start],lastPoint=points[_findSegmentEnd(start,end,points)];first?(ctx.moveTo(firstPoint.x,firstPoint.y),first=!1):(ctx.lineTo(firstPoint.x,clipY),ctx.lineTo(firstPoint.x,firstPoint.y)),(lineLoop=!!target.pathSegment(ctx,segment,{move:lineLoop}))?ctx.closePath():ctx.lineTo(lastPoint.x,clipY)}}catch(err){_iterator28.e(err)}finally{_iterator28.f()}ctx.lineTo(target.first().x,clipY),ctx.closePath(),ctx.clip()}function fill(ctx,cfg){var _step29,line=cfg.line,target=cfg.target,property=cfg.property,color=cfg.color,scale=cfg.scale,segments=function(line,target,property){var _step25,segments=line.segments,points=line.points,tpoints=target.points,parts=[],_iterator25=_createForOfIteratorHelper(segments);try{for(_iterator25.s();!(_step25=_iterator25.n()).done;){var segment=_step25.value,start=segment.start,end=segment.end;end=_findSegmentEnd(start,end,points);var bounds=_getBounds(property,points[start],points[end],segment.loop);if(target.segments){var _step26,_iterator26=_createForOfIteratorHelper(_boundSegments(target,bounds));try{for(_iterator26.s();!(_step26=_iterator26.n()).done;){var _step27,tgt=_step26.value,subBounds=_getBounds(property,tpoints[tgt.start],tpoints[tgt.end],tgt.loop),_iterator27=_createForOfIteratorHelper(_boundSegment(segment,points,subBounds));try{for(_iterator27.s();!(_step27=_iterator27.n()).done;){var fillSource=_step27.value;parts.push({source:fillSource,target:tgt,start:_defineProperty({},property,_getEdge(bounds,subBounds,"start",Math.max)),end:_defineProperty({},property,_getEdge(bounds,subBounds,"end",Math.min))})}}catch(err){_iterator27.e(err)}finally{_iterator27.f()}}}catch(err){_iterator26.e(err)}finally{_iterator26.f()}}else parts.push({source:segment,target:bounds,start:points[start],end:points[end]})}}catch(err){_iterator25.e(err)}finally{_iterator25.f()}return parts}(line,target,property),_iterator29=_createForOfIteratorHelper(segments);try{for(_iterator29.s();!(_step29=_iterator29.n()).done;){var _step29$value=_step29.value,src=_step29$value.source,tgt=_step29$value.target,start=_step29$value.start,end=_step29$value.end,_src$style=src.style,_src$style$background=(_src$style=void 0===_src$style?{}:_src$style).backgroundColor,backgroundColor=void 0===_src$style$background?color:_src$style$background,notShape=!0!==target;ctx.save(),ctx.fillStyle=backgroundColor,clipBounds(ctx,scale,notShape&&_getBounds(property,start,end)),ctx.beginPath();var lineLoop=!!line.pathSegment(ctx,src),loop=void 0;if(notShape){lineLoop?ctx.closePath():interpolatedLineTo(ctx,target,end,property);var targetLoop=!!target.pathSegment(ctx,tgt,{move:lineLoop,reverse:!0});(loop=lineLoop&&targetLoop)||interpolatedLineTo(ctx,target,start,property)}ctx.closePath(),ctx.fill(loop?"evenodd":"nonzero"),ctx.restore()}}catch(err){_iterator29.e(err)}finally{_iterator29.f()}}function clipBounds(ctx,scale,bounds){var _scale$chart$chartAre=scale.chart.chartArea,top=_scale$chart$chartAre.top,bottom=_scale$chart$chartAre.bottom,_ref9=bounds||{},property=_ref9.property,start=_ref9.start,end=_ref9.end;"x"===property&&(ctx.beginPath(),ctx.rect(start,top,end-start,bottom-top),ctx.clip())}function interpolatedLineTo(ctx,target,point,property){var interpolatedPoint=target.interpolate(point,property);interpolatedPoint&&ctx.lineTo(interpolatedPoint.x,interpolatedPoint.y)}var index={id:"filler",afterDatasetsUpdate:function(chart,_args,options){var meta,i,line,source,count=(chart.data.datasets||[]).length,sources=[];for(i=0;i<count;++i)source=null,(line=(meta=chart.getDatasetMeta(i)).dataset)&&line.options&&line instanceof LineElement&&(source={visible:chart.isDatasetVisible(i),index:i,fill:_decodeFill(line,i,count),chart:chart,axis:meta.controller.options.indexAxis,scale:meta.vScale,line:line}),meta.$filler=source,sources.push(source);for(i=0;i<count;++i)(source=sources[i])&&!1!==source.fill&&(source.fill=_resolveTarget(sources,i,options.propagate))},beforeDraw:function(chart,_args,options){for(var draw="beforeDraw"===options.drawTime,metasets=chart.getSortedVisibleDatasetMetas(),area=chart.chartArea,i=metasets.length-1;i>=0;--i){var source=metasets[i].$filler;source&&(source.line.updateControlPoints(area,source.axis),draw&&_drawfill(chart.ctx,source,area))}},beforeDatasetsDraw:function(chart,_args,options){if("beforeDatasetsDraw"===options.drawTime)for(var metasets=chart.getSortedVisibleDatasetMetas(),i=metasets.length-1;i>=0;--i){var source=metasets[i].$filler;source&&_drawfill(chart.ctx,source,chart.chartArea)}},beforeDatasetDraw:function(chart,args,options){var source=args.meta.$filler;source&&!1!==source.fill&&"beforeDatasetDraw"===options.drawTime&&_drawfill(chart.ctx,source,chart.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},getBoxSize=function(labelOpts,fontSize){var _labelOpts$boxHeight=labelOpts.boxHeight,boxHeight=void 0===_labelOpts$boxHeight?fontSize:_labelOpts$boxHeight,_labelOpts$boxWidth=labelOpts.boxWidth,boxWidth=void 0===_labelOpts$boxWidth?fontSize:_labelOpts$boxWidth;return labelOpts.usePointStyle&&(boxHeight=Math.min(boxHeight,fontSize),boxWidth=Math.min(boxWidth,fontSize)),{boxWidth:boxWidth,boxHeight:boxHeight,itemHeight:Math.max(fontSize,boxHeight)}},Legend=function(_Element6){_inherits(Legend,_Element6);var _super16=_createSuper(Legend);function Legend(config){var _this27;return _classCallCheck(this,Legend),(_this27=_super16.call(this))._added=!1,_this27.legendHitBoxes=[],_this27._hoveredItem=null,_this27.doughnutMode=!1,_this27.chart=config.chart,_this27.options=config.options,_this27.ctx=config.ctx,_this27.legendItems=void 0,_this27.columnSizes=void 0,_this27.lineWidths=void 0,_this27.maxHeight=void 0,_this27.maxWidth=void 0,_this27.top=void 0,_this27.bottom=void 0,_this27.left=void 0,_this27.right=void 0,_this27.height=void 0,_this27.width=void 0,_this27._margins=void 0,_this27.position=void 0,_this27.weight=void 0,_this27.fullSize=void 0,_this27}return _createClass(Legend,[{key:"update",value:function(maxWidth,maxHeight,margins){this.maxWidth=maxWidth,this.maxHeight=maxHeight,this._margins=margins,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var _this28=this,labelOpts=this.options.labels||{},legendItems=callback(labelOpts.generateLabels,[this.chart],this)||[];labelOpts.filter&&(legendItems=legendItems.filter((function(item){return labelOpts.filter(item,_this28.chart.data)}))),labelOpts.sort&&(legendItems=legendItems.sort((function(a,b){return labelOpts.sort(a,b,_this28.chart.data)}))),this.options.reverse&&legendItems.reverse(),this.legendItems=legendItems}},{key:"fit",value:function(){var options=this.options,ctx=this.ctx;if(options.display){var width,height,labelOpts=options.labels,labelFont=toFont(labelOpts.font),fontSize=labelFont.size,titleHeight=this._computeTitleHeight(),_getBoxSize=getBoxSize(labelOpts,fontSize),boxWidth=_getBoxSize.boxWidth,itemHeight=_getBoxSize.itemHeight;ctx.font=labelFont.string,this.isHorizontal()?(width=this.maxWidth,height=this._fitRows(titleHeight,fontSize,boxWidth,itemHeight)+10):(height=this.maxHeight,width=this._fitCols(titleHeight,fontSize,boxWidth,itemHeight)+10),this.width=Math.min(width,options.maxWidth||this.maxWidth),this.height=Math.min(height,options.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(titleHeight,fontSize,boxWidth,itemHeight){var ctx=this.ctx,maxWidth=this.maxWidth,padding=this.options.labels.padding,hitboxes=this.legendHitBoxes=[],lineWidths=this.lineWidths=[0],lineHeight=itemHeight+padding,totalHeight=titleHeight;ctx.textAlign="left",ctx.textBaseline="middle";var row=-1,top=-lineHeight;return this.legendItems.forEach((function(legendItem,i){var itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;(0===i||lineWidths[lineWidths.length-1]+itemWidth+2*padding>maxWidth)&&(totalHeight+=lineHeight,lineWidths[lineWidths.length-(i>0?0:1)]=0,top+=lineHeight,row++),hitboxes[i]={left:0,top:top,row:row,width:itemWidth,height:itemHeight},lineWidths[lineWidths.length-1]+=itemWidth+padding})),totalHeight}},{key:"_fitCols",value:function(titleHeight,fontSize,boxWidth,itemHeight){var ctx=this.ctx,maxHeight=this.maxHeight,padding=this.options.labels.padding,hitboxes=this.legendHitBoxes=[],columnSizes=this.columnSizes=[],heightLimit=maxHeight-titleHeight,totalWidth=padding,currentColWidth=0,currentColHeight=0,left=0,col=0;return this.legendItems.forEach((function(legendItem,i){var itemWidth=boxWidth+fontSize/2+ctx.measureText(legendItem.text).width;i>0&&currentColHeight+itemHeight+2*padding>heightLimit&&(totalWidth+=currentColWidth+padding,columnSizes.push({width:currentColWidth,height:currentColHeight}),left+=currentColWidth+padding,col++,currentColWidth=currentColHeight=0),hitboxes[i]={left:left,top:currentColHeight,col:col,width:itemWidth,height:itemHeight},currentColWidth=Math.max(currentColWidth,itemWidth),currentColHeight+=itemHeight+padding})),totalWidth+=currentColWidth,columnSizes.push({width:currentColWidth,height:currentColHeight}),totalWidth}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var titleHeight=this._computeTitleHeight(),hitboxes=this.legendHitBoxes,_this$options13=this.options,align=_this$options13.align,padding=_this$options13.labels.padding,rtlHelper=getRtlAdapter(_this$options13.rtl,this.left,this.width);if(this.isHorizontal()){var _step30,row=0,left=_alignStartEnd(align,this.left+padding,this.right-this.lineWidths[row]),_iterator30=_createForOfIteratorHelper(hitboxes);try{for(_iterator30.s();!(_step30=_iterator30.n()).done;){var hitbox=_step30.value;row!==hitbox.row&&(row=hitbox.row,left=_alignStartEnd(align,this.left+padding,this.right-this.lineWidths[row])),hitbox.top+=this.top+titleHeight+padding,hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(left),hitbox.width),left+=hitbox.width+padding}}catch(err){_iterator30.e(err)}finally{_iterator30.f()}}else{var _step31,col=0,top=_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height),_iterator31=_createForOfIteratorHelper(hitboxes);try{for(_iterator31.s();!(_step31=_iterator31.n()).done;){var _hitbox=_step31.value;_hitbox.col!==col&&(col=_hitbox.col,top=_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-this.columnSizes[col].height)),_hitbox.top=top,_hitbox.left+=this.left+padding,_hitbox.left=rtlHelper.leftForLtr(rtlHelper.x(_hitbox.left),_hitbox.width),top+=_hitbox.height+padding}}catch(err){_iterator31.e(err)}finally{_iterator31.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var ctx=this.ctx;clipArea(ctx,this),this._draw(),unclipArea(ctx)}}},{key:"_draw",value:function(){var cursor,_this29=this,opts=this.options,columnSizes=this.columnSizes,lineWidths=this.lineWidths,ctx=this.ctx,align=opts.align,labelOpts=opts.labels,defaultColor=defaults.color,rtlHelper=getRtlAdapter(opts.rtl,this.left,this.width),labelFont=toFont(labelOpts.font),fontColor=labelOpts.color,padding=labelOpts.padding,fontSize=labelFont.size,halfFontSize=fontSize/2;this.drawTitle(),ctx.textAlign=rtlHelper.textAlign("left"),ctx.textBaseline="middle",ctx.lineWidth=.5,ctx.font=labelFont.string;var _getBoxSize2=getBoxSize(labelOpts,fontSize),boxWidth=_getBoxSize2.boxWidth,boxHeight=_getBoxSize2.boxHeight,itemHeight=_getBoxSize2.itemHeight,isHorizontal=this.isHorizontal(),titleHeight=this._computeTitleHeight();cursor=isHorizontal?{x:_alignStartEnd(align,this.left+padding,this.right-lineWidths[0]),y:this.top+padding+titleHeight,line:0}:{x:this.left+padding,y:_alignStartEnd(align,this.top+titleHeight+padding,this.bottom-columnSizes[0].height),line:0},overrideTextDirection(this.ctx,opts.textDirection);var lineHeight=itemHeight+padding;this.legendItems.forEach((function(legendItem,i){ctx.strokeStyle=legendItem.fontColor||fontColor,ctx.fillStyle=legendItem.fontColor||fontColor;var textWidth=ctx.measureText(legendItem.text).width,textAlign=rtlHelper.textAlign(legendItem.textAlign||(legendItem.textAlign=labelOpts.textAlign)),width=boxWidth+halfFontSize+textWidth,x=cursor.x,y=cursor.y;rtlHelper.setWidth(_this29.width),isHorizontal?i>0&&x+width+padding>_this29.right&&(y=cursor.y+=lineHeight,cursor.line++,x=cursor.x=_alignStartEnd(align,_this29.left+padding,_this29.right-lineWidths[cursor.line])):i>0&&y+lineHeight>_this29.bottom&&(x=cursor.x=x+columnSizes[cursor.line].width+padding,cursor.line++,y=cursor.y=_alignStartEnd(align,_this29.top+titleHeight+padding,_this29.bottom-columnSizes[cursor.line].height)),function(x,y,legendItem){if(!(isNaN(boxWidth)||boxWidth<=0||isNaN(boxHeight)||boxHeight<0)){ctx.save();var lineWidth=valueOrDefault(legendItem.lineWidth,1);if(ctx.fillStyle=valueOrDefault(legendItem.fillStyle,defaultColor),ctx.lineCap=valueOrDefault(legendItem.lineCap,"butt"),ctx.lineDashOffset=valueOrDefault(legendItem.lineDashOffset,0),ctx.lineJoin=valueOrDefault(legendItem.lineJoin,"miter"),ctx.lineWidth=lineWidth,ctx.strokeStyle=valueOrDefault(legendItem.strokeStyle,defaultColor),ctx.setLineDash(valueOrDefault(legendItem.lineDash,[])),labelOpts.usePointStyle){var drawOptions={radius:boxWidth*Math.SQRT2/2,pointStyle:legendItem.pointStyle,rotation:legendItem.rotation,borderWidth:lineWidth},centerX=rtlHelper.xPlus(x,boxWidth/2);drawPoint(ctx,drawOptions,centerX,y+halfFontSize)}else{var yBoxTop=y+Math.max((fontSize-boxHeight)/2,0),xBoxLeft=rtlHelper.leftForLtr(x,boxWidth),borderRadius=toTRBLCorners(legendItem.borderRadius);ctx.beginPath(),Object.values(borderRadius).some((function(v){return 0!==v}))?addRoundedRectPath(ctx,{x:xBoxLeft,y:yBoxTop,w:boxWidth,h:boxHeight,radius:borderRadius}):ctx.rect(xBoxLeft,yBoxTop,boxWidth,boxHeight),ctx.fill(),0!==lineWidth&&ctx.stroke()}ctx.restore()}}(rtlHelper.x(x),y,legendItem),x=_textX(textAlign,x+boxWidth+halfFontSize,isHorizontal?x+width:_this29.right,opts.rtl),function(x,y,legendItem){renderText(ctx,legendItem.text,x,y+itemHeight/2,labelFont,{strikethrough:legendItem.hidden,textAlign:rtlHelper.textAlign(legendItem.textAlign)})}(rtlHelper.x(x),y,legendItem),isHorizontal?cursor.x+=width+padding:cursor.y+=lineHeight})),restoreTextDirection(this.ctx,opts.textDirection)}},{key:"drawTitle",value:function(){var opts=this.options,titleOpts=opts.title,titleFont=toFont(titleOpts.font),titlePadding=toPadding(titleOpts.padding);if(titleOpts.display){var y,rtlHelper=getRtlAdapter(opts.rtl,this.left,this.width),ctx=this.ctx,position=titleOpts.position,halfFontSize=titleFont.size/2,topPaddingPlusHalfFontSize=titlePadding.top+halfFontSize,left=this.left,maxWidth=this.width;if(this.isHorizontal())maxWidth=Math.max.apply(Math,_toConsumableArray(this.lineWidths)),y=this.top+topPaddingPlusHalfFontSize,left=_alignStartEnd(opts.align,left,this.right-maxWidth);else{var maxHeight=this.columnSizes.reduce((function(acc,size){return Math.max(acc,size.height)}),0);y=topPaddingPlusHalfFontSize+_alignStartEnd(opts.align,this.top,this.bottom-maxHeight-opts.labels.padding-this._computeTitleHeight())}var x=_alignStartEnd(position,left,left+maxWidth);ctx.textAlign=rtlHelper.textAlign(_toLeftRightCenter(position)),ctx.textBaseline="middle",ctx.strokeStyle=titleOpts.color,ctx.fillStyle=titleOpts.color,ctx.font=titleFont.string,renderText(ctx,titleOpts.text,x,y,titleFont)}}},{key:"_computeTitleHeight",value:function(){var titleOpts=this.options.title,titleFont=toFont(titleOpts.font),titlePadding=toPadding(titleOpts.padding);return titleOpts.display?titleFont.lineHeight+titlePadding.height:0}},{key:"_getLegendItemAt",value:function(x,y){var i,hitBox,lh;if(_isBetween(x,this.left,this.right)&&_isBetween(y,this.top,this.bottom))for(lh=this.legendHitBoxes,i=0;i<lh.length;++i)if(_isBetween(x,(hitBox=lh[i]).left,hitBox.left+hitBox.width)&&_isBetween(y,hitBox.top,hitBox.top+hitBox.height))return this.legendItems[i];return null}},{key:"handleEvent",value:function(e){var opts=this.options;if(function(type,opts){return!("mousemove"!==type&&"mouseout"!==type||!opts.onHover&&!opts.onLeave)||!(!opts.onClick||"click"!==type&&"mouseup"!==type)}(e.type,opts)){var a,b,hoveredItem=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var previous=this._hoveredItem,sameItem=(b=hoveredItem,null!==(a=previous)&&null!==b&&a.datasetIndex===b.datasetIndex&&a.index===b.index);previous&&!sameItem&&callback(opts.onLeave,[e,previous,this],this),this._hoveredItem=hoveredItem,hoveredItem&&!sameItem&&callback(opts.onHover,[e,hoveredItem,this],this)}else hoveredItem&&callback(opts.onClick,[e,hoveredItem,this],this)}}}]),Legend}(Element),plugin_legend={id:"legend",_element:Legend,start:function(chart,_args,options){var legend=chart.legend=new Legend({ctx:chart.ctx,options:options,chart:chart});layouts.configure(chart,legend,options),layouts.addBox(chart,legend)},stop:function(chart){layouts.removeBox(chart,chart.legend),delete chart.legend},beforeUpdate:function(chart,_args,options){var legend=chart.legend;layouts.configure(chart,legend,options),legend.options=options},afterUpdate:function(chart){var legend=chart.legend;legend.buildLabels(),legend.adjustHitBoxes()},afterEvent:function(chart,args){args.replay||chart.legend.handleEvent(args.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,legendItem,legend){var index=legendItem.datasetIndex,ci=legend.chart;ci.isDatasetVisible(index)?(ci.hide(index),legendItem.hidden=!0):(ci.show(index),legendItem.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(ctx){return ctx.chart.options.color},boxWidth:40,padding:10,generateLabels:function(chart){var datasets=chart.data.datasets,_chart$legend$options=chart.legend.options.labels,usePointStyle=_chart$legend$options.usePointStyle,pointStyle=_chart$legend$options.pointStyle,textAlign=_chart$legend$options.textAlign,color=_chart$legend$options.color;return chart._getSortedDatasetMetas().map((function(meta){var style=meta.controller.getStyle(usePointStyle?0:void 0),borderWidth=toPadding(style.borderWidth);return{text:datasets[meta.index].label,fillStyle:style.backgroundColor,fontColor:color,hidden:!meta.visible,lineCap:style.borderCapStyle,lineDash:style.borderDash,lineDashOffset:style.borderDashOffset,lineJoin:style.borderJoinStyle,lineWidth:(borderWidth.width+borderWidth.height)/4,strokeStyle:style.borderColor,pointStyle:pointStyle||style.pointStyle,rotation:style.rotation,textAlign:textAlign||style.textAlign,borderRadius:0,datasetIndex:meta.index}}),this)}},title:{color:function(ctx){return ctx.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(name){return!name.startsWith("on")},labels:{_scriptable:function(name){return!["generateLabels","filter","sort"].includes(name)}}}},Title=function(_Element7){_inherits(Title,_Element7);var _super17=_createSuper(Title);function Title(config){var _this30;return _classCallCheck(this,Title),(_this30=_super17.call(this)).chart=config.chart,_this30.options=config.options,_this30.ctx=config.ctx,_this30._padding=void 0,_this30.top=void 0,_this30.bottom=void 0,_this30.left=void 0,_this30.right=void 0,_this30.width=void 0,_this30.height=void 0,_this30.position=void 0,_this30.weight=void 0,_this30.fullSize=void 0,_this30}return _createClass(Title,[{key:"update",value:function(maxWidth,maxHeight){var opts=this.options;if(this.left=0,this.top=0,opts.display){this.width=this.right=maxWidth,this.height=this.bottom=maxHeight;var lineCount=isArray(opts.text)?opts.text.length:1;this._padding=toPadding(opts.padding);var textSize=lineCount*toFont(opts.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=textSize:this.width=textSize}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var pos=this.options.position;return"top"===pos||"bottom"===pos}},{key:"_drawArgs",value:function(offset){var maxWidth,titleX,titleY,top=this.top,left=this.left,bottom=this.bottom,right=this.right,options=this.options,align=options.align,rotation=0;return this.isHorizontal()?(titleX=_alignStartEnd(align,left,right),titleY=top+offset,maxWidth=right-left):("left"===options.position?(titleX=left+offset,titleY=_alignStartEnd(align,bottom,top),rotation=-.5*PI):(titleX=right-offset,titleY=_alignStartEnd(align,top,bottom),rotation=.5*PI),maxWidth=bottom-top),{titleX:titleX,titleY:titleY,maxWidth:maxWidth,rotation:rotation}}},{key:"draw",value:function(){var ctx=this.ctx,opts=this.options;if(opts.display){var fontOpts=toFont(opts.font),offset=fontOpts.lineHeight/2+this._padding.top,_this$_drawArgs=this._drawArgs(offset),titleX=_this$_drawArgs.titleX,titleY=_this$_drawArgs.titleY,maxWidth=_this$_drawArgs.maxWidth,rotation=_this$_drawArgs.rotation;renderText(ctx,opts.text,0,0,fontOpts,{color:opts.color,maxWidth:maxWidth,rotation:rotation,textAlign:_toLeftRightCenter(opts.align),textBaseline:"middle",translation:[titleX,titleY]})}}}]),Title}(Element),plugin_title={id:"title",_element:Title,start:function(chart,_args,options){!function(chart,titleOpts){var title=new Title({ctx:chart.ctx,options:titleOpts,chart:chart});layouts.configure(chart,title,titleOpts),layouts.addBox(chart,title),chart.titleBlock=title}(chart,options)},stop:function(chart){var titleBlock=chart.titleBlock;layouts.removeBox(chart,titleBlock),delete chart.titleBlock},beforeUpdate:function(chart,_args,options){var title=chart.titleBlock;layouts.configure(chart,title,options),title.options=options},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},map=new WeakMap,plugin_subtitle={id:"subtitle",start:function(chart,_args,options){var title=new Title({ctx:chart.ctx,options:options,chart:chart});layouts.configure(chart,title,options),layouts.addBox(chart,title),map.set(chart,title)},stop:function(chart){layouts.removeBox(chart,map.get(chart)),map.delete(chart)},beforeUpdate:function(chart,_args,options){var title=map.get(chart);layouts.configure(chart,title,options),title.options=options},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},positioners={average:function(items){if(!items.length)return!1;var i,len,x=0,y=0,count=0;for(i=0,len=items.length;i<len;++i){var el=items[i].element;if(el&&el.hasValue()){var pos=el.tooltipPosition();x+=pos.x,y+=pos.y,++count}}return{x:x/count,y:y/count}},nearest:function(items,eventPosition){if(!items.length)return!1;var i,len,nearestElement,x=eventPosition.x,y=eventPosition.y,minDistance=Number.POSITIVE_INFINITY;for(i=0,len=items.length;i<len;++i){var el=items[i].element;if(el&&el.hasValue()){var d=distanceBetweenPoints(eventPosition,el.getCenterPoint());d<minDistance&&(minDistance=d,nearestElement=el)}}if(nearestElement){var tp=nearestElement.tooltipPosition();x=tp.x,y=tp.y}return{x:x,y:y}}};function pushOrConcat(base,toPush){return toPush&&(isArray(toPush)?Array.prototype.push.apply(base,toPush):base.push(toPush)),base}function splitNewlines(str){return("string"==typeof str||str instanceof String)&&str.indexOf("\n")>-1?str.split("\n"):str}function createTooltipItem(chart,item){var element=item.element,datasetIndex=item.datasetIndex,index=item.index,controller=chart.getDatasetMeta(datasetIndex).controller,_controller$getLabelA=controller.getLabelAndValue(index),label=_controller$getLabelA.label,value=_controller$getLabelA.value;return{chart:chart,label:label,parsed:controller.getParsed(index),raw:chart.data.datasets[datasetIndex].data[index],formattedValue:value,dataset:controller.getDataset(),dataIndex:index,datasetIndex:datasetIndex,element:element}}function getTooltipSize(tooltip,options){var ctx=tooltip.chart.ctx,body=tooltip.body,footer=tooltip.footer,title=tooltip.title,boxWidth=options.boxWidth,boxHeight=options.boxHeight,bodyFont=toFont(options.bodyFont),titleFont=toFont(options.titleFont),footerFont=toFont(options.footerFont),titleLineCount=title.length,footerLineCount=footer.length,bodyLineItemCount=body.length,padding=toPadding(options.padding),height=padding.height,width=0,combinedBodyLength=body.reduce((function(count,bodyItem){return count+bodyItem.before.length+bodyItem.lines.length+bodyItem.after.length}),0);combinedBodyLength+=tooltip.beforeBody.length+tooltip.afterBody.length,titleLineCount&&(height+=titleLineCount*titleFont.lineHeight+(titleLineCount-1)*options.titleSpacing+options.titleMarginBottom),combinedBodyLength&&(height+=bodyLineItemCount*(options.displayColors?Math.max(boxHeight,bodyFont.lineHeight):bodyFont.lineHeight)+(combinedBodyLength-bodyLineItemCount)*bodyFont.lineHeight+(combinedBodyLength-1)*options.bodySpacing),footerLineCount&&(height+=options.footerMarginTop+footerLineCount*footerFont.lineHeight+(footerLineCount-1)*options.footerSpacing);var widthPadding=0,maxLineWidth=function(line){width=Math.max(width,ctx.measureText(line).width+widthPadding)};return ctx.save(),ctx.font=titleFont.string,each(tooltip.title,maxLineWidth),ctx.font=bodyFont.string,each(tooltip.beforeBody.concat(tooltip.afterBody),maxLineWidth),widthPadding=options.displayColors?boxWidth+2+options.boxPadding:0,each(body,(function(bodyItem){each(bodyItem.before,maxLineWidth),each(bodyItem.lines,maxLineWidth),each(bodyItem.after,maxLineWidth)})),widthPadding=0,ctx.font=footerFont.string,each(tooltip.footer,maxLineWidth),ctx.restore(),{width:width+=padding.width,height:height}}function determineXAlign(chart,options,size,yAlign){var x=size.x,width=size.width,chartWidth=chart.width,_chart$chartArea=chart.chartArea,left=_chart$chartArea.left,right=_chart$chartArea.right,xAlign="center";return"center"===yAlign?xAlign=x<=(left+right)/2?"left":"right":x<=width/2?xAlign="left":x>=chartWidth-width/2&&(xAlign="right"),function(xAlign,chart,options,size){var x=size.x,width=size.width,caret=options.caretSize+options.caretPadding;return"left"===xAlign&&x+width+caret>chart.width||"right"===xAlign&&x-width-caret<0||void 0}(xAlign,chart,options,size)&&(xAlign="center"),xAlign}function determineAlignment(chart,options,size){var yAlign=size.yAlign||options.yAlign||function(chart,size){var y=size.y,height=size.height;return y<height/2?"top":y>chart.height-height/2?"bottom":"center"}(chart,size);return{xAlign:size.xAlign||options.xAlign||determineXAlign(chart,options,size,yAlign),yAlign:yAlign}}function getBackgroundPoint(options,size,alignment,chart){var caretSize=options.caretSize,caretPadding=options.caretPadding,cornerRadius=options.cornerRadius,xAlign=alignment.xAlign,yAlign=alignment.yAlign,paddingAndSize=caretSize+caretPadding,_toTRBLCorners=toTRBLCorners(cornerRadius),topLeft=_toTRBLCorners.topLeft,topRight=_toTRBLCorners.topRight,bottomLeft=_toTRBLCorners.bottomLeft,bottomRight=_toTRBLCorners.bottomRight,x=function(size,xAlign){var x=size.x,width=size.width;return"right"===xAlign?x-=width:"center"===xAlign&&(x-=width/2),x}(size,xAlign),y=function(size,yAlign,paddingAndSize){var y=size.y,height=size.height;return"top"===yAlign?y+=paddingAndSize:y-="bottom"===yAlign?height+paddingAndSize:height/2,y}(size,yAlign,paddingAndSize);return"center"===yAlign?"left"===xAlign?x+=paddingAndSize:"right"===xAlign&&(x-=paddingAndSize):"left"===xAlign?x-=Math.max(topLeft,bottomLeft)+caretSize:"right"===xAlign&&(x+=Math.max(topRight,bottomRight)+caretSize),{x:_limitValue(x,0,chart.width-size.width),y:_limitValue(y,0,chart.height-size.height)}}function getAlignedX(tooltip,align,options){var padding=toPadding(options.padding);return"center"===align?tooltip.x+tooltip.width/2:"right"===align?tooltip.x+tooltip.width-padding.right:tooltip.x+padding.left}function getBeforeAfterBodyLines(callback){return pushOrConcat([],splitNewlines(callback))}function overrideCallbacks(callbacks,context){var override=context&&context.dataset&&context.dataset.tooltip&&context.dataset.tooltip.callbacks;return override?callbacks.override(override):callbacks}var Tooltip=function(_Element8){_inherits(Tooltip,_Element8);var _super18=_createSuper(Tooltip);function Tooltip(config){var _this31;return _classCallCheck(this,Tooltip),(_this31=_super18.call(this)).opacity=0,_this31._active=[],_this31._eventPosition=void 0,_this31._size=void 0,_this31._cachedAnimations=void 0,_this31._tooltipItems=[],_this31.$animations=void 0,_this31.$context=void 0,_this31.chart=config.chart||config._chart,_this31._chart=_this31.chart,_this31.options=config.options,_this31.dataPoints=void 0,_this31.title=void 0,_this31.beforeBody=void 0,_this31.body=void 0,_this31.afterBody=void 0,_this31.footer=void 0,_this31.xAlign=void 0,_this31.yAlign=void 0,_this31.x=void 0,_this31.y=void 0,_this31.height=void 0,_this31.width=void 0,_this31.caretX=void 0,_this31.caretY=void 0,_this31.labelColors=void 0,_this31.labelPointStyles=void 0,_this31.labelTextColors=void 0,_this31}return _createClass(Tooltip,[{key:"initialize",value:function(options){this.options=options,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var cached=this._cachedAnimations;if(cached)return cached;var chart=this.chart,options=this.options.setContext(this.getContext()),opts=options.enabled&&chart.options.animation&&options.animations,animations=new Animations(this.chart,opts);return opts._cacheable&&(this._cachedAnimations=Object.freeze(animations)),animations}},{key:"getContext",value:function(){return this.$context||(this.$context=(parent=this.chart.getContext(),tooltip=this,tooltipItems=this._tooltipItems,createContext(parent,{tooltip:tooltip,tooltipItems:tooltipItems,type:"tooltip"})));var parent,tooltip,tooltipItems}},{key:"getTitle",value:function(context,options){var callbacks=options.callbacks,beforeTitle=callbacks.beforeTitle.apply(this,[context]),title=callbacks.title.apply(this,[context]),afterTitle=callbacks.afterTitle.apply(this,[context]),lines=[];return lines=pushOrConcat(lines,splitNewlines(beforeTitle)),lines=pushOrConcat(lines,splitNewlines(title)),lines=pushOrConcat(lines,splitNewlines(afterTitle))}},{key:"getBeforeBody",value:function(tooltipItems,options){return getBeforeAfterBodyLines(options.callbacks.beforeBody.apply(this,[tooltipItems]))}},{key:"getBody",value:function(tooltipItems,options){var _this32=this,callbacks=options.callbacks,bodyItems=[];return each(tooltipItems,(function(context){var bodyItem={before:[],lines:[],after:[]},scoped=overrideCallbacks(callbacks,context);pushOrConcat(bodyItem.before,splitNewlines(scoped.beforeLabel.call(_this32,context))),pushOrConcat(bodyItem.lines,scoped.label.call(_this32,context)),pushOrConcat(bodyItem.after,splitNewlines(scoped.afterLabel.call(_this32,context))),bodyItems.push(bodyItem)})),bodyItems}},{key:"getAfterBody",value:function(tooltipItems,options){return getBeforeAfterBodyLines(options.callbacks.afterBody.apply(this,[tooltipItems]))}},{key:"getFooter",value:function(tooltipItems,options){var callbacks=options.callbacks,beforeFooter=callbacks.beforeFooter.apply(this,[tooltipItems]),footer=callbacks.footer.apply(this,[tooltipItems]),afterFooter=callbacks.afterFooter.apply(this,[tooltipItems]),lines=[];return lines=pushOrConcat(lines,splitNewlines(beforeFooter)),lines=pushOrConcat(lines,splitNewlines(footer)),lines=pushOrConcat(lines,splitNewlines(afterFooter))}},{key:"_createItems",value:function(options){var i,len,_this33=this,active=this._active,data=this.chart.data,labelColors=[],labelPointStyles=[],labelTextColors=[],tooltipItems=[];for(i=0,len=active.length;i<len;++i)tooltipItems.push(createTooltipItem(this.chart,active[i]));return options.filter&&(tooltipItems=tooltipItems.filter((function(element,index,array){return options.filter(element,index,array,data)}))),options.itemSort&&(tooltipItems=tooltipItems.sort((function(a,b){return options.itemSort(a,b,data)}))),each(tooltipItems,(function(context){var scoped=overrideCallbacks(options.callbacks,context);labelColors.push(scoped.labelColor.call(_this33,context)),labelPointStyles.push(scoped.labelPointStyle.call(_this33,context)),labelTextColors.push(scoped.labelTextColor.call(_this33,context))})),this.labelColors=labelColors,this.labelPointStyles=labelPointStyles,this.labelTextColors=labelTextColors,this.dataPoints=tooltipItems,tooltipItems}},{key:"update",value:function(changed,replay){var properties,options=this.options.setContext(this.getContext()),active=this._active,tooltipItems=[];if(active.length){var position=positioners[options.position].call(this,active,this._eventPosition);tooltipItems=this._createItems(options),this.title=this.getTitle(tooltipItems,options),this.beforeBody=this.getBeforeBody(tooltipItems,options),this.body=this.getBody(tooltipItems,options),this.afterBody=this.getAfterBody(tooltipItems,options),this.footer=this.getFooter(tooltipItems,options);var size=this._size=getTooltipSize(this,options),positionAndSize=Object.assign({},position,size),alignment=determineAlignment(this.chart,options,positionAndSize),backgroundPoint=getBackgroundPoint(options,positionAndSize,alignment,this.chart);this.xAlign=alignment.xAlign,this.yAlign=alignment.yAlign,properties={opacity:1,x:backgroundPoint.x,y:backgroundPoint.y,width:size.width,height:size.height,caretX:position.x,caretY:position.y}}else 0!==this.opacity&&(properties={opacity:0});this._tooltipItems=tooltipItems,this.$context=void 0,properties&&this._resolveAnimations().update(this,properties),changed&&options.external&&options.external.call(this,{chart:this.chart,tooltip:this,replay:replay})}},{key:"drawCaret",value:function(tooltipPoint,ctx,size,options){var caretPosition=this.getCaretPosition(tooltipPoint,size,options);ctx.lineTo(caretPosition.x1,caretPosition.y1),ctx.lineTo(caretPosition.x2,caretPosition.y2),ctx.lineTo(caretPosition.x3,caretPosition.y3)}},{key:"getCaretPosition",value:function(tooltipPoint,size,options){var x1,x2,x3,y1,y2,y3,xAlign=this.xAlign,yAlign=this.yAlign,caretSize=options.caretSize,_toTRBLCorners2=toTRBLCorners(options.cornerRadius),topLeft=_toTRBLCorners2.topLeft,topRight=_toTRBLCorners2.topRight,bottomLeft=_toTRBLCorners2.bottomLeft,bottomRight=_toTRBLCorners2.bottomRight,ptX=tooltipPoint.x,ptY=tooltipPoint.y,width=size.width,height=size.height;return"center"===yAlign?(y2=ptY+height/2,"left"===xAlign?(x2=(x1=ptX)-caretSize,y1=y2+caretSize,y3=y2-caretSize):(x2=(x1=ptX+width)+caretSize,y1=y2-caretSize,y3=y2+caretSize),x3=x1):(x2="left"===xAlign?ptX+Math.max(topLeft,bottomLeft)+caretSize:"right"===xAlign?ptX+width-Math.max(topRight,bottomRight)-caretSize:this.caretX,"top"===yAlign?(y2=(y1=ptY)-caretSize,x1=x2-caretSize,x3=x2+caretSize):(y2=(y1=ptY+height)+caretSize,x1=x2+caretSize,x3=x2-caretSize),y3=y1),{x1:x1,x2:x2,x3:x3,y1:y1,y2:y2,y3:y3}}},{key:"drawTitle",value:function(pt,ctx,options){var titleFont,titleSpacing,i,title=this.title,length=title.length;if(length){var rtlHelper=getRtlAdapter(options.rtl,this.x,this.width);for(pt.x=getAlignedX(this,options.titleAlign,options),ctx.textAlign=rtlHelper.textAlign(options.titleAlign),ctx.textBaseline="middle",titleFont=toFont(options.titleFont),titleSpacing=options.titleSpacing,ctx.fillStyle=options.titleColor,ctx.font=titleFont.string,i=0;i<length;++i)ctx.fillText(title[i],rtlHelper.x(pt.x),pt.y+titleFont.lineHeight/2),pt.y+=titleFont.lineHeight+titleSpacing,i+1===length&&(pt.y+=options.titleMarginBottom-titleSpacing)}}},{key:"_drawColorBox",value:function(ctx,pt,i,rtlHelper,options){var labelColors=this.labelColors[i],labelPointStyle=this.labelPointStyles[i],boxHeight=options.boxHeight,boxWidth=options.boxWidth,boxPadding=options.boxPadding,bodyFont=toFont(options.bodyFont),colorX=getAlignedX(this,"left",options),rtlColorX=rtlHelper.x(colorX),yOffSet=boxHeight<bodyFont.lineHeight?(bodyFont.lineHeight-boxHeight)/2:0,colorY=pt.y+yOffSet;if(options.usePointStyle){var drawOptions={radius:Math.min(boxWidth,boxHeight)/2,pointStyle:labelPointStyle.pointStyle,rotation:labelPointStyle.rotation,borderWidth:1},centerX=rtlHelper.leftForLtr(rtlColorX,boxWidth)+boxWidth/2,centerY=colorY+boxHeight/2;ctx.strokeStyle=options.multiKeyBackground,ctx.fillStyle=options.multiKeyBackground,drawPoint(ctx,drawOptions,centerX,centerY),ctx.strokeStyle=labelColors.borderColor,ctx.fillStyle=labelColors.backgroundColor,drawPoint(ctx,drawOptions,centerX,centerY)}else{ctx.lineWidth=labelColors.borderWidth||1,ctx.strokeStyle=labelColors.borderColor,ctx.setLineDash(labelColors.borderDash||[]),ctx.lineDashOffset=labelColors.borderDashOffset||0;var outerX=rtlHelper.leftForLtr(rtlColorX,boxWidth-boxPadding),innerX=rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX,1),boxWidth-boxPadding-2),borderRadius=toTRBLCorners(labelColors.borderRadius);Object.values(borderRadius).some((function(v){return 0!==v}))?(ctx.beginPath(),ctx.fillStyle=options.multiKeyBackground,addRoundedRectPath(ctx,{x:outerX,y:colorY,w:boxWidth,h:boxHeight,radius:borderRadius}),ctx.fill(),ctx.stroke(),ctx.fillStyle=labelColors.backgroundColor,ctx.beginPath(),addRoundedRectPath(ctx,{x:innerX,y:colorY+1,w:boxWidth-2,h:boxHeight-2,radius:borderRadius}),ctx.fill()):(ctx.fillStyle=options.multiKeyBackground,ctx.fillRect(outerX,colorY,boxWidth,boxHeight),ctx.strokeRect(outerX,colorY,boxWidth,boxHeight),ctx.fillStyle=labelColors.backgroundColor,ctx.fillRect(innerX,colorY+1,boxWidth-2,boxHeight-2))}ctx.fillStyle=this.labelTextColors[i]}},{key:"drawBody",value:function(pt,ctx,options){var bodyItem,textColor,lines,i,j,ilen,jlen,body=this.body,bodySpacing=options.bodySpacing,bodyAlign=options.bodyAlign,displayColors=options.displayColors,boxHeight=options.boxHeight,boxWidth=options.boxWidth,boxPadding=options.boxPadding,bodyFont=toFont(options.bodyFont),bodyLineHeight=bodyFont.lineHeight,xLinePadding=0,rtlHelper=getRtlAdapter(options.rtl,this.x,this.width),fillLineOfText=function(line){ctx.fillText(line,rtlHelper.x(pt.x+xLinePadding),pt.y+bodyLineHeight/2),pt.y+=bodyLineHeight+bodySpacing},bodyAlignForCalculation=rtlHelper.textAlign(bodyAlign);for(ctx.textAlign=bodyAlign,ctx.textBaseline="middle",ctx.font=bodyFont.string,pt.x=getAlignedX(this,bodyAlignForCalculation,options),ctx.fillStyle=options.bodyColor,each(this.beforeBody,fillLineOfText),xLinePadding=displayColors&&"right"!==bodyAlignForCalculation?"center"===bodyAlign?boxWidth/2+boxPadding:boxWidth+2+boxPadding:0,i=0,ilen=body.length;i<ilen;++i){for(bodyItem=body[i],textColor=this.labelTextColors[i],ctx.fillStyle=textColor,each(bodyItem.before,fillLineOfText),lines=bodyItem.lines,displayColors&&lines.length&&(this._drawColorBox(ctx,pt,i,rtlHelper,options),bodyLineHeight=Math.max(bodyFont.lineHeight,boxHeight)),j=0,jlen=lines.length;j<jlen;++j)fillLineOfText(lines[j]),bodyLineHeight=bodyFont.lineHeight;each(bodyItem.after,fillLineOfText)}xLinePadding=0,bodyLineHeight=bodyFont.lineHeight,each(this.afterBody,fillLineOfText),pt.y-=bodySpacing}},{key:"drawFooter",value:function(pt,ctx,options){var footerFont,i,footer=this.footer,length=footer.length;if(length){var rtlHelper=getRtlAdapter(options.rtl,this.x,this.width);for(pt.x=getAlignedX(this,options.footerAlign,options),pt.y+=options.footerMarginTop,ctx.textAlign=rtlHelper.textAlign(options.footerAlign),ctx.textBaseline="middle",footerFont=toFont(options.footerFont),ctx.fillStyle=options.footerColor,ctx.font=footerFont.string,i=0;i<length;++i)ctx.fillText(footer[i],rtlHelper.x(pt.x),pt.y+footerFont.lineHeight/2),pt.y+=footerFont.lineHeight+options.footerSpacing}}},{key:"drawBackground",value:function(pt,ctx,tooltipSize,options){var xAlign=this.xAlign,yAlign=this.yAlign,x=pt.x,y=pt.y,width=tooltipSize.width,height=tooltipSize.height,_toTRBLCorners3=toTRBLCorners(options.cornerRadius),topLeft=_toTRBLCorners3.topLeft,topRight=_toTRBLCorners3.topRight,bottomLeft=_toTRBLCorners3.bottomLeft,bottomRight=_toTRBLCorners3.bottomRight;ctx.fillStyle=options.backgroundColor,ctx.strokeStyle=options.borderColor,ctx.lineWidth=options.borderWidth,ctx.beginPath(),ctx.moveTo(x+topLeft,y),"top"===yAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+width-topRight,y),ctx.quadraticCurveTo(x+width,y,x+width,y+topRight),"center"===yAlign&&"right"===xAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+width,y+height-bottomRight),ctx.quadraticCurveTo(x+width,y+height,x+width-bottomRight,y+height),"bottom"===yAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x+bottomLeft,y+height),ctx.quadraticCurveTo(x,y+height,x,y+height-bottomLeft),"center"===yAlign&&"left"===xAlign&&this.drawCaret(pt,ctx,tooltipSize,options),ctx.lineTo(x,y+topLeft),ctx.quadraticCurveTo(x,y,x+topLeft,y),ctx.closePath(),ctx.fill(),options.borderWidth>0&&ctx.stroke()}},{key:"_updateAnimationTarget",value:function(options){var chart=this.chart,anims=this.$animations,animX=anims&&anims.x,animY=anims&&anims.y;if(animX||animY){var position=positioners[options.position].call(this,this._active,this._eventPosition);if(!position)return;var size=this._size=getTooltipSize(this,options),positionAndSize=Object.assign({},position,this._size),alignment=determineAlignment(chart,options,positionAndSize),point=getBackgroundPoint(options,positionAndSize,alignment,chart);animX._to===point.x&&animY._to===point.y||(this.xAlign=alignment.xAlign,this.yAlign=alignment.yAlign,this.width=size.width,this.height=size.height,this.caretX=position.x,this.caretY=position.y,this._resolveAnimations().update(this,point))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(ctx){var options=this.options.setContext(this.getContext()),opacity=this.opacity;if(opacity){this._updateAnimationTarget(options);var tooltipSize={width:this.width,height:this.height},pt={x:this.x,y:this.y};opacity=Math.abs(opacity)<.001?0:opacity;var padding=toPadding(options.padding),hasTooltipContent=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;options.enabled&&hasTooltipContent&&(ctx.save(),ctx.globalAlpha=opacity,this.drawBackground(pt,ctx,tooltipSize,options),overrideTextDirection(ctx,options.textDirection),pt.y+=padding.top,this.drawTitle(pt,ctx,options),this.drawBody(pt,ctx,options),this.drawFooter(pt,ctx,options),restoreTextDirection(ctx,options.textDirection),ctx.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(activeElements,eventPosition){var _this34=this,lastActive=this._active,active=activeElements.map((function(_ref10){var datasetIndex=_ref10.datasetIndex,index=_ref10.index,meta=_this34.chart.getDatasetMeta(datasetIndex);if(!meta)throw new Error("Cannot find a dataset at index "+datasetIndex);return{datasetIndex:datasetIndex,element:meta.data[index],index:index}})),changed=!_elementsEqual(lastActive,active),positionChanged=this._positionChanged(active,eventPosition);(changed||positionChanged)&&(this._active=active,this._eventPosition=eventPosition,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,replay){var inChartArea=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(replay&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var options=this.options,lastActive=this._active||[],active=this._getActiveElements(e,lastActive,replay,inChartArea),positionChanged=this._positionChanged(active,e),changed=replay||!_elementsEqual(active,lastActive)||positionChanged;return changed&&(this._active=active,(options.enabled||options.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,replay))),changed}},{key:"_getActiveElements",value:function(e,lastActive,replay,inChartArea){var options=this.options;if("mouseout"===e.type)return[];if(!inChartArea)return lastActive;var active=this.chart.getElementsAtEventForMode(e,options.mode,options,replay);return options.reverse&&active.reverse(),active}},{key:"_positionChanged",value:function(active,e){var caretX=this.caretX,caretY=this.caretY,options=this.options,position=positioners[options.position].call(this,active,e);return!1!==position&&(caretX!==position.x||caretY!==position.y)}}]),Tooltip}(Element);Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners:positioners,afterInit:function(chart,_args,options){options&&(chart.tooltip=new Tooltip({chart:chart,options:options}))},beforeUpdate:function(chart,_args,options){chart.tooltip&&chart.tooltip.initialize(options)},reset:function(chart,_args,options){chart.tooltip&&chart.tooltip.initialize(options)},afterDraw:function(chart){var tooltip=chart.tooltip;if(tooltip&&tooltip._willRender()){var args={tooltip:tooltip};if(!1===chart.notifyPlugins("beforeTooltipDraw",args))return;tooltip.draw(chart.ctx),chart.notifyPlugins("afterTooltipDraw",args)}},afterEvent:function(chart,args){if(chart.tooltip){var useFinalPosition=args.replay;chart.tooltip.handleEvent(args.event,useFinalPosition,args.inChartArea)&&(args.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(ctx,opts){return opts.bodyFont.size},boxWidth:function(ctx,opts){return opts.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title:function(tooltipItems){if(tooltipItems.length>0){var item=tooltipItems[0],labels=item.chart.data.labels,labelCount=labels?labels.length:0;if(this&&this.options&&"dataset"===this.options.mode)return item.dataset.label||"";if(item.label)return item.label;if(labelCount>0&&item.dataIndex<labelCount)return labels[item.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label:function(tooltipItem){if(this&&this.options&&"dataset"===this.options.mode)return tooltipItem.label+": "+tooltipItem.formattedValue||tooltipItem.formattedValue;var label=tooltipItem.dataset.label||"";label&&(label+=": ");var value=tooltipItem.formattedValue;return isNullOrUndef(value)||(label+=value),label},labelColor:function(tooltipItem){var options=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex).controller.getStyle(tooltipItem.dataIndex);return{borderColor:options.borderColor,backgroundColor:options.backgroundColor,borderWidth:options.borderWidth,borderDash:options.borderDash,borderDashOffset:options.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(tooltipItem){var options=tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex).controller.getStyle(tooltipItem.dataIndex);return{pointStyle:options.pointStyle,rotation:options.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(name){return"filter"!==name&&"itemSort"!==name&&"external"!==name},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});function findOrAddLabel(labels,raw,index,addedLabels){var first=labels.indexOf(raw);return-1===first?function(labels,raw,index,addedLabels){return"string"==typeof raw?(index=labels.push(raw)-1,addedLabels.unshift({index:index,label:raw})):isNaN(raw)&&(index=null),index}(labels,raw,index,addedLabels):first!==labels.lastIndexOf(raw)?index:first}var CategoryScale=function(_Scale){_inherits(CategoryScale,_Scale);var _super19=_createSuper(CategoryScale);function CategoryScale(cfg){var _this35;return _classCallCheck(this,CategoryScale),(_this35=_super19.call(this,cfg))._startValue=void 0,_this35._valueRange=0,_this35._addedLabels=[],_this35}return _createClass(CategoryScale,[{key:"init",value:function(scaleOptions){var added=this._addedLabels;if(added.length){var _step32,labels=this.getLabels(),_iterator32=_createForOfIteratorHelper(added);try{for(_iterator32.s();!(_step32=_iterator32.n()).done;){var _step32$value=_step32.value,_index3=_step32$value.index,label=_step32$value.label;labels[_index3]===label&&labels.splice(_index3,1)}}catch(err){_iterator32.e(err)}finally{_iterator32.f()}this._addedLabels=[]}_get2(_getPrototypeOf(CategoryScale.prototype),"init",this).call(this,scaleOptions)}},{key:"parse",value:function(raw,index){if(isNullOrUndef(raw))return null;var labels=this.getLabels();return function(index,max){return null===index?null:_limitValue(Math.round(index),0,max)}(index=isFinite(index)&&labels[index]===raw?index:findOrAddLabel(labels,raw,valueOrDefault(index,raw),this._addedLabels),labels.length-1)}},{key:"determineDataLimits",value:function(){var _this$getUserBounds2=this.getUserBounds(),minDefined=_this$getUserBounds2.minDefined,maxDefined=_this$getUserBounds2.maxDefined,_this$getMinMax=this.getMinMax(!0),min=_this$getMinMax.min,max=_this$getMinMax.max;"ticks"===this.options.bounds&&(minDefined||(min=0),maxDefined||(max=this.getLabels().length-1)),this.min=min,this.max=max}},{key:"buildTicks",value:function(){var min=this.min,max=this.max,offset=this.options.offset,ticks=[],labels=this.getLabels();labels=0===min&&max===labels.length-1?labels:labels.slice(min,max+1),this._valueRange=Math.max(labels.length-(offset?0:1),1),this._startValue=this.min-(offset?.5:0);for(var value=min;value<=max;value++)ticks.push({value:value});return ticks}},{key:"getLabelForValue",value:function(value){var labels=this.getLabels();return value>=0&&value<labels.length?labels[value]:value}},{key:"configure",value:function(){_get2(_getPrototypeOf(CategoryScale.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(value){return"number"!=typeof value&&(value=this.parse(value)),null===value?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(index){var ticks=this.ticks;return index<0||index>ticks.length-1?null:this.getPixelForValue(ticks[index].value)}},{key:"getValueForPixel",value:function(pixel){return Math.round(this._startValue+this.getDecimalForPixel(pixel)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),CategoryScale}(Scale);function relativeLabelSize(value,minSpacing,_ref11){var horizontal=_ref11.horizontal,rad=toRadians(_ref11.minRotation),ratio=(horizontal?Math.sin(rad):Math.cos(rad))||.001,length=.75*minSpacing*(""+value).length;return Math.min(minSpacing/ratio,length)}CategoryScale.id="category",CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};var LinearScaleBase=function(_Scale2){_inherits(LinearScaleBase,_Scale2);var _super20=_createSuper(LinearScaleBase);function LinearScaleBase(cfg){var _this36;return _classCallCheck(this,LinearScaleBase),(_this36=_super20.call(this,cfg)).start=void 0,_this36.end=void 0,_this36._startValue=void 0,_this36._endValue=void 0,_this36._valueRange=0,_this36}return _createClass(LinearScaleBase,[{key:"parse",value:function(raw,index){return isNullOrUndef(raw)||("number"==typeof raw||raw instanceof Number)&&!isFinite(+raw)?null:+raw}},{key:"handleTickRangeOptions",value:function(){var beginAtZero=this.options.beginAtZero,_this$getUserBounds3=this.getUserBounds(),minDefined=_this$getUserBounds3.minDefined,maxDefined=_this$getUserBounds3.maxDefined,min=this.min,max=this.max,setMin=function(v){return min=minDefined?min:v},setMax=function(v){return max=maxDefined?max:v};if(beginAtZero){var minSign=sign(min),maxSign=sign(max);minSign<0&&maxSign<0?setMax(0):minSign>0&&maxSign>0&&setMin(0)}if(min===max){var offset=1;(max>=Number.MAX_SAFE_INTEGER||min<=Number.MIN_SAFE_INTEGER)&&(offset=Math.abs(.05*max)),setMax(max+offset),beginAtZero||setMin(min-offset)}this.min=min,this.max=max}},{key:"getTickLimit",value:function(){var maxTicks,tickOpts=this.options.ticks,maxTicksLimit=tickOpts.maxTicksLimit,stepSize=tickOpts.stepSize;return stepSize?(maxTicks=Math.ceil(this.max/stepSize)-Math.floor(this.min/stepSize)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(stepSize," would result generating up to ").concat(maxTicks," ticks. Limiting to 1000.")),maxTicks=1e3):(maxTicks=this.computeTickLimit(),maxTicksLimit=maxTicksLimit||11),maxTicksLimit&&(maxTicks=Math.min(maxTicksLimit,maxTicks)),maxTicks}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var opts=this.options,tickOpts=opts.ticks,maxTicks=this.getTickLimit(),ticks=function(generationOptions,dataRange){var factor,niceMin,niceMax,numSpaces,ticks=[],bounds=generationOptions.bounds,step=generationOptions.step,min=generationOptions.min,max=generationOptions.max,precision=generationOptions.precision,count=generationOptions.count,maxTicks=generationOptions.maxTicks,maxDigits=generationOptions.maxDigits,includeBounds=generationOptions.includeBounds,unit=step||1,maxSpaces=maxTicks-1,rmin=dataRange.min,rmax=dataRange.max,minDefined=!isNullOrUndef(min),maxDefined=!isNullOrUndef(max),countDefined=!isNullOrUndef(count),minSpacing=(rmax-rmin)/(maxDigits+1),spacing=niceNum((rmax-rmin)/maxSpaces/unit)*unit;if(spacing<1e-14&&!minDefined&&!maxDefined)return[{value:rmin},{value:rmax}];(numSpaces=Math.ceil(rmax/spacing)-Math.floor(rmin/spacing))>maxSpaces&&(spacing=niceNum(numSpaces*spacing/maxSpaces/unit)*unit),isNullOrUndef(precision)||(factor=Math.pow(10,precision),spacing=Math.ceil(spacing*factor)/factor),"ticks"===bounds?(niceMin=Math.floor(rmin/spacing)*spacing,niceMax=Math.ceil(rmax/spacing)*spacing):(niceMin=rmin,niceMax=rmax),minDefined&&maxDefined&&step&&almostWhole((max-min)/step,spacing/1e3)?(spacing=(max-min)/(numSpaces=Math.round(Math.min((max-min)/spacing,maxTicks))),niceMin=min,niceMax=max):countDefined?spacing=((niceMax=maxDefined?max:niceMax)-(niceMin=minDefined?min:niceMin))/(numSpaces=count-1):numSpaces=almostEquals(numSpaces=(niceMax-niceMin)/spacing,Math.round(numSpaces),spacing/1e3)?Math.round(numSpaces):Math.ceil(numSpaces);var decimalPlaces=Math.max(_decimalPlaces(spacing),_decimalPlaces(niceMin));factor=Math.pow(10,isNullOrUndef(precision)?decimalPlaces:precision),niceMin=Math.round(niceMin*factor)/factor,niceMax=Math.round(niceMax*factor)/factor;var j=0;for(minDefined&&(includeBounds&&niceMin!==min?(ticks.push({value:min}),niceMin<min&&j++,almostEquals(Math.round((niceMin+j*spacing)*factor)/factor,min,relativeLabelSize(min,minSpacing,generationOptions))&&j++):niceMin<min&&j++);j<numSpaces;++j)ticks.push({value:Math.round((niceMin+j*spacing)*factor)/factor});return maxDefined&&includeBounds&&niceMax!==max?ticks.length&&almostEquals(ticks[ticks.length-1].value,max,relativeLabelSize(max,minSpacing,generationOptions))?ticks[ticks.length-1].value=max:ticks.push({value:max}):maxDefined&&niceMax!==max||ticks.push({value:niceMax}),ticks}({maxTicks:maxTicks=Math.max(2,maxTicks),bounds:opts.bounds,min:opts.min,max:opts.max,precision:tickOpts.precision,step:tickOpts.stepSize,count:tickOpts.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:tickOpts.minRotation||0,includeBounds:!1!==tickOpts.includeBounds},this._range||this);return"ticks"===opts.bounds&&_setMinAndMaxByKey(ticks,this,"value"),opts.reverse?(ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ticks}},{key:"configure",value:function(){var ticks=this.ticks,start=this.min,end=this.max;if(_get2(_getPrototypeOf(LinearScaleBase.prototype),"configure",this).call(this),this.options.offset&&ticks.length){var offset=(end-start)/Math.max(ticks.length-1,1)/2;start-=offset,end+=offset}this._startValue=start,this._endValue=end,this._valueRange=end-start}},{key:"getLabelForValue",value:function(value){return formatNumber(value,this.chart.options.locale,this.options.ticks.format)}}]),LinearScaleBase}(Scale),LinearScale=function(_LinearScaleBase){_inherits(LinearScale,_LinearScaleBase);var _super21=_createSuper(LinearScale);function LinearScale(){return _classCallCheck(this,LinearScale),_super21.apply(this,arguments)}return _createClass(LinearScale,[{key:"determineDataLimits",value:function(){var _this$getMinMax2=this.getMinMax(!0),min=_this$getMinMax2.min,max=_this$getMinMax2.max;this.min=isNumberFinite(min)?min:0,this.max=isNumberFinite(max)?max:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var horizontal=this.isHorizontal(),length=horizontal?this.width:this.height,minRotation=toRadians(this.options.ticks.minRotation),ratio=(horizontal?Math.sin(minRotation):Math.cos(minRotation))||.001,tickFont=this._resolveTickFontOptions(0);return Math.ceil(length/Math.min(40,tickFont.lineHeight/ratio))}},{key:"getPixelForValue",value:function(value){return null===value?NaN:this.getPixelForDecimal((value-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(pixel){return this._startValue+this.getDecimalForPixel(pixel)*this._valueRange}}]),LinearScale}(LinearScaleBase);function isMajor(tickVal){return 1==tickVal/Math.pow(10,Math.floor(log10(tickVal)))}LinearScale.id="linear",LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};var LogarithmicScale=function(_Scale3){_inherits(LogarithmicScale,_Scale3);var _super22=_createSuper(LogarithmicScale);function LogarithmicScale(cfg){var _this37;return _classCallCheck(this,LogarithmicScale),(_this37=_super22.call(this,cfg)).start=void 0,_this37.end=void 0,_this37._startValue=void 0,_this37._valueRange=0,_this37}return _createClass(LogarithmicScale,[{key:"parse",value:function(raw,index){var value=LinearScaleBase.prototype.parse.apply(this,[raw,index]);if(0!==value)return isNumberFinite(value)&&value>0?value:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var _this$getMinMax3=this.getMinMax(!0),min=_this$getMinMax3.min,max=_this$getMinMax3.max;this.min=isNumberFinite(min)?Math.max(0,min):null,this.max=isNumberFinite(max)?Math.max(0,max):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var _this$getUserBounds4=this.getUserBounds(),minDefined=_this$getUserBounds4.minDefined,maxDefined=_this$getUserBounds4.maxDefined,min=this.min,max=this.max,setMin=function(v){return min=minDefined?min:v},setMax=function(v){return max=maxDefined?max:v},exp=function(v,m){return Math.pow(10,Math.floor(log10(v))+m)};min===max&&(min<=0?(setMin(1),setMax(10)):(setMin(exp(min,-1)),setMax(exp(max,1)))),min<=0&&setMin(exp(max,-1)),max<=0&&setMax(exp(min,1)),this._zero&&this.min!==this._suggestedMin&&min===exp(this.min,0)&&setMin(exp(min,-1)),this.min=min,this.max=max}},{key:"buildTicks",value:function(){var opts=this.options,ticks=function(generationOptions,dataRange){var endExp=Math.floor(log10(dataRange.max)),endSignificand=Math.ceil(dataRange.max/Math.pow(10,endExp)),ticks=[],tickVal=finiteOrDefault(generationOptions.min,Math.pow(10,Math.floor(log10(dataRange.min)))),exp=Math.floor(log10(tickVal)),significand=Math.floor(tickVal/Math.pow(10,exp)),precision=exp<0?Math.pow(10,Math.abs(exp)):1;do{ticks.push({value:tickVal,major:isMajor(tickVal)}),10==++significand&&(significand=1,precision=++exp>=0?1:precision),tickVal=Math.round(significand*Math.pow(10,exp)*precision)/precision}while(exp<endExp||exp===endExp&&significand<endSignificand);var lastTick=finiteOrDefault(generationOptions.max,tickVal);return ticks.push({value:lastTick,major:isMajor(tickVal)}),ticks}({min:this._userMin,max:this._userMax},this);return"ticks"===opts.bounds&&_setMinAndMaxByKey(ticks,this,"value"),opts.reverse?(ticks.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),ticks}},{key:"getLabelForValue",value:function(value){return void 0===value?"0":formatNumber(value,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var start=this.min;_get2(_getPrototypeOf(LogarithmicScale.prototype),"configure",this).call(this),this._startValue=log10(start),this._valueRange=log10(this.max)-log10(start)}},{key:"getPixelForValue",value:function(value){return void 0!==value&&0!==value||(value=this.min),null===value||isNaN(value)?NaN:this.getPixelForDecimal(value===this.min?0:(log10(value)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(pixel){var decimal=this.getDecimalForPixel(pixel);return Math.pow(10,this._startValue+decimal*this._valueRange)}}]),LogarithmicScale}(Scale);function getTickBackdropHeight(opts){var tickOpts=opts.ticks;if(tickOpts.display&&opts.display){var padding=toPadding(tickOpts.backdropPadding);return valueOrDefault(tickOpts.font&&tickOpts.font.size,defaults.font.size)+padding.height}return 0}function determineLimits(angle,pos,size,min,max){return angle===min||angle===max?{start:pos-size/2,end:pos+size/2}:angle<min||angle>max?{start:pos-size,end:pos}:{start:pos,end:pos+size}}function fitWithPointLabels(scale){for(var ctx,font,label,orig={l:scale.left+scale._padding.left,r:scale.right-scale._padding.right,t:scale.top+scale._padding.top,b:scale.bottom-scale._padding.bottom},limits=Object.assign({},orig),labelSizes=[],padding=[],valueCount=scale._pointLabels.length,pointLabelOpts=scale.options.pointLabels,additionalAngle=pointLabelOpts.centerPointLabels?PI/valueCount:0,i=0;i<valueCount;i++){var opts=pointLabelOpts.setContext(scale.getPointLabelContext(i));padding[i]=opts.padding;var pointPosition=scale.getPointPosition(i,scale.drawingArea+padding[i],additionalAngle),plFont=toFont(opts.font),textSize=(ctx=scale.ctx,font=plFont,label=isArray(label=scale._pointLabels[i])?label:[label],{w:_longestText(ctx,font.string,label),h:label.length*font.lineHeight});labelSizes[i]=textSize;var angleRadians=_normalizeAngle(scale.getIndexAngle(i)+additionalAngle),angle=Math.round(toDegrees(angleRadians));updateLimits(limits,orig,angleRadians,determineLimits(angle,pointPosition.x,textSize.w,0,180),determineLimits(angle,pointPosition.y,textSize.h,90,270))}scale.setCenterPoint(orig.l-limits.l,limits.r-orig.r,orig.t-limits.t,limits.b-orig.b),scale._pointLabelItems=function(scale,labelSizes,padding){for(var items=[],valueCount=scale._pointLabels.length,opts=scale.options,extra=getTickBackdropHeight(opts)/2,outerDistance=scale.drawingArea,additionalAngle=opts.pointLabels.centerPointLabels?PI/valueCount:0,i=0;i<valueCount;i++){var pointLabelPosition=scale.getPointPosition(i,outerDistance+extra+padding[i],additionalAngle),angle=Math.round(toDegrees(_normalizeAngle(pointLabelPosition.angle+HALF_PI))),size=labelSizes[i],y=yForAngle(pointLabelPosition.y,size.h,angle),textAlign=getTextAlignForAngle(angle),left=leftForTextAlign(pointLabelPosition.x,size.w,textAlign);items.push({x:pointLabelPosition.x,y:y,textAlign:textAlign,left:left,top:y,right:left+size.w,bottom:y+size.h})}return items}(scale,labelSizes,padding)}function updateLimits(limits,orig,angle,hLimits,vLimits){var sin=Math.abs(Math.sin(angle)),cos=Math.abs(Math.cos(angle)),x=0,y=0;hLimits.start<orig.l?(x=(orig.l-hLimits.start)/sin,limits.l=Math.min(limits.l,orig.l-x)):hLimits.end>orig.r&&(x=(hLimits.end-orig.r)/sin,limits.r=Math.max(limits.r,orig.r+x)),vLimits.start<orig.t?(y=(orig.t-vLimits.start)/cos,limits.t=Math.min(limits.t,orig.t-y)):vLimits.end>orig.b&&(y=(vLimits.end-orig.b)/cos,limits.b=Math.max(limits.b,orig.b+y))}function getTextAlignForAngle(angle){return 0===angle||180===angle?"center":angle<180?"left":"right"}function leftForTextAlign(x,w,align){return"right"===align?x-=w:"center"===align&&(x-=w/2),x}function yForAngle(y,h,angle){return 90===angle||270===angle?y-=h/2:(angle>270||angle<90)&&(y-=h),y}function pathRadiusLine(scale,radius,circular,labelCount){var ctx=scale.ctx;if(circular)ctx.arc(scale.xCenter,scale.yCenter,radius,0,TAU);else{var pointPosition=scale.getPointPosition(0,radius);ctx.moveTo(pointPosition.x,pointPosition.y);for(var i=1;i<labelCount;i++)pointPosition=scale.getPointPosition(i,radius),ctx.lineTo(pointPosition.x,pointPosition.y)}}LogarithmicScale.id="logarithmic",LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};var RadialLinearScale=function(_LinearScaleBase2){_inherits(RadialLinearScale,_LinearScaleBase2);var _super23=_createSuper(RadialLinearScale);function RadialLinearScale(cfg){var _this38;return _classCallCheck(this,RadialLinearScale),(_this38=_super23.call(this,cfg)).xCenter=void 0,_this38.yCenter=void 0,_this38.drawingArea=void 0,_this38._pointLabels=[],_this38._pointLabelItems=[],_this38}return _createClass(RadialLinearScale,[{key:"setDimensions",value:function(){var padding=this._padding=toPadding(getTickBackdropHeight(this.options)/2),w=this.width=this.maxWidth-padding.width,h=this.height=this.maxHeight-padding.height;this.xCenter=Math.floor(this.left+w/2+padding.left),this.yCenter=Math.floor(this.top+h/2+padding.top),this.drawingArea=Math.floor(Math.min(w,h)/2)}},{key:"determineDataLimits",value:function(){var _this$getMinMax4=this.getMinMax(!1),min=_this$getMinMax4.min,max=_this$getMinMax4.max;this.min=isNumberFinite(min)&&!isNaN(min)?min:0,this.max=isNumberFinite(max)&&!isNaN(max)?max:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}},{key:"generateTickLabels",value:function(ticks){var _this39=this;LinearScaleBase.prototype.generateTickLabels.call(this,ticks),this._pointLabels=this.getLabels().map((function(value,index){var label=callback(_this39.options.pointLabels.callback,[value,index],_this39);return label||0===label?label:""})).filter((function(v,i){return _this39.chart.getDataVisibility(i)}))}},{key:"fit",value:function(){var opts=this.options;opts.display&&opts.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(leftMovement,rightMovement,topMovement,bottomMovement){this.xCenter+=Math.floor((leftMovement-rightMovement)/2),this.yCenter+=Math.floor((topMovement-bottomMovement)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(leftMovement,rightMovement,topMovement,bottomMovement))}},{key:"getIndexAngle",value:function(index){return _normalizeAngle(index*(TAU/(this._pointLabels.length||1))+toRadians(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(value){if(isNullOrUndef(value))return NaN;var scalingFactor=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-value)*scalingFactor:(value-this.min)*scalingFactor}},{key:"getValueForDistanceFromCenter",value:function(distance){if(isNullOrUndef(distance))return NaN;var scaledDistance=distance/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-scaledDistance:this.min+scaledDistance}},{key:"getPointLabelContext",value:function(index){var pointLabels=this._pointLabels||[];if(index>=0&&index<pointLabels.length){var pointLabel=pointLabels[index];return function(parent,index,label){return createContext(parent,{label:label,index:index,type:"pointLabel"})}(this.getContext(),index,pointLabel)}}},{key:"getPointPosition",value:function(index,distanceFromCenter){var additionalAngle=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,angle=this.getIndexAngle(index)-HALF_PI+additionalAngle;return{x:Math.cos(angle)*distanceFromCenter+this.xCenter,y:Math.sin(angle)*distanceFromCenter+this.yCenter,angle:angle}}},{key:"getPointPositionForValue",value:function(index,value){return this.getPointPosition(index,this.getDistanceFromCenterForValue(value))}},{key:"getBasePosition",value:function(index){return this.getPointPositionForValue(index||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(index){var _this$_pointLabelItem=this._pointLabelItems[index];return{left:_this$_pointLabelItem.left,top:_this$_pointLabelItem.top,right:_this$_pointLabelItem.right,bottom:_this$_pointLabelItem.bottom}}},{key:"drawBackground",value:function(){var _this$options14=this.options,backgroundColor=_this$options14.backgroundColor,circular=_this$options14.grid.circular;if(backgroundColor){var ctx=this.ctx;ctx.save(),ctx.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),circular,this._pointLabels.length),ctx.closePath(),ctx.fillStyle=backgroundColor,ctx.fill(),ctx.restore()}}},{key:"drawGrid",value:function(){var i,offset,position,_this40=this,ctx=this.ctx,opts=this.options,angleLines=opts.angleLines,grid=opts.grid,labelCount=this._pointLabels.length;if(opts.pointLabels.display&&function(scale,labelCount){for(var ctx=scale.ctx,pointLabels=scale.options.pointLabels,i=labelCount-1;i>=0;i--){var optsAtIndex=pointLabels.setContext(scale.getPointLabelContext(i)),plFont=toFont(optsAtIndex.font),_scale$_pointLabelIte=scale._pointLabelItems[i],x=_scale$_pointLabelIte.x,y=_scale$_pointLabelIte.y,textAlign=_scale$_pointLabelIte.textAlign,left=_scale$_pointLabelIte.left,top=_scale$_pointLabelIte.top,right=_scale$_pointLabelIte.right,bottom=_scale$_pointLabelIte.bottom,backdropColor=optsAtIndex.backdropColor;if(!isNullOrUndef(backdropColor)){var borderRadius=toTRBLCorners(optsAtIndex.borderRadius),padding=toPadding(optsAtIndex.backdropPadding);ctx.fillStyle=backdropColor;var backdropLeft=left-padding.left,backdropTop=top-padding.top,backdropWidth=right-left+padding.width,backdropHeight=bottom-top+padding.height;Object.values(borderRadius).some((function(v){return 0!==v}))?(ctx.beginPath(),addRoundedRectPath(ctx,{x:backdropLeft,y:backdropTop,w:backdropWidth,h:backdropHeight,radius:borderRadius}),ctx.fill()):ctx.fillRect(backdropLeft,backdropTop,backdropWidth,backdropHeight)}renderText(ctx,scale._pointLabels[i],x,y+plFont.lineHeight/2,plFont,{color:optsAtIndex.color,textAlign:textAlign,textBaseline:"middle"})}}(this,labelCount),grid.display&&this.ticks.forEach((function(tick,index){if(0!==index){offset=_this40.getDistanceFromCenterForValue(tick.value);var optsAtIndex=grid.setContext(_this40.getContext(index-1));!function(scale,gridLineOpts,radius,labelCount){var ctx=scale.ctx,circular=gridLineOpts.circular,color=gridLineOpts.color,lineWidth=gridLineOpts.lineWidth;!circular&&!labelCount||!color||!lineWidth||radius<0||(ctx.save(),ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.setLineDash(gridLineOpts.borderDash),ctx.lineDashOffset=gridLineOpts.borderDashOffset,ctx.beginPath(),pathRadiusLine(scale,radius,circular,labelCount),ctx.closePath(),ctx.stroke(),ctx.restore())}(_this40,optsAtIndex,offset,labelCount)}})),angleLines.display){for(ctx.save(),i=labelCount-1;i>=0;i--){var optsAtIndex=angleLines.setContext(this.getPointLabelContext(i)),color=optsAtIndex.color,lineWidth=optsAtIndex.lineWidth;lineWidth&&color&&(ctx.lineWidth=lineWidth,ctx.strokeStyle=color,ctx.setLineDash(optsAtIndex.borderDash),ctx.lineDashOffset=optsAtIndex.borderDashOffset,offset=this.getDistanceFromCenterForValue(opts.ticks.reverse?this.min:this.max),position=this.getPointPosition(i,offset),ctx.beginPath(),ctx.moveTo(this.xCenter,this.yCenter),ctx.lineTo(position.x,position.y),ctx.stroke())}ctx.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var _this41=this,ctx=this.ctx,opts=this.options,tickOpts=opts.ticks;if(tickOpts.display){var offset,width,startAngle=this.getIndexAngle(0);ctx.save(),ctx.translate(this.xCenter,this.yCenter),ctx.rotate(startAngle),ctx.textAlign="center",ctx.textBaseline="middle",this.ticks.forEach((function(tick,index){if(0!==index||opts.reverse){var optsAtIndex=tickOpts.setContext(_this41.getContext(index)),tickFont=toFont(optsAtIndex.font);if(offset=_this41.getDistanceFromCenterForValue(_this41.ticks[index].value),optsAtIndex.showLabelBackdrop){ctx.font=tickFont.string,width=ctx.measureText(tick.label).width,ctx.fillStyle=optsAtIndex.backdropColor;var padding=toPadding(optsAtIndex.backdropPadding);ctx.fillRect(-width/2-padding.left,-offset-tickFont.size/2-padding.top,width+padding.width,tickFont.size+padding.height)}renderText(ctx,tick.label,0,-offset,tickFont,{color:optsAtIndex.color})}})),ctx.restore()}}},{key:"drawTitle",value:function(){}}]),RadialLinearScale}(LinearScaleBase);RadialLinearScale.id="radialLinear",RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(label){return label},padding:5,centerPointLabels:!1}},RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};var INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(a,b){return a-b}function _parse(scale,input){if(isNullOrUndef(input))return null;var adapter=scale._adapter,_scale$_parseOpts=scale._parseOpts,parser=_scale$_parseOpts.parser,round=_scale$_parseOpts.round,isoWeekday=_scale$_parseOpts.isoWeekday,value=input;return"function"==typeof parser&&(value=parser(value)),isNumberFinite(value)||(value="string"==typeof parser?adapter.parse(value,parser):adapter.parse(value)),null===value?null:(round&&(value="week"!==round||!isNumber(isoWeekday)&&!0!==isoWeekday?adapter.startOf(value,round):adapter.startOf(value,"isoWeek",isoWeekday)),+value)}function determineUnitForAutoTicks(minUnit,min,max,capacity){for(var ilen=UNITS.length,i=UNITS.indexOf(minUnit);i<ilen-1;++i){var interval=INTERVALS[UNITS[i]],factor=interval.steps?interval.steps:Number.MAX_SAFE_INTEGER;if(interval.common&&Math.ceil((max-min)/(factor*interval.size))<=capacity)return UNITS[i]}return UNITS[ilen-1]}function addTick(ticks,time,timestamps){if(timestamps){if(timestamps.length){var _lookup2=_lookup(timestamps,time),lo=_lookup2.lo,hi=_lookup2.hi;ticks[timestamps[lo]>=time?timestamps[lo]:timestamps[hi]]=!0}}else ticks[time]=!0}function ticksFromTimestamps(scale,values,majorUnit){var i,value,ticks=[],map={},ilen=values.length;for(i=0;i<ilen;++i)map[value=values[i]]=i,ticks.push({value:value,major:!1});return 0!==ilen&&majorUnit?function(scale,ticks,map,majorUnit){var major,index,adapter=scale._adapter,first=+adapter.startOf(ticks[0].value,majorUnit),last=ticks[ticks.length-1].value;for(major=first;major<=last;major=+adapter.add(major,1,majorUnit))(index=map[major])>=0&&(ticks[index].major=!0);return ticks}(scale,ticks,map,majorUnit):ticks}var TimeScale=function(_Scale4){_inherits(TimeScale,_Scale4);var _super24=_createSuper(TimeScale);function TimeScale(props){var _this42;return _classCallCheck(this,TimeScale),(_this42=_super24.call(this,props))._cache={data:[],labels:[],all:[]},_this42._unit="day",_this42._majorUnit=void 0,_this42._offsets={},_this42._normalized=!1,_this42._parseOpts=void 0,_this42}return _createClass(TimeScale,[{key:"init",value:function(scaleOpts,opts){var time=scaleOpts.time||(scaleOpts.time={}),adapter=this._adapter=new _adapters._date(scaleOpts.adapters.date);mergeIf(time.displayFormats,adapter.formats()),this._parseOpts={parser:time.parser,round:time.round,isoWeekday:time.isoWeekday},_get2(_getPrototypeOf(TimeScale.prototype),"init",this).call(this,scaleOpts),this._normalized=opts.normalized}},{key:"parse",value:function(raw,index){return void 0===raw?null:_parse(this,raw)}},{key:"beforeLayout",value:function(){_get2(_getPrototypeOf(TimeScale.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var options=this.options,adapter=this._adapter,unit=options.time.unit||"day",_this$getUserBounds5=this.getUserBounds(),min=_this$getUserBounds5.min,max=_this$getUserBounds5.max,minDefined=_this$getUserBounds5.minDefined,maxDefined=_this$getUserBounds5.maxDefined;function _applyBounds(bounds){minDefined||isNaN(bounds.min)||(min=Math.min(min,bounds.min)),maxDefined||isNaN(bounds.max)||(max=Math.max(max,bounds.max))}minDefined&&maxDefined||(_applyBounds(this._getLabelBounds()),"ticks"===options.bounds&&"labels"===options.ticks.source||_applyBounds(this.getMinMax(!1))),min=isNumberFinite(min)&&!isNaN(min)?min:+adapter.startOf(Date.now(),unit),max=isNumberFinite(max)&&!isNaN(max)?max:+adapter.endOf(Date.now(),unit)+1,this.min=Math.min(min,max-1),this.max=Math.max(min+1,max)}},{key:"_getLabelBounds",value:function(){var arr=this.getLabelTimestamps(),min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY;return arr.length&&(min=arr[0],max=arr[arr.length-1]),{min:min,max:max}}},{key:"buildTicks",value:function(){var options=this.options,timeOpts=options.time,tickOpts=options.ticks,timestamps="labels"===tickOpts.source?this.getLabelTimestamps():this._generate();"ticks"===options.bounds&&timestamps.length&&(this.min=this._userMin||timestamps[0],this.max=this._userMax||timestamps[timestamps.length-1]);var min=this.min,ticks=_filterBetween(timestamps,min,this.max);return this._unit=timeOpts.unit||(tickOpts.autoSkip?determineUnitForAutoTicks(timeOpts.minUnit,this.min,this.max,this._getLabelCapacity(min)):function(scale,numTicks,minUnit,min,max){for(var i=UNITS.length-1;i>=UNITS.indexOf(minUnit);i--){var unit=UNITS[i];if(INTERVALS[unit].common&&scale._adapter.diff(max,min,unit)>=numTicks-1)return unit}return UNITS[minUnit?UNITS.indexOf(minUnit):0]}(this,ticks.length,timeOpts.minUnit,this.min,this.max)),this._majorUnit=tickOpts.major.enabled&&"year"!==this._unit?function(unit){for(var i=UNITS.indexOf(unit)+1,ilen=UNITS.length;i<ilen;++i)if(INTERVALS[UNITS[i]].common)return UNITS[i]}(this._unit):void 0,this.initOffsets(timestamps),options.reverse&&ticks.reverse(),ticksFromTimestamps(this,ticks,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(tick){return+tick.value})))}},{key:"initOffsets",value:function(timestamps){var first,last,start=0,end=0;this.options.offset&&timestamps.length&&(first=this.getDecimalForValue(timestamps[0]),start=1===timestamps.length?1-first:(this.getDecimalForValue(timestamps[1])-first)/2,last=this.getDecimalForValue(timestamps[timestamps.length-1]),end=1===timestamps.length?last:(last-this.getDecimalForValue(timestamps[timestamps.length-2]))/2);var limit=timestamps.length<3?.5:.25;start=_limitValue(start,0,limit),end=_limitValue(end,0,limit),this._offsets={start:start,end:end,factor:1/(start+1+end)}}},{key:"_generate",value:function(){var time,count,adapter=this._adapter,min=this.min,max=this.max,options=this.options,timeOpts=options.time,minor=timeOpts.unit||determineUnitForAutoTicks(timeOpts.minUnit,min,max,this._getLabelCapacity(min)),stepSize=valueOrDefault(timeOpts.stepSize,1),weekday="week"===minor&&timeOpts.isoWeekday,hasWeekday=isNumber(weekday)||!0===weekday,ticks={},first=min;if(hasWeekday&&(first=+adapter.startOf(first,"isoWeek",weekday)),first=+adapter.startOf(first,hasWeekday?"day":minor),adapter.diff(max,min,minor)>1e5*stepSize)throw new Error(min+" and "+max+" are too far apart with stepSize of "+stepSize+" "+minor);var timestamps="data"===options.ticks.source&&this.getDataTimestamps();for(time=first,count=0;time<max;time=+adapter.add(time,stepSize,minor),count++)addTick(ticks,time,timestamps);return time!==max&&"ticks"!==options.bounds&&1!==count||addTick(ticks,time,timestamps),Object.keys(ticks).sort((function(a,b){return a-b})).map((function(x){return+x}))}},{key:"getLabelForValue",value:function(value){var adapter=this._adapter,timeOpts=this.options.time;return timeOpts.tooltipFormat?adapter.format(value,timeOpts.tooltipFormat):adapter.format(value,timeOpts.displayFormats.datetime)}},{key:"_tickFormatFunction",value:function(time,index,ticks,format){var options=this.options,formats=options.time.displayFormats,unit=this._unit,majorUnit=this._majorUnit,minorFormat=unit&&formats[unit],majorFormat=majorUnit&&formats[majorUnit],tick=ticks[index],major=majorUnit&&majorFormat&&tick&&tick.major,label=this._adapter.format(time,format||(major?majorFormat:minorFormat)),formatter=options.ticks.callback;return formatter?callback(formatter,[label,index,ticks],this):label}},{key:"generateTickLabels",value:function(ticks){var i,ilen,tick;for(i=0,ilen=ticks.length;i<ilen;++i)(tick=ticks[i]).label=this._tickFormatFunction(tick.value,i,ticks)}},{key:"getDecimalForValue",value:function(value){return null===value?NaN:(value-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(value){var offsets=this._offsets,pos=this.getDecimalForValue(value);return this.getPixelForDecimal((offsets.start+pos)*offsets.factor)}},{key:"getValueForPixel",value:function(pixel){var offsets=this._offsets,pos=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return this.min+pos*(this.max-this.min)}},{key:"_getLabelSize",value:function(label){var ticksOpts=this.options.ticks,tickLabelWidth=this.ctx.measureText(label).width,angle=toRadians(this.isHorizontal()?ticksOpts.maxRotation:ticksOpts.minRotation),cosRotation=Math.cos(angle),sinRotation=Math.sin(angle),tickFontSize=this._resolveTickFontOptions(0).size;return{w:tickLabelWidth*cosRotation+tickFontSize*sinRotation,h:tickLabelWidth*sinRotation+tickFontSize*cosRotation}}},{key:"_getLabelCapacity",value:function(exampleTime){var timeOpts=this.options.time,displayFormats=timeOpts.displayFormats,format=displayFormats[timeOpts.unit]||displayFormats.millisecond,exampleLabel=this._tickFormatFunction(exampleTime,0,ticksFromTimestamps(this,[exampleTime],this._majorUnit),format),size=this._getLabelSize(exampleLabel),capacity=Math.floor(this.isHorizontal()?this.width/size.w:this.height/size.h)-1;return capacity>0?capacity:1}},{key:"getDataTimestamps",value:function(){var i,ilen,timestamps=this._cache.data||[];if(timestamps.length)return timestamps;var metas=this.getMatchingVisibleMetas();if(this._normalized&&metas.length)return this._cache.data=metas[0].controller.getAllParsedValues(this);for(i=0,ilen=metas.length;i<ilen;++i)timestamps=timestamps.concat(metas[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(timestamps)}},{key:"getLabelTimestamps",value:function(){var i,ilen,timestamps=this._cache.labels||[];if(timestamps.length)return timestamps;var labels=this.getLabels();for(i=0,ilen=labels.length;i<ilen;++i)timestamps.push(_parse(this,labels[i]));return this._cache.labels=this._normalized?timestamps:this.normalize(timestamps)}},{key:"normalize",value:function(values){return _arrayUnique(values.sort(sorter))}}]),TimeScale}(Scale);function interpolate(table,val,reverse){var prevSource,nextSource,prevTarget,nextTarget,lo=0,hi=table.length-1;if(reverse){if(val>=table[lo].pos&&val<=table[hi].pos){var _lookupByKey2=_lookupByKey(table,"pos",val);lo=_lookupByKey2.lo,hi=_lookupByKey2.hi}var _table$lo=table[lo];prevSource=_table$lo.pos,prevTarget=_table$lo.time;var _table$hi=table[hi];nextSource=_table$hi.pos,nextTarget=_table$hi.time}else{if(val>=table[lo].time&&val<=table[hi].time){var _lookupByKey3=_lookupByKey(table,"time",val);lo=_lookupByKey3.lo,hi=_lookupByKey3.hi}var _table$lo2=table[lo];prevSource=_table$lo2.time,prevTarget=_table$lo2.pos;var _table$hi2=table[hi];nextSource=_table$hi2.time,nextTarget=_table$hi2.pos}var span=nextSource-prevSource;return span?prevTarget+(nextTarget-prevTarget)*(val-prevSource)/span:prevTarget}TimeScale.id="time",TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};var TimeSeriesScale=function(_TimeScale){_inherits(TimeSeriesScale,_TimeScale);var _super25=_createSuper(TimeSeriesScale);function TimeSeriesScale(props){var _this43;return _classCallCheck(this,TimeSeriesScale),(_this43=_super25.call(this,props))._table=[],_this43._minPos=void 0,_this43._tableRange=void 0,_this43}return _createClass(TimeSeriesScale,[{key:"initOffsets",value:function(){var timestamps=this._getTimestampsForTable(),table=this._table=this.buildLookupTable(timestamps);this._minPos=interpolate(table,this.min),this._tableRange=interpolate(table,this.max)-this._minPos,_get2(_getPrototypeOf(TimeSeriesScale.prototype),"initOffsets",this).call(this,timestamps)}},{key:"buildLookupTable",value:function(timestamps){var i,ilen,prev,curr,next,min=this.min,max=this.max,items=[],table=[];for(i=0,ilen=timestamps.length;i<ilen;++i)(curr=timestamps[i])>=min&&curr<=max&&items.push(curr);if(items.length<2)return[{time:min,pos:0},{time:max,pos:1}];for(i=0,ilen=items.length;i<ilen;++i)next=items[i+1],prev=items[i-1],curr=items[i],Math.round((next+prev)/2)!==curr&&table.push({time:curr,pos:i/(ilen-1)});return table}},{key:"_getTimestampsForTable",value:function(){var timestamps=this._cache.all||[];if(timestamps.length)return timestamps;var data=this.getDataTimestamps(),label=this.getLabelTimestamps();return timestamps=data.length&&label.length?this.normalize(data.concat(label)):data.length?data:label,timestamps=this._cache.all=timestamps}},{key:"getDecimalForValue",value:function(value){return(interpolate(this._table,value)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(pixel){var offsets=this._offsets,decimal=this.getDecimalForPixel(pixel)/offsets.factor-offsets.end;return interpolate(this._table,decimal*this._tableRange+this._minPos,!0)}}]),TimeSeriesScale}(TimeScale);TimeSeriesScale.id="timeseries",TimeSeriesScale.defaults=TimeScale.defaults;var scales=Object.freeze({__proto__:null,CategoryScale:CategoryScale,LinearScale:LinearScale,LogarithmicScale:LogarithmicScale,RadialLinearScale:RadialLinearScale,TimeScale:TimeScale,TimeSeriesScale:TimeSeriesScale});return Chart.register(controllers,scales,elements,plugins),Chart.helpers=_objectSpread({},helpers),Chart._adapters=_adapters,Chart.Animation=Animation,Chart.Animations=Animations,Chart.animator=animator,Chart.controllers=registry.controllers.items,Chart.DatasetController=DatasetController,Chart.Element=Element,Chart.elements=elements,Chart.Interaction=Interaction,Chart.layouts=layouts,Chart.platforms=platforms,Chart.Scale=Scale,Chart.Ticks=Ticks,Object.assign(Chart,controllers,scales,elements,plugins,platforms),Chart.Chart=Chart,"undefined"!=typeof window&&(window.Chart=Chart),Chart},"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define("core/chartjs-lazy",factory):(global="undefined"!=typeof globalThis?globalThis:global||self).Chart=factory();

//# sourceMappingURL=chartjs-lazy.min.js.map