{"version":3,"file":"formsetter.min.js","sources":["../src/formsetter.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    tiny_bibliography\n * @copyright  2023 Stevani Andolo  <stevani@hotmail.com.au>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport * as Article from './sources/article_in_journal';\nimport * as Book from './sources/book';\nimport * as Helper from './helper';\n\nexport default class {\n\n    /**\n     * Sets bio's style.\n     *\n     * @param {string} data\n     */\n    setStyle(data = null) {\n        this.style = data;\n    }\n\n    /**\n     * Sets bio's source.\n     *\n     * @param {string} data\n     */\n    setSource(data = null) {\n        const text = this.allsources[data];\n        const VIP = this.elementId('book-source').classList; // Volume, issue & pages.\n        const city = this.elementId('fitem_id_city_bio').classList;\n        switch (data) {\n            case 'Book':\n                VIP.add('hide');\n                this.elementId('id_volume').value = '';\n                this.volume = null;\n                this.elementId('id_issue').value = '';\n                this.issue = null;\n                this.elementId('id_pages').value = '';\n                this.pages = null;\n                city.remove('hide');\n              break;\n            case 'Article in journal':\n                VIP.remove('hide');\n                city.add('hide');\n                this.elementId('id_city_bio').value = '';\n                this.city = null;\n              break;\n            default:\n                VIP.remove('hide');\n                this.elementId('id_volume').value = '';\n                this.volume = null;\n                this.elementId('id_issue').value = '';\n                this.issue = null;\n                this.elementId('id_pages').value = '';\n                this.pages = null;\n                city.add('hide');\n        }\n        this.elementId('id_publisher_label').textContent = `${text} *`;\n        this.elementId('id_publisher').placeholder = text;\n        this.source = data;\n    }\n\n    /**\n     * Sets bio's pure author.\n     *\n     * @param {string} data\n     */\n    setAuthor(data = null) {\n        this.pureauthor = data;\n    }\n\n    /**\n     * Sets generated author's name.\n     *\n     * @param {string} names\n     */\n    setGeneratedAuthorNames(names = null) {\n        if (this.author !== '') {\n            this.author += ', ' + names;\n        } else {\n            this.author = names;\n        }\n    }\n\n    /**\n     * Sets bio's title.\n     *\n     * @param {string} data\n     */\n    setTitle(data = null) {\n        this.title = data;\n    }\n\n    /**\n     * Sets bio's title based on source type.\n     */\n    setTitleBasedOnSource() {\n        let title = this.title;\n        switch (this.source) {\n            case 'Article in journal':\n                title = Article.setTitle(title);\n                break;\n            default:\n        }\n        this.title = title;\n    }\n\n    /**\n     * Sets bio's city.\n     *\n     * @param {string} data\n     */\n    setCitybio(data = null) {\n        this.city = data;\n        this.purecity = data;\n    }\n\n    /**\n     * Sets bio's city based on source type.\n     */\n    setCitybioBasedOnSource() {\n        let city = this.city;\n        switch (this.source) {\n            case 'Book':\n                city = Book.setCity(city);\n                break;\n            default:\n                city = '';\n        }\n        this.city = city;\n    }\n\n    /**\n     * Sets bio's publisher.\n     *\n     * @param {string} data\n     */\n    setPublisher(data = null) {\n        this.publisher = data;\n    }\n\n    /**\n     * Sets bio's publisher based on source type.\n     */\n    setPublisherBasedOnSource() {\n        let publisher = this.publisher;\n        switch (this.source) {\n            case 'Article in journal':\n                publisher = Article.setPublisher(publisher);\n                break;\n            default:\n        }\n        this.publisher = publisher;\n    }\n\n    /**\n     * Sets bio's year.\n     *\n     * @param {string} data\n     */\n    setYear(data = null) {\n        this.year = data;\n    }\n\n    /**\n     * Sets bio's volume.\n     *\n     * @param {string} data\n     * @param {boolean} reform\n     */\n    setVolume(data = null, reform = false) {\n        this.volume = Article.setVolume(data, reform, this);\n    }\n\n    /**\n     * Sets bio's issue.\n     *\n     * @param {string} data\n     * @param {boolean} reform\n     */\n    setIssue(data = null, reform = false) {\n        this.issue = Article.setIssue(data, reform, this);\n    }\n\n    /**\n     * Sets bio's pages.\n     *\n     * @param {string} data\n     * @param {boolean} reform\n     */\n    setPages(data = null, reform = false) {\n        this.pages = Article.setPages(data, reform, this);\n    }\n\n    /**\n     * Sets custom authors' names.\n     *\n     * @param {event} event\n     */\n    setCustomAuthorNames(event) {\n        // Generates custom author name.\n        const customauthorname = event.target.closest('[data-action=\"custom-authors\"]');\n        if (customauthorname) {\n            Helper.elementId('full-an-holder').classList.add('hide');\n            Helper.elementId('custom-an-holder').classList.remove('hide');\n            Helper.elementId('other-than-author').classList.add('hide');\n            Helper.elementId('fitem_id_author').classList.add('hide');\n        }\n\n        // Cancel custom author name.\n        const cancelcustom = event.target.closest('[data-action=\"cancel-custom-authors\"]');\n        if (cancelcustom) {\n            Helper.elementId('full-an-holder').classList.remove('hide');\n            Helper.elementId('custom-an-holder').classList.add('hide');\n            Helper.elementId('other-than-author').classList.remove('hide');\n            Helper.elementId('fitem_id_author').classList.remove('hide');\n        }\n\n        // Process custom author name.\n        const okcustom = event.target.closest('[data-action=\"ok-custom-authors\"]');\n        if (okcustom) {\n            const fullname = this.generateAuthorName(\n                Helper.elementId('id_author_firstname').value,\n                Helper.elementId('id_author_middlename').value,\n                Helper.elementId('id_author_surename').value\n            ).originated.trim();\n\n            let orivalue = Helper.elementId('id_author').value;\n            if (orivalue === '') {\n                orivalue = fullname;\n            } else {\n                orivalue += '; ' + fullname;\n            }\n\n            Helper.elementId('id_author').value = orivalue;\n            this.pureauthor = orivalue;\n\n            // Clear the inputs.\n            Helper.elementId('id_author_firstname').value = '';\n            Helper.elementId('id_author_middlename').value = '';\n            Helper.elementId('id_author_surename').value = '';\n            Helper.elementId('full-an-holder').classList.remove('hide');\n            Helper.elementId('custom-an-holder').classList.add('hide');\n\n            // Show the other-than-author and fitem_id_author IDs.\n            Helper.elementId('other-than-author').classList.remove('hide');\n            Helper.elementId('fitem_id_author').classList.remove('hide');\n        }\n    }\n}\n"],"names":["setStyle","data","style","setSource","text","this","allsources","VIP","elementId","classList","city","add","value","volume","issue","pages","remove","textContent","placeholder","source","setAuthor","pureauthor","setGeneratedAuthorNames","names","author","setTitle","title","setTitleBasedOnSource","Article","setCitybio","purecity","setCitybioBasedOnSource","Book","setCity","setPublisher","publisher","setPublisherBasedOnSource","setYear","year","setVolume","reform","setIssue","setPages","setCustomAuthorNames","event","target","closest","Helper","fullname","generateAuthorName","originated","trim","orivalue"],"mappings":"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"}