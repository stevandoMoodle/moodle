{"version":3,"file":"example.min.js","sources":["../../src/bibliography/example.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/*\n * @package    tiny_bibliography\n * @copyright  2023 Stevani Andolo <stevani@hotmail.com.au>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {byId, getBibliographyFormFields} from \"./helper\";\n\nconst date = new Date();\n/**\n * Holds arrays of attached request listeners.\n *\n * @var {Array} attachedExampleListeners\n */\nlet attachedExampleListeners = [];\n\n/**\n * Returns example for month.\n *\n * @returns {string}\n */\nconst monthExample = () => {\n    const month = [\n        \"January\",\n        \"February\",\n        \"March\",\n        \"April\",\n        \"May\",\n        \"June\",\n        \"July\",\n        \"August\",\n        \"September\",\n        \"October\",\n        \"November\",\n        \"December\"\n    ];\n    return month[date.getMonth()];\n};\n\nconst exampleMap = {\n    authorExample: {\n        \"intro\": \"<b>Author's surename, Author's initials; Author's surename, Author's initials</b>\",\n        \"example\": \"Smith, John Wick; Smith, Michael\"\n    },\n    titleExample: \"How to create a new bibliography\",\n    bookTitleExample: 'Harry Potter',\n    chapterTitleExample: 'Random patterns',\n    shortTitleExample: 'Bibliography',\n    publishedTitleExample: 'Computers and You',\n    pageTitleExample: 'Obama inaugurated as President',\n    websiteTitleExample: 'CNN.com',\n\n    publisherExample: \"IEEE\",\n    yearExample: date.getFullYear(),\n    volumeExample: 'II',\n    volumesExample: 'IV',\n\n    issueExample: '12',\n    chapterExample: '2',\n    sectionExample: '3',\n    pagesExample: '10-12',\n\n    dayExample: date.getDay(),\n    dateExample: date.getDate(),\n    monthExample: monthExample(),\n    cityExample: 'Perth',\n    urlExample: \"https://www.ieee.org/\",\n    webAddressExample: \"https://www.ieee.org/\",\n    productionCompanyExample: \"Moodle Production Line\",\n\n    stateProvinceExample: 'West Australia',\n    countryExample: 'Australia',\n\n    standardNumberExample: 'ISBN',\n    nameOfWebsiteExample: 'Litware, Inc',\n    commentsExample: 'Source was about bibliography',\n    editionExample: '2nd Edition'\n};\n\n/**\n * Gets example manually.\n *\n * @param {Object} bio\n */\nexport const getExample = (bio) => {\n    const form = getBibliographyFormFields();\n    form.forEach(field => {\n        const example = field.dataset.example;\n        if (example) {\n            addExampleListener(field.id, exampleMap[example], bio);\n        }\n    });\n};\n\nconst addExampleListener = (element, example, bio) => {\n    if (Array.isArray(element)) {\n        element.forEach(el => {\n            if (byId(el)) {\n                const exampleEl = byId(el);\n                const handler = createExampleHandler.bind(null, example, bio);\n                exampleEl.addEventListener('focus', handler);\n                attachedExampleListeners.push([exampleEl, handler, 'focus']);\n            }\n        });\n    } else {\n        if (byId(element)) {\n            const exampleEl = byId(element);\n            const handler = createExampleHandler.bind(null, example, bio);\n            exampleEl.addEventListener('focus', handler);\n            attachedExampleListeners.push([exampleEl, handler, 'focus']);\n        }\n    }\n};\n\nconst createExampleHandler = (example = {}, args) => {\n    const examplePanel = byId('bibliography-ie-panel');\n    examplePanel.style.display = 'block';\n    if (typeof example === 'object') {\n        examplePanel.innerHTML = `\n            Instructions: ${example.intro}\n            <br>\n            Example: ${example.example}\n        `;\n    } else {\n        examplePanel.innerHTML = `Example: ${example}`;\n    }\n\n    if (args) {\n        args.resetBibliographyContainerHeight();\n    }\n};\n\n/**\n * Removes attached focus listeners.\n *\n * @returns {void}\n */\nexport const removeAttachedExampleListeners = () => {\n    attachedExampleListeners.forEach(listener => {\n        // Destruct the listener.\n        const [element, handler, even] = listener;\n\n        // Remove the attached listener.\n        element.removeEventListener(even, handler);\n    });\n    attachedExampleListeners = [];\n};\n"],"names":["date","Date","attachedExampleListeners","exampleMap","authorExample","titleExample","bookTitleExample","chapterTitleExample","shortTitleExample","publishedTitleExample","pageTitleExample","websiteTitleExample","publisherExample","yearExample","getFullYear","volumeExample","volumesExample","issueExample","chapterExample","sectionExample","pagesExample","dayExample","getDay","dateExample","getDate","monthExample","getMonth","cityExample","urlExample","webAddressExample","productionCompanyExample","stateProvinceExample","countryExample","standardNumberExample","nameOfWebsiteExample","commentsExample","editionExample","bio","forEach","field","example","dataset","addExampleListener","id","element","Array","isArray","el","exampleEl","handler","createExampleHandler","bind","addEventListener","push","args","examplePanel","style","display","innerHTML","intro","resetBibliographyContainerHeight","listener","even","removeEventListener"],"mappings":";;;;;;MAuBMA,KAAO,IAAIC,SAMbC,yBAA2B,SAyBzBC,WAAa,CACfC,cAAe,OACF,4FACE,oCAEfC,aAAc,mCACdC,iBAAkB,eAClBC,oBAAqB,kBACrBC,kBAAmB,eACnBC,sBAAuB,oBACvBC,iBAAkB,iCAClBC,oBAAqB,UAErBC,iBAAkB,OAClBC,YAAab,KAAKc,cAClBC,cAAe,KACfC,eAAgB,KAEhBC,aAAc,KACdC,eAAgB,IAChBC,eAAgB,IAChBC,aAAc,QAEdC,WAAYrB,KAAKsB,SACjBC,YAAavB,KAAKwB,UAClBC,aA1Cc,CACV,UACA,WACA,QACA,QACA,MACA,OACA,OACA,SACA,YACA,UACA,WACA,YAESzB,KAAK0B,YA6BlBC,YAAa,QACbC,WAAY,wBACZC,kBAAmB,wBACnBC,yBAA0B,yBAE1BC,qBAAsB,iBACtBC,eAAgB,YAEhBC,sBAAuB,OACvBC,qBAAsB,eACtBC,gBAAiB,gCACjBC,eAAgB,mCAQOC,OACV,uCACRC,SAAQC,cACHC,QAAUD,MAAME,QAAQD,QAC1BA,SACAE,mBAAmBH,MAAMI,GAAIxC,WAAWqC,SAAUH,eAKxDK,mBAAqB,CAACE,QAASJ,QAASH,UACtCQ,MAAMC,QAAQF,SACdA,QAAQN,SAAQS,SACR,gBAAKA,IAAK,OACJC,WAAY,gBAAKD,IACjBE,QAAUC,qBAAqBC,KAAK,KAAMX,QAASH,KACzDW,UAAUI,iBAAiB,QAASH,SACpC/C,yBAAyBmD,KAAK,CAACL,UAAWC,QAAS,uBAIvD,gBAAKL,SAAU,OACTI,WAAY,gBAAKJ,SACjBK,QAAUC,qBAAqBC,KAAK,KAAMX,QAASH,KACzDW,UAAUI,iBAAiB,QAASH,SACpC/C,yBAAyBmD,KAAK,CAACL,UAAWC,QAAS,YAKzDC,qBAAuB,eAACV,+DAAU,GAAIc,kDAClCC,cAAe,gBAAK,yBAC1BA,aAAaC,MAAMC,QAAU,QAEzBF,aAAaG,UADM,iBAAZlB,8CAEaA,QAAQmB,0DAEbnB,QAAQA,yCAGcA,SAGrCc,MACAA,KAAKM,4EASiC,KAC1C1D,yBAAyBoC,SAAQuB,iBAEtBjB,QAASK,QAASa,MAAQD,SAGjCjB,QAAQmB,oBAAoBD,KAAMb,YAEtC/C,yBAA2B"}