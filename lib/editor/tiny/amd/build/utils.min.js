define("editor_tiny/utils",["exports","core/templates","./options"],(function(_exports,_templates,_options){function _slicedToArray(arr,i){return function(arr){if(Array.isArray(arr))return arr}(arr)||function(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getImagePath=_exports.getDocumentationLink=_exports.getButtonImage=_exports.displayFilepicker=_exports.addToolbarButton=_exports.addMenubarItem=_exports.addContextmenuItem=void 0;var getImagePath=function(identifier){var component=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor_tiny";return Promise.resolve(M.util.image_url(identifier,component))};_exports.getImagePath=getImagePath;var fn,_ref,getButtonImage=(fn=regeneratorRuntime.mark((function _callee(identifier){var component,_args=arguments;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return component=_args.length>1&&void 0!==_args[1]?_args[1]:"editor_tiny",_context.t0=_templates.renderForPromise,_context.next=4,getImagePath(identifier,component);case 4:return _context.t1=_context.sent,_context.t2={image:_context.t1},_context.abrupt("return",(0,_context.t0)("editor_tiny/toolbar_button",_context.t2));case 7:case"end":return _context.stop()}}),_callee)})),_ref=function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))},function(_x){return _ref.apply(this,arguments)});_exports.getButtonImage=getButtonImage;_exports.displayFilepicker=function(editor,filetype){return new Promise((function(resolve,reject){var configuration=(0,_options.getFilePicker)(editor,filetype);if(configuration){var options=_objectSpread(_objectSpread({},configuration),{},{formcallback:resolve});M.core_filepicker.show(Y,options)}else reject("Unknown filetype ".concat(filetype))}))};_exports.addToolbarButton=function(toolbar,section,button){return toolbar?JSON.parse(JSON.stringify(toolbar)).map((function(item){return item.name===section&&item.items.push(button),item})):[{name:section,items:[button]}]};_exports.addMenubarItem=function(menubar,section,menuitem){if(!menubar);var mutatedMenubar=JSON.parse(JSON.stringify(menubar));return Array.from(Object.entries(mutatedMenubar)).forEach((function(_ref2){var _ref3=_slicedToArray(_ref2,2),name=_ref3[0],menu=_ref3[1];name===section&&(menu.items="".concat(menu.items," ").concat(menuitem))})),mutatedMenubar};_exports.addContextmenuItem=function(contextmenu,menuitem){return(null!=contextmenu?contextmenu:"").split(" ").concat(menuitem).filter((function(item){return""!==item})).join(" ")};_exports.getDocumentationLink=function(pluginName){return"https://docs.moodle.com/en/editor_tiny/".concat(pluginName)}}));

//# sourceMappingURL=utils.min.js.map